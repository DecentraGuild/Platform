import{I}from"./AfR23o-p.js";import{_ as te,o as u,c as v,r as Ve,e as ne,f as Y,t as y,g as L,a as t,h as B,i as A,j as ce,T as Se,k as le,b as r,l,F as U,m as Z,w as P,n as re,d as X,p as ue,q as be,s as Me,v as we,x as Fe,y as $e,z as Te,A as xe,B as Be,C as Ce,D as Pe,E as Ae,G as Ue,H as Ie,I as Ee}from"./DhkfeLsH.js";import{B as K}from"./DZ77Mkvz.js";import{T as S,a as Le}from"./B_Z0SKkq.js";import{P as Ne}from"./yq63690G.js";import{M as Re,a as _e}from"./OJWcqhwD.js";import{t as ve}from"./DnknCDuH.js";import{u as De}from"./Dr-6QOM-.js";import{u as he}from"./Bg9r2jCQ.js";import{M as je}from"./CawqM3FG.js";const He={},Oe={class:"card"};function We(m,_){return u(),v("div",Oe,[Ve(m.$slots,"default",{},void 0)])}const ee=te(He,[["render",We],["__scopeId","data-v-ac27e643"]]),qe={class:"color-input"},ze=["for"],Ge={class:"color-input__row"},Ke=["id","value"],Je=["id","value","placeholder"],Ye={key:1,class:"color-input__error"},Ze=ne({__name:"ColorInput",props:{modelValue:{},label:{},placeholder:{default:"#000000"}},emits:["update:modelValue"],setup(m,{emit:_}){const p=m,M=_,s=B(null),T=B(null),F=A(()=>`color-hex-${Math.random().toString(36).slice(2)}`),a=A(()=>`color-swatch-${Math.random().toString(36).slice(2)}`);function k(V){const b=String(V).trim().replace(/^#/,"");if(b.length===0)return"";if(/^[0-9a-fA-F]{3}$/.test(b)){const E=b[0]+b[0],h=b[1]+b[1],c=b[2]+b[2];return`#${E}${h}${c}`}return/^[0-9a-fA-F]{6}$/.test(b)?`#${b}`:""}const w=A(()=>{const V=p.modelValue??"";return V.length===0||k(V)?"":"Invalid hex (use #RGB or #RRGGBB)"}),$=A(()=>{const V=p.modelValue??"";return V.length===0?V:k(V)||V}),z=A(()=>k(p.modelValue??"")||"#000000");function N(V){const b=k(V);M("update:modelValue",b||V)}function j(V){const b=V.target.value;N(b)}function R(V){const b=V.target.value,E=k(b);E?(M("update:modelValue",E),s.value?.setAttribute?.("value",E)):M("update:modelValue",b)}return Y(()=>p.modelValue,V=>{const b=k(V??"");b&&T.value&&T.value.value!==b&&(T.value.value=b)}),(V,b)=>(u(),v("div",qe,[m.label?(u(),v("label",{key:0,for:F.value,class:"color-input__label"},y(m.label),9,ze)):L("",!0),t("div",Ge,[t("input",{id:a.value,ref_key:"swatchRef",ref:s,type:"color",value:z.value,class:"color-input__swatch",onInput:j},null,40,Ke),t("input",{id:F.value,ref_key:"hexRef",ref:T,type:"text",value:$.value,placeholder:m.placeholder,class:"color-input__hex",onInput:R},null,40,Je)]),w.value?(u(),v("p",Ye,y(w.value),1)):L("",!0)]))}}),D=te(Ze,[["__scopeId","data-v-3b6f4976"]]),Qe={class:"admin-collection-modal__panel"},Xe={class:"admin-collection-modal__header"},et={class:"admin-collection-modal__title"},tt={class:"admin-collection-modal__body"},st={key:0,class:"admin-collection-modal__stored"},nt={class:"admin-collection-modal__stored-grid"},lt={key:0,class:"admin-collection-modal__thumb-wrap"},at=["src","alt"],ot={class:"admin-collection-modal__stored-fields"},it={class:"admin-collection-modal__field"},rt={class:"admin-collection-modal__mint"},dt=["href"],mt={key:0,class:"admin-collection-modal__field"},ct={key:1,class:"admin-collection-modal__field"},ut={key:2,class:"admin-collection-modal__field"},pt={key:1,class:"admin-collection-modal__traits"},gt={class:"admin-collection-modal__trait-pills"},_t={class:"admin-collection-modal__nfts"},vt={key:0,class:"admin-collection-modal__loading"},bt={key:1,class:"admin-collection-modal__empty"},ht={key:2,class:"admin-collection-modal__grid"},ft={class:"admin-collection-modal__card-media"},yt=["src","alt"],kt={key:1,class:"admin-collection-modal__card-placeholder"},Vt={class:"admin-collection-modal__card-info"},St={class:"admin-collection-modal__card-name"},Mt=["title"],wt={key:0,class:"admin-collection-modal__card-traits"},Ft=ne({__name:"AdminCollectionDetailModal",props:{modelValue:{type:Boolean},slug:{},collection:{}},emits:["update:modelValue"],setup(m){const _=m,p=B(null);Y(()=>_.collection?.mint??null,F=>{p.value=F},{immediate:!0});const M=A(()=>_.slug),{assets:s,loading:T}=De({slug:M,collection:p,limit:500});return(F,a)=>(u(),ce(Se,{to:"body"},[m.modelValue?(u(),v("div",{key:0,class:"admin-collection-modal",onClick:a[1]||(a[1]=le(k=>F.$emit("update:modelValue",!1),["self"]))},[t("div",Qe,[t("div",Xe,[t("h3",et,y(m.collection.name||"Collection"),1),t("button",{type:"button",class:"admin-collection-modal__close","aria-label":"Close",onClick:a[0]||(a[0]=k=>F.$emit("update:modelValue",!1))},[r(l(I),{icon:"mdi:close"})])]),t("div",tt,[m.collection?(u(),v("section",st,[a[6]||(a[6]=t("h4",{class:"admin-collection-modal__section-title"},"Stored in config",-1)),t("div",nt,[m.collection.image?(u(),v("div",lt,[t("img",{src:m.collection.image,alt:m.collection.name??m.collection.mint,class:"admin-collection-modal__thumb"},null,8,at)])):L("",!0),t("div",ot,[t("p",it,[a[2]||(a[2]=t("span",{class:"admin-collection-modal__label"},"Mint",-1)),t("code",rt,y(m.collection.mint),1),t("a",{href:`https://solscan.io/token/${m.collection.mint}`,target:"_blank",rel:"noopener",class:"admin-collection-modal__link"},"Solscan",8,dt)]),m.collection.name?(u(),v("p",mt,[a[3]||(a[3]=t("span",{class:"admin-collection-modal__label"},"Name",-1)),t("span",null,y(m.collection.name),1)])):L("",!0),m.collection.sellerFeeBasisPoints!=null?(u(),v("p",ct,[a[4]||(a[4]=t("span",{class:"admin-collection-modal__label"},"Seller fee",-1)),t("span",null,y(m.collection.sellerFeeBasisPoints)+" bps",1)])):L("",!0),m.collection.groupPath?.length?(u(),v("p",ut,[a[5]||(a[5]=t("span",{class:"admin-collection-modal__label"},"Group path",-1)),t("span",null,y(m.collection.groupPath.join(" / ")),1)])):L("",!0)])])])):L("",!0),m.collection&&(m.collection.traitTypes?.length??0)>0?(u(),v("section",pt,[a[7]||(a[7]=t("h4",{class:"admin-collection-modal__section-title"},"Unique traits in collection",-1)),t("div",gt,[(u(!0),v(U,null,Z(m.collection.traitTypes,k=>(u(),v("span",{key:k,class:"admin-collection-modal__trait-pill"},y(k),1))),128))])])):L("",!0),t("section",_t,[a[10]||(a[10]=t("h4",{class:"admin-collection-modal__section-title"},"Member NFTs",-1)),l(T)?(u(),v("div",vt,[r(l(I),{icon:"mdi:loading",class:"admin-collection-modal__spinner"}),a[8]||(a[8]=t("span",null,"Loading NFTs...",-1))])):l(s).length===0?(u(),v("div",bt,[...a[9]||(a[9]=[t("p",null,"No NFTs in scope. Run scope expand or add the collection and save.",-1)])])):(u(),v("div",ht,[(u(!0),v(U,null,Z(l(s),k=>(u(),v("div",{key:k.mint,class:"admin-collection-modal__card"},[t("div",ft,[k.metadata?.image?(u(),v("img",{key:0,src:k.metadata.image,alt:k.metadata.name??k.mint},null,8,yt)):(u(),v("div",kt,[r(l(I),{icon:"mdi:image-off"})]))]),t("div",Vt,[t("p",St,y(k.metadata?.name??l(ve)(k.mint)),1),t("p",{class:"admin-collection-modal__card-mint",title:k.mint},y(l(ve)(k.mint,6,6)),9,Mt),(k.metadata?.traits?.length??0)>0?(u(),v("div",wt,[(u(!0),v(U,null,Z((k.metadata?.traits??[]).slice(0,2),(w,$)=>(u(),v("span",{key:$,class:"admin-collection-modal__trait-tag"},y(w.trait_type)+": "+y(w.value),1))),128))])):L("",!0)])]))),128))]))])])])])):L("",!0)]))}}),$t=Object.assign(te(Ft,[["__scopeId","data-v-92cc1fa5"]]),{__name:"AdminCollectionDetailModal"}),Tt={class:"marketplace-settings"},xt={class:"marketplace-settings__add-mint"},Bt={key:0,class:"marketplace-settings__mint-list"},Ct=["disabled","onClick"],Pt={class:"marketplace-settings__mint-thumb"},At=["src","alt"],Ut={key:1,class:"marketplace-settings__mint-thumb-placeholder"},It={class:"marketplace-settings__mint-detail"},Et={class:"marketplace-settings__mint-name"},Lt={class:"marketplace-settings__mint-name"},Nt={class:"marketplace-settings__mint-error"},Rt={class:"marketplace-settings__mint-name"},Dt={class:"marketplace-settings__mint-address"},jt={class:"marketplace-settings__mint-meta"},Ht={key:0},Ot={key:1,class:"marketplace-settings__traits-hint"},Wt={key:1,class:"marketplace-settings__empty"},qt={class:"marketplace-settings__add-mint"},zt={key:0,class:"marketplace-settings__mint-list"},Gt={class:"marketplace-settings__mint-row marketplace-settings__mint-row--plain"},Kt={class:"marketplace-settings__mint-thumb"},Jt=["src","alt"],Yt={key:1,class:"marketplace-settings__mint-thumb-placeholder"},Zt={class:"marketplace-settings__mint-detail"},Qt={class:"marketplace-settings__mint-name"},Xt={class:"marketplace-settings__mint-name"},es={class:"marketplace-settings__mint-error"},ts={class:"marketplace-settings__mint-name"},ss={class:"marketplace-settings__mint-address"},ns={class:"marketplace-settings__mint-meta"},ls={key:1,class:"marketplace-settings__empty"},as={class:"marketplace-settings__base-toggles"},os=["checked","onChange"],is={class:"marketplace-settings__custom"},rs={class:"marketplace-settings__add-mint"},ds={key:0,class:"marketplace-settings__mint-list"},ms={class:"marketplace-settings__mint-row marketplace-settings__mint-row--plain"},cs={class:"marketplace-settings__mint-thumb"},us=["src","alt"],ps={key:1,class:"marketplace-settings__mint-thumb-placeholder"},gs={class:"marketplace-settings__mint-detail"},_s={class:"marketplace-settings__mint-name"},vs={class:"marketplace-settings__mint-name"},bs={class:"marketplace-settings__mint-error"},hs={class:"marketplace-settings__mint-name"},fs={class:"marketplace-settings__mint-address"},ys={class:"marketplace-settings__mint-meta"},ks={class:"marketplace-settings__fee-row"},Vs={class:"marketplace-settings__fee-row"},Ss={class:"marketplace-settings__actions"},Ms={key:0,class:"marketplace-settings__success"},ws={key:1,class:"marketplace-settings__error"},Fs=ne({__name:"AdminMarketplaceSettings",props:{slug:{},settings:{}},emits:["saved"],setup(m,{emit:_}){const p=[{mint:"So11111111111111111111111111111111111111112",name:"Wrapped SOL",symbol:"SOL"},{mint:"3NZ9JMVBmGAqocybic2c7LQCJScmgsAZ6vQqTDzcqmJh",name:"Wrapped Bitcoin (Portal)",symbol:"WBTC"},{mint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USD Coin",symbol:"USDC"},{mint:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",name:"Tether USD",symbol:"USDT"}],M={programId:"whi5uDPWK4rAE9Sus6hdxdHwsG1hjDBn6kXM6pyqwTn",account:""},s=m,T=_,F=he(),a=ue({collectionMints:[],splAssetMints:[],currencyMints:[],shopFee:{wallet:"",makerFlatFee:0,takerFlatFee:0,makerPercentFee:0,takerPercentFee:0},whitelist:{...M}}),k=A(()=>{const i=new Set(p.map(d=>d.mint));return a.currencyMints.filter(d=>!i.has(d.mint))}),w=A(()=>{const i=a.collectionMints.some(g=>g._loading),d=a.splAssetMints.some(g=>g._loading),n=k.value.some(g=>g._loading);return i||d||n}),$=A(()=>{const i=a.collectionMints.some(g=>g._error),d=a.splAssetMints.some(g=>g._error),n=k.value.some(g=>g._error);return i||d||n}),z=A(()=>!w.value&&!$.value),N=B(""),j=B(""),R=B(""),V=B(""),b=B(""),E=B(""),h=B(!1),c=B(null),e=B(!1),o=B(null),x=B(!1);function O(i){i._loading||i._error||(o.value=i,x.value=!0)}Y(()=>s.settings,i=>{if(!i)return;const d=i.collectionMints??[];a.collectionMints=d.map(C=>({mint:C.mint??"",name:C.name,image:C.image,sellerFeeBasisPoints:C.sellerFeeBasisPoints,groupPath:C.groupPath,collectionSize:C.collectionSize,uniqueTraitCount:C.uniqueTraitCount,traitTypes:C.traitTypes}));const n=i.splAssetMints??[];a.splAssetMints=n.map(C=>({mint:C.mint??"",name:C.name,symbol:C.symbol,image:C.image,decimals:C.decimals,sellerFeeBasisPoints:C.sellerFeeBasisPoints}));const g=i.currencyMints??[];a.currencyMints=g.length>0?g.map(C=>({...C,_loading:!1,_error:void 0})):[...p];const f=i.shopFee;f&&(a.shopFee.wallet=f.wallet??"",a.shopFee.makerFlatFee=Number(f.makerFlatFee)||0,a.shopFee.takerFlatFee=Number(f.takerFlatFee)||0,a.shopFee.makerPercentFee=Number(f.makerPercentFee)||0,a.shopFee.takerPercentFee=Number(f.takerPercentFee)||0);const H=i.whitelist??{};a.whitelist.programId=H.programId||M.programId,a.whitelist.account=H.account??"",be(()=>G())},{immediate:!0});async function G(){for(let i=0;i<a.collectionMints.length;i++){const d=a.collectionMints[i];if(!(d._loading||d._error||d.collectionSize!=null&&d.collectionSize>0))try{const n=await fetch(`${F.value}/api/v1/marketplace/asset-preview/collection/${encodeURIComponent(d.mint)}`);if(!n.ok)continue;const g=await n.json(),f=a.collectionMints[i];f&&f.mint===d.mint&&(f.collectionSize=g.collectionSize??0,f.uniqueTraitCount=g.uniqueTraitCount??0,f.traitTypes=g.traitTypes??[])}catch{}}}function oe(i,d){const n=p.find(g=>g.symbol===i);n&&(d?a.currencyMints.some(g=>g.mint===n.mint)||(a.currencyMints=[...a.currencyMints,n]):a.currencyMints=a.currencyMints.filter(g=>g.mint!==n.mint))}async function Q(){const i=N.value.trim();if(!i||i.length<32){j.value="Invalid mint address";return}if(a.collectionMints.some(g=>g.mint===i)){j.value="Collection already added";return}if(a.collectionMints.length>=250){j.value="Maximum 250 collections";return}j.value="";const d={mint:i,_loading:!0};a.collectionMints.push(d),N.value="";const n=a.collectionMints.length-1;try{const g=await fetch(`${F.value}/api/v1/marketplace/asset-preview/collection/${encodeURIComponent(i)}`);if(!g.ok){const H=await g.json().catch(()=>({}));throw new Error(H.message??`HTTP ${g.status}`)}const f=await g.json();a.collectionMints[n]={mint:i,name:f.name??void 0,image:f.image??void 0,collectionSize:f.collectionSize??0,uniqueTraitCount:f.uniqueTraitCount??0,traitTypes:f.traitTypes??[]}}catch(g){a.collectionMints[n]={...d,_loading:!1,_error:g instanceof Error?g.message:"Failed to load"}}}function se(i){a.collectionMints.splice(i,1)}async function J(){const i=R.value.trim();if(!i||i.length<32){V.value="Invalid mint address";return}if(a.splAssetMints.some(g=>g.mint===i)){V.value="Mint already added";return}if(a.splAssetMints.length>=250){V.value="Maximum 250 SPL assets";return}V.value="";const d={mint:i,_loading:!0};a.splAssetMints.push(d),R.value="";const n=a.splAssetMints.length-1;try{const g=await fetch(`${F.value}/api/v1/marketplace/asset-preview/spl/${encodeURIComponent(i)}`);if(!g.ok){const H=await g.json().catch(()=>({}));throw new Error(H.message??`HTTP ${g.status}`)}const f=await g.json();a.splAssetMints[n]={mint:i,name:f.name??void 0,symbol:f.symbol??void 0,image:f.image??void 0,decimals:f.decimals??void 0,sellerFeeBasisPoints:f.sellerFeeBasisPoints??void 0}}catch(g){a.splAssetMints[n]={...d,_loading:!1,_error:g instanceof Error?g.message:"Failed to load"}}}function ie(i){a.splAssetMints.splice(i,1)}async function ge(){const i=b.value.trim();if(!i||i.length<32){E.value="Invalid mint address";return}if(new Set(p.map(f=>f.mint)).has(i)){E.value="Already in base currencies";return}if(a.currencyMints.some(f=>f.mint===i)){E.value="Currency already added";return}E.value="";const n={mint:i,name:"",symbol:"",_loading:!0};a.currencyMints.push(n),b.value="";const g=a.currencyMints.length-1;try{const f=await fetch(`${F.value}/api/v1/marketplace/asset-preview/spl/${encodeURIComponent(i)}`);if(!f.ok){const C=await f.json().catch(()=>({}));throw new Error(C.message??C.error??`HTTP ${f.status}`)}const H=await f.json();a.currencyMints[g]={mint:i,name:H.name??"",symbol:H.symbol??"",image:H.image??void 0,decimals:H.decimals??void 0,sellerFeeBasisPoints:H.sellerFeeBasisPoints??void 0}}catch(f){a.currencyMints[g]={...n,_loading:!1,_error:f instanceof Error?f.message:"Failed to load"}}}function fe(i){const d=new Set(p.map(f=>f.mint)),g=a.currencyMints.filter(f=>!d.has(f.mint))[i];if(g){const f=a.currencyMints.indexOf(g);f>=0&&a.currencyMints.splice(f,1)}}function ye(){return{collectionMints:a.collectionMints.filter(i=>!i._error).map(i=>({mint:i.mint,name:i.name,image:i.image,sellerFeeBasisPoints:i.sellerFeeBasisPoints,groupPath:i.groupPath,collectionSize:i.collectionSize,uniqueTraitCount:i.uniqueTraitCount,traitTypes:i.traitTypes})),splAssetMints:a.splAssetMints.filter(i=>!i._error).map(i=>({mint:i.mint,name:i.name,symbol:i.symbol,decimals:i.decimals,image:i.image,sellerFeeBasisPoints:i.sellerFeeBasisPoints})),currencyMints:a.currencyMints.filter(i=>!("_error"in i&&i._error)).map(i=>({mint:i.mint,name:i.name??"",symbol:i.symbol??"",decimals:i.decimals,image:i.image,sellerFeeBasisPoints:i.sellerFeeBasisPoints})),shopFee:a.shopFee,whitelist:a.whitelist}}async function ke(){if(!(!s.slug||!z.value)){h.value=!0,c.value=null,e.value=!1;try{const i=await fetch(`${F.value}/api/v1/tenant/${s.slug}/marketplace-settings`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ye())});if(!i.ok){let g=(await i.json().catch(()=>({}))).error??"Failed to save";throw i.status===401&&(g="Sign in with your wallet to save. Session may have expired."),i.status===403&&(g="Admin access required."),new Error(g)}const d=await i.json();e.value=!0,setTimeout(()=>{e.value=!1},3e3),T("saved",d.settings??{})}catch(i){c.value=i instanceof Error?i.message:"Failed to save"}finally{h.value=!1}}}return(i,d)=>(u(),v("div",Tt,[r(l(ee),null,{default:P(()=>[d[13]||(d[13]=t("h3",null,"NFT collections",-1)),d[14]||(d[14]=t("p",{class:"marketplace-settings__hint"},"Collection mint addresses. Each collection is expanded via DAS into individual NFTs.",-1)),t("div",xt,[r(l(S),{modelValue:N.value,"onUpdate:modelValue":d[0]||(d[0]=n=>N.value=n),placeholder:"Collection mint (e.g. CL2m6...)",error:j.value,onKeydown:re(le(Q,["prevent"]),["enter"])},null,8,["modelValue","error","onKeydown"]),r(l(K),{variant:"secondary",disabled:!N.value.trim()||h.value,onClick:Q},{default:P(()=>[...d[11]||(d[11]=[X(" Add ",-1)])]),_:1},8,["disabled"])]),a.collectionMints.length?(u(),v("ul",Bt,[(u(!0),v(U,null,Z(a.collectionMints,(n,g)=>(u(),v("li",{key:n.mint,class:"marketplace-settings__mint-item marketplace-settings__mint-item--clickable"},[t("button",{type:"button",class:"marketplace-settings__mint-row",disabled:!!n._loading||!!n._error,onClick:f=>O(n)},[t("div",Pt,[n.image?(u(),v("img",{key:0,src:n.image,alt:n.name??n.mint},null,8,At)):(u(),v("span",Ut,[r(l(I),{icon:"mdi:image-off"})]))]),t("div",It,[n._loading?(u(),v(U,{key:0},[r(l(I),{icon:"mdi:loading",class:"marketplace-settings__spinner"}),t("span",Et,y(n.mint.slice(0,8)+"..."+n.mint.slice(-4)),1),d[12]||(d[12]=t("span",{class:"marketplace-settings__mint-status"},"Loading...",-1))],64)):n._error?(u(),v(U,{key:1},[t("span",Lt,y(n.mint.slice(0,8)+"..."),1),t("span",Nt,y(n._error),1)],64)):(u(),v(U,{key:2},[t("span",Rt,y(n.name||n.mint.slice(0,8)+"..."),1),t("code",Dt,y(n.mint.slice(0,8))+"..."+y(n.mint.slice(-6)),1),t("span",jt,[X(y(n.collectionSize??0)+" NFTs, "+y(n.uniqueTraitCount??0)+" trait types ",1),n.sellerFeeBasisPoints!=null?(u(),v("span",Ht," · "+y(n.sellerFeeBasisPoints)+" bps",1)):L("",!0),(n.traitTypes?.length??0)>0?(u(),v("span",Ot," ("+y(n.traitTypes.slice(0,3).join(", "))+y((n.traitTypes.length??0)>3?"...":"")+") ",1)):L("",!0)])],64))])],8,Ct),r(l(K),{variant:"ghost",disabled:!!n._loading,onClick:le(f=>se(g),["stop"])},{default:P(()=>[r(l(I),{icon:"mdi:close"})]),_:1},8,["disabled","onClick"])]))),128))])):(u(),v("p",Wt,"No NFT collections. Add a collection mint above."))]),_:1}),r(l(ee),null,{default:P(()=>[d[17]||(d[17]=t("h3",null,"SPL assets",-1)),d[18]||(d[18]=t("p",{class:"marketplace-settings__hint"},"Individual SPL token mints (one mint = one asset).",-1)),t("div",qt,[r(l(S),{modelValue:R.value,"onUpdate:modelValue":d[1]||(d[1]=n=>R.value=n),placeholder:"Mint address",error:V.value,onKeydown:re(le(J,["prevent"]),["enter"])},null,8,["modelValue","error","onKeydown"]),r(l(K),{variant:"secondary",disabled:!R.value.trim()||h.value,onClick:J},{default:P(()=>[...d[15]||(d[15]=[X(" Add ",-1)])]),_:1},8,["disabled"])]),a.splAssetMints.length?(u(),v("ul",zt,[(u(!0),v(U,null,Z(a.splAssetMints,(n,g)=>(u(),v("li",{key:n.mint,class:"marketplace-settings__mint-item"},[t("div",Gt,[t("div",Kt,[n.image?(u(),v("img",{key:0,src:n.image,alt:n.name??n.symbol??n.mint},null,8,Jt)):(u(),v("span",Yt,[r(l(I),{icon:"mdi:token"})]))]),t("div",Zt,[n._loading?(u(),v(U,{key:0},[r(l(I),{icon:"mdi:loading",class:"marketplace-settings__spinner"}),t("span",Qt,y(n.mint.slice(0,8)+"..."+n.mint.slice(-4)),1),d[16]||(d[16]=t("span",{class:"marketplace-settings__mint-status"},"Loading...",-1))],64)):n._error?(u(),v(U,{key:1},[t("span",Xt,y(n.mint.slice(0,8)+"..."+n.mint.slice(-4)),1),t("span",es,y(n._error),1)],64)):(u(),v(U,{key:2},[t("span",ts,y(n.symbol||n.name||n.mint.slice(0,8)+"..."),1),t("code",ss,y(n.mint.slice(0,8))+"..."+y(n.mint.slice(-6)),1),t("span",ns,y(n.name||"")+" "+y(n.decimals!=null?`· ${n.decimals} dec`:"")+" "+y(n.sellerFeeBasisPoints!=null?`· ${n.sellerFeeBasisPoints} bps`:""),1)],64))])]),r(l(K),{variant:"ghost",disabled:!!n._loading,onClick:f=>ie(g)},{default:P(()=>[r(l(I),{icon:"mdi:close"})]),_:1},8,["disabled","onClick"])]))),128))])):(u(),v("p",ls,"No SPL assets. Add a mint above."))]),_:1}),r(l(ee),null,{default:P(()=>[d[22]||(d[22]=t("h3",null,"Currencies",-1)),d[23]||(d[23]=t("p",{class:"marketplace-settings__hint"},"Base: SOL, WBTC, USDC, USDT. Add custom by mint.",-1)),t("div",as,[(u(),v(U,null,Z(p,n=>t("label",{key:n.symbol,class:"marketplace-settings__checkbox"},[t("input",{checked:a.currencyMints.some(g=>g.mint===n.mint),type:"checkbox",onChange:g=>oe(n.symbol,g.target.checked)},null,40,os),t("span",null,y(n.symbol),1)])),64))]),t("div",is,[d[21]||(d[21]=t("p",{class:"marketplace-settings__hint"},"Custom currencies",-1)),t("div",rs,[r(l(S),{modelValue:b.value,"onUpdate:modelValue":d[2]||(d[2]=n=>b.value=n),placeholder:"Mint address",error:E.value,onKeydown:re(le(ge,["prevent"]),["enter"])},null,8,["modelValue","error","onKeydown"]),r(l(K),{variant:"secondary",disabled:!b.value.trim()||h.value,onClick:ge},{default:P(()=>[...d[19]||(d[19]=[X(" Add ",-1)])]),_:1},8,["disabled"])]),k.value.length?(u(),v("ul",ds,[(u(!0),v(U,null,Z(k.value,(n,g)=>(u(),v("li",{key:n.mint,class:"marketplace-settings__mint-item"},[t("div",ms,[t("div",cs,[n.image?(u(),v("img",{key:0,src:n.image,alt:n.name??n.symbol??n.mint},null,8,us)):(u(),v("span",ps,[r(l(I),{icon:"mdi:cash-multiple"})]))]),t("div",gs,[n._loading?(u(),v(U,{key:0},[r(l(I),{icon:"mdi:loading",class:"marketplace-settings__spinner"}),t("span",_s,y(n.mint.slice(0,8)+"..."+n.mint.slice(-4)),1),d[20]||(d[20]=t("span",{class:"marketplace-settings__mint-status"},"Loading...",-1))],64)):n._error?(u(),v(U,{key:1},[t("span",vs,y(n.mint.slice(0,8)+"..."+n.mint.slice(-4)),1),t("span",bs,y(n._error),1)],64)):(u(),v(U,{key:2},[t("span",hs,y(n.symbol||n.name||n.mint.slice(0,8)+"..."),1),t("code",fs,y(n.mint.slice(0,8))+"..."+y(n.mint.slice(-6)),1),t("span",ys,y(n.name||"")+" "+y(n.decimals!=null?`· ${n.decimals} dec`:"")+" "+y(n.sellerFeeBasisPoints!=null?`· ${n.sellerFeeBasisPoints} bps`:""),1)],64))])]),r(l(K),{variant:"ghost",disabled:!!n._loading,onClick:f=>fe(g)},{default:P(()=>[r(l(I),{icon:"mdi:close"})]),_:1},8,["disabled","onClick"])]))),128))])):L("",!0)])]),_:1}),r(l(ee),null,{default:P(()=>[d[24]||(d[24]=t("h3",null,"Fees",-1)),r(l(S),{modelValue:a.shopFee.wallet,"onUpdate:modelValue":d[3]||(d[3]=n=>a.shopFee.wallet=n),label:"Fee recipient wallet",placeholder:"Wallet address"},null,8,["modelValue"]),t("div",ks,[r(l(S),{modelValue:a.shopFee.makerFlatFee,"onUpdate:modelValue":d[4]||(d[4]=n=>a.shopFee.makerFlatFee=n),modelModifiers:{number:!0},type:"number",label:"Maker flat fee (SOL)",placeholder:"0"},null,8,["modelValue"]),r(l(S),{modelValue:a.shopFee.takerFlatFee,"onUpdate:modelValue":d[5]||(d[5]=n=>a.shopFee.takerFlatFee=n),modelModifiers:{number:!0},type:"number",label:"Taker flat fee (SOL)",placeholder:"0"},null,8,["modelValue"])]),t("div",Vs,[r(l(S),{modelValue:a.shopFee.makerPercentFee,"onUpdate:modelValue":d[6]||(d[6]=n=>a.shopFee.makerPercentFee=n),modelModifiers:{number:!0},type:"number",label:"Maker % (basis points)",placeholder:"0"},null,8,["modelValue"]),r(l(S),{modelValue:a.shopFee.takerPercentFee,"onUpdate:modelValue":d[7]||(d[7]=n=>a.shopFee.takerPercentFee=n),modelModifiers:{number:!0},type:"number",label:"Taker % (basis points)",placeholder:"0"},null,8,["modelValue"])])]),_:1}),r(l(ee),null,{default:P(()=>[d[25]||(d[25]=t("h3",null,"Whitelist",-1)),d[26]||(d[26]=t("p",{class:"marketplace-settings__hint"},"Escrow program uses these for whitelist-protected trades. Empty account = no whitelist.",-1)),r(l(S),{modelValue:a.whitelist.programId,"onUpdate:modelValue":d[8]||(d[8]=n=>a.whitelist.programId=n),label:"Whitelist program ID",placeholder:"whi5uDPWK4rAE9Sus6hdxdHwsG1hjDBn6kXM6pyqwTn"},null,8,["modelValue"]),r(l(S),{modelValue:a.whitelist.account,"onUpdate:modelValue":d[9]||(d[9]=n=>a.whitelist.account=n),label:"Whitelist account (optional)",placeholder:"Leave empty for public escrows"},null,8,["modelValue"])]),_:1}),t("div",Ss,[r(l(K),{variant:"primary",disabled:h.value||!z.value,onClick:ke},{default:P(()=>[X(y(h.value?"Saving...":e.value?"Saved":z.value?"Save Marketplace Settings":"Complete loading before saving"),1)]),_:1},8,["disabled"]),e.value?(u(),v("p",Ms,"Settings saved.")):c.value?(u(),v("p",ws,y(c.value),1)):L("",!0)]),r($t,{modelValue:x.value,"onUpdate:modelValue":d[10]||(d[10]=n=>x.value=n),collection:o.value,slug:m.slug},null,8,["modelValue","collection","slug"])]))}}),$s=Object.assign(te(Fs,[["__scopeId","data-v-faad5db4"]]),{__name:"AdminMarketplaceSettings"}),Ts={class:"onboarding"},xs={class:"onboarding__benefits"},Bs={class:"onboarding__benefit"},Cs={class:"onboarding__benefit"},Ps={class:"onboarding__benefit"},As={class:"onboarding__benefit"},Us={class:"onboarding__benefit"},Is={class:"onboarding__actions"},Es=ne({__name:"AdminMarketplaceOnboardingModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(m){return(_,p)=>(u(),ce(l(je),{"model-value":m.modelValue,title:"Your Marketplace. Your Brand. Your Rules.","onUpdate:modelValue":p[1]||(p[1]=M=>_.$emit("update:modelValue",M))},{default:P(()=>[t("div",Ts,[p[8]||(p[8]=t("p",{class:"onboarding__intro"}," Launch a fully branded Solana marketplace. Set your fees, choose your currencies, and start earning from every trade. ",-1)),t("div",xs,[t("div",Bs,[r(l(I),{icon:"mdi:shield-lock-outline",class:"onboarding__icon"}),p[2]||(p[2]=t("span",null,"Self-custody: users keep control of their assets",-1))]),t("div",Cs,[r(l(I),{icon:"mdi:palette",class:"onboarding__icon"}),p[3]||(p[3]=t("span",null,"Full branding: your storefront, your look",-1))]),t("div",Ps,[r(l(I),{icon:"mdi:wallet",class:"onboarding__icon"}),p[4]||(p[4]=t("span",null,"Multi-currency: SOL, USDC, custom tokens",-1))]),t("div",As,[r(l(I),{icon:"mdi:currency-usd",class:"onboarding__icon"}),p[5]||(p[5]=t("span",null,"Set your fees: monetize every transaction",-1))]),t("div",Us,[r(l(I),{icon:"mdi:shield-check",class:"onboarding__icon"}),p[6]||(p[6]=t("span",null,"Royalties protected",-1))])]),p[9]||(p[9]=t("p",{class:"onboarding__bullets"}," Trade NFTs and tokens, up to 250 mints per collection. Configure custom fees and standard or custom currencies. ",-1)),t("div",Is,[r(l(K),{variant:"primary",onClick:p[0]||(p[0]=M=>_.$emit("update:modelValue",!1))},{default:P(()=>[...p[7]||(p[7]=[X(" Got it ",-1)])]),_:1})])])]),_:1},8,["model-value"]))}}),Ls=Object.assign(te(Es,[["__scopeId","data-v-932ad3e4"]]),{__name:"AdminMarketplaceOnboardingModal"});function ae(m){const _=String(m).trim().replace(/^#/,"");return _.length===6&&/^[0-9a-fA-F]{6}$/.test(_)?{r:parseInt(_.slice(0,2),16),g:parseInt(_.slice(2,4),16),b:parseInt(_.slice(4,6),16)}:_.length===3&&/^[0-9a-fA-F]{3}$/.test(_)?{r:parseInt(_[0]+_[0],16),g:parseInt(_[1]+_[1],16),b:parseInt(_[2]+_[2],16)}:null}function pe(m,_,p){const M=s=>Math.round(Math.max(0,Math.min(255,s)));return"#"+[m,_,p].map(M).map(s=>s.toString(16).padStart(2,"0")).join("")}function W(m,_){const p=ae(m);if(!p)return m;const{r:M,g:s,b:T}=p,F=255;return pe(M+(F-M)*_,s+(F-s)*_,T+(F-T)*_)}function q(m,_){const p=ae(m);if(!p)return m;const{r:M,g:s,b:T}=p;return pe(M*(1-_),s*(1-_),T*(1-_))}function Ns(m,_,p){const M=ae(m),s=ae(_);return!M||!s?_:pe(M.r+(s.r-M.r)*p,M.g+(s.g-M.g)*p,M.b+(s.b-M.b)*p)}const me=[{sm:"0",md:"0",lg:"0",xl:"0",full:"0"},{sm:"0.2rem",md:"0.3rem",lg:"0.4rem",xl:"0.5rem",full:"9999px"},{sm:"0.375rem",md:"0.5rem",lg:"0.75rem",xl:"1rem",full:"9999px"},{sm:"0.5rem",md:"0.75rem",lg:"1rem",xl:"1.25rem",full:"9999px"},{sm:"0.75rem",md:"1rem",lg:"1.25rem",xl:"1.5rem",full:"9999px"}];function Rs(m){const _=m.borderRadius?.md??"";for(let p=0;p<me.length;p++)if(me[p].md===_)return p;return 2}function de(m){const _=String(m).trim(),p=_.match(/^([\d.]+)\s*rem$/);if(p)return Number(p[1]);const M=parseFloat(_);return Number.isFinite(M)?M:1}const Ds={class:"theme-settings"},js={class:"theme-settings__form"},Hs={class:"theme-settings__section"},Os={class:"theme-settings__section",open:""},Ws={class:"theme-settings__grid theme-settings__grid--two"},qs={class:"theme-settings__group"},zs={class:"theme-settings__group"},Gs={class:"theme-settings__group"},Ks={class:"theme-settings__group"},Js={class:"theme-settings__section"},Ys={class:"theme-settings__group"},Zs={class:"theme-settings__typography-row"},Qs={class:"theme-settings__section"},Xs={class:"theme-settings__slider-row"},en={class:"theme-settings__slider-value"},tn={class:"theme-settings__section"},sn={class:"theme-settings__grid theme-settings__grid--small"},nn={class:"theme-settings__grid theme-settings__grid--small"},ln=ne({__name:"AdminThemeSettings",props:{branding:{}},setup(m){const _=m,p=`radius-slider-${Math.random().toString(36).slice(2)}`,M=["None","Slight","Medium","Rounded","Full"],s=ue({primary:"",secondary:"",accent:"",backgroundPage:"",textPrimary:"",textMuted:"",border:"",statusSuccess:"",statusError:"",statusWarning:"",statusInfo:"",tradeBuy:"",tradeSell:"",tradeTrade:""}),T=B("0.875"),F=B("1"),a=B("1.25"),k=B(2);function w(c){return/^#?[0-9a-fA-F]{3}$/.test(c.trim())||/^#?[0-9a-fA-F]{6}$/.test(c.trim())}function $(c){const e=String(c).trim().replace(/^#/,"");return e.length===3?"#"+e.split("").map(o=>o+o).join(""):e.length===6?"#"+e:c}function z(){const c=_.branding.theme,e=c.colors??{};s.primary=e.primary?.main??"",s.secondary=e.secondary?.main??"",s.accent=e.accent?.main??"",s.backgroundPage=e.background?.primary??"",s.textPrimary=e.text?.primary??"",s.textMuted=e.text?.muted??"",s.border=e.border?.default??"",s.statusSuccess=e.status?.success??"",s.statusError=e.status?.error??"",s.statusWarning=e.status?.warning??"",s.statusInfo=e.status?.info??"",s.tradeBuy=e.trade?.buy??"",s.tradeSell=e.trade?.sell??"",s.tradeTrade=e.trade?.trade??"";const o=c.fontSize??{};T.value=String(de(o.sm??"0.875rem")),F.value=String(de(o.base??"1rem")),a.value=String(de(o.lg??"1.125rem")),k.value=Rs(c)}function N(){const c=_.branding.theme.colors??{},e=s.backgroundPage&&w(s.backgroundPage)?$(s.backgroundPage):c.background?.primary??"#1a1a2e",o=s.border&&w(s.border)?$(s.border):q(e,.12),x=W(o,.1),O=s.textPrimary&&w(s.textPrimary)?$(s.textPrimary):c.text?.primary??"#ffffff",G=s.textMuted&&w(s.textMuted)?$(s.textMuted):c.text?.muted??"#6b6b80",oe=Ns(O,G,.5),Q=s.primary&&w(s.primary)?$(s.primary):c.primary?.main??"#00951a",se=s.secondary&&w(s.secondary)?$(s.secondary):c.secondary?.main??"#cf0000",J=s.accent&&w(s.accent)?$(s.accent):c.accent?.main??"#8b5cf6",ie={primary:{main:Q,hover:q(Q,.08),light:W(Q,.2),dark:q(Q,.15)},secondary:{main:se,hover:q(se,.08),light:W(se,.2),dark:q(se,.15)},accent:{main:J,hover:q(J,.1)},background:{primary:e,secondary:W(e,.03),card:W(e,.05)},text:{primary:O,secondary:oe,muted:G},border:{default:o,light:x},status:{success:s.statusSuccess&&w(s.statusSuccess)?$(s.statusSuccess):c.status?.success??"#00951a",error:s.statusError&&w(s.statusError)?$(s.statusError):c.status?.error??"#cf0000",warning:s.statusWarning&&w(s.statusWarning)?$(s.statusWarning):c.status?.warning??"#ff6b35",info:s.statusInfo&&w(s.statusInfo)?$(s.statusInfo):c.status?.info??"#00d4ff"},trade:{buy:s.tradeBuy&&w(s.tradeBuy)?$(s.tradeBuy):c.trade?.buy??"#00ff00",buyHover:s.tradeBuy&&w(s.tradeBuy)?q($(s.tradeBuy),.1):c.trade?.buyHover??"#00cc00",buyLight:s.tradeBuy&&w(s.tradeBuy)?W($(s.tradeBuy),.15):c.trade?.buyLight??"#33ff33",sell:s.tradeSell&&w(s.tradeSell)?$(s.tradeSell):c.trade?.sell??"#ff0000",sellHover:s.tradeSell&&w(s.tradeSell)?q($(s.tradeSell),.1):c.trade?.sellHover??"#cc0000",sellLight:s.tradeSell&&w(s.tradeSell)?W($(s.tradeSell),.15):c.trade?.sellLight??"#ff3333",trade:s.tradeTrade&&w(s.tradeTrade)?$(s.tradeTrade):c.trade?.trade??"#ffaa00",tradeHover:s.tradeTrade&&w(s.tradeTrade)?q($(s.tradeTrade),.1):c.trade?.tradeHover??"#cc8800",tradeLight:s.tradeTrade&&w(s.tradeTrade)?W($(s.tradeTrade),.15):c.trade?.tradeLight??"#ffbb33",swap:J,swapHover:q(J,.1),swapLight:W(J,.2)},window:{background:W(e,.05),border:o,header:W(e,.03)}};_.branding.theme.colors=ie}function j(){const c=parseFloat(T.value)||.875,e=parseFloat(F.value)||1,o=parseFloat(a.value)||1.25,x=O=>`${O}rem`;_.branding.theme.fontSize={xs:x(c*.9),sm:x(c),base:x(e),lg:x(o),xl:x(o*1.1),"2xl":x(o*1.25),"3xl":x(o*1.5),"4xl":x(o*1.75),"5xl":x(o*2)}}function R(){const c=me[Math.max(0,Math.min(4,k.value))];_.branding.theme.borderRadius={sm:c.sm,md:c.md,lg:c.lg,xl:c.xl,full:c.full}}let V=!1;Y(()=>_.branding,async()=>{V=!0,z(),await be(),V=!1},{immediate:!0}),Y(()=>({...s}),()=>{V||N()},{deep:!0}),Y([T,F,a],()=>{V||j()},{immediate:!0}),Y(k,()=>{V||R()},{immediate:!0});const b=A({get:()=>(_.branding.theme.fonts?.primary??[]).join(", "),set:c=>{_.branding.theme.fonts=_.branding.theme.fonts??{primary:[],mono:[]},_.branding.theme.fonts.primary=c.split(",").map(e=>e.trim()).filter(Boolean)}}),E=A({get:()=>(_.branding.theme.fonts?.mono??[]).join(", "),set:c=>{_.branding.theme.fonts=_.branding.theme.fonts??{primary:[],mono:[]},_.branding.theme.fonts.mono=c.split(",").map(e=>e.trim()).filter(Boolean)}}),h=A(()=>{const c=Te(_.branding.theme),e={};for(const[o,x]of Object.entries(c))x&&(e[o]=x);return e});return(c,e)=>(u(),v("div",Ds,[t("div",js,[t("section",Hs,[e[36]||(e[36]=t("h3",{class:"theme-settings__heading"},"Branding",-1)),r(l(S),{modelValue:m.branding.logo,"onUpdate:modelValue":e[0]||(e[0]=o=>m.branding.logo=o),label:"Logo URL",placeholder:"https://..."},null,8,["modelValue"])]),t("details",Os,[e[41]||(e[41]=t("summary",{class:"theme-settings__heading"},"Colors",-1)),e[42]||(e[42]=t("p",{class:"theme-settings__hint"},"Set main colours; hover and variants are derived.",-1)),t("div",Ws,[t("div",qs,[e[37]||(e[37]=t("h4",{class:"theme-settings__sub"},"Brand",-1)),r(l(D),{modelValue:s.primary,"onUpdate:modelValue":e[1]||(e[1]=o=>s.primary=o),label:"Primary (buttons, links)"},null,8,["modelValue"]),r(l(D),{modelValue:s.secondary,"onUpdate:modelValue":e[2]||(e[2]=o=>s.secondary=o),label:"Secondary"},null,8,["modelValue"]),r(l(D),{modelValue:s.accent,"onUpdate:modelValue":e[3]||(e[3]=o=>s.accent=o),label:"Accent"},null,8,["modelValue"])]),t("div",zs,[e[38]||(e[38]=t("h4",{class:"theme-settings__sub"},"Surfaces & text",-1)),r(l(D),{modelValue:s.backgroundPage,"onUpdate:modelValue":e[4]||(e[4]=o=>s.backgroundPage=o),label:"Background (page)"},null,8,["modelValue"]),r(l(D),{modelValue:s.textPrimary,"onUpdate:modelValue":e[5]||(e[5]=o=>s.textPrimary=o),label:"Text"},null,8,["modelValue"]),r(l(D),{modelValue:s.textMuted,"onUpdate:modelValue":e[6]||(e[6]=o=>s.textMuted=o),label:"Text muted"},null,8,["modelValue"]),r(l(D),{modelValue:s.border,"onUpdate:modelValue":e[7]||(e[7]=o=>s.border=o),label:"Border (leave empty to derive)"},null,8,["modelValue"])]),t("div",Gs,[e[39]||(e[39]=t("h4",{class:"theme-settings__sub"},"Status",-1)),r(l(D),{modelValue:s.statusSuccess,"onUpdate:modelValue":e[8]||(e[8]=o=>s.statusSuccess=o),label:"Success"},null,8,["modelValue"]),r(l(D),{modelValue:s.statusError,"onUpdate:modelValue":e[9]||(e[9]=o=>s.statusError=o),label:"Error"},null,8,["modelValue"]),r(l(D),{modelValue:s.statusWarning,"onUpdate:modelValue":e[10]||(e[10]=o=>s.statusWarning=o),label:"Warning"},null,8,["modelValue"]),r(l(D),{modelValue:s.statusInfo,"onUpdate:modelValue":e[11]||(e[11]=o=>s.statusInfo=o),label:"Info"},null,8,["modelValue"])]),t("div",Ks,[e[40]||(e[40]=t("h4",{class:"theme-settings__sub"},"Trade (market)",-1)),r(l(D),{modelValue:s.tradeBuy,"onUpdate:modelValue":e[12]||(e[12]=o=>s.tradeBuy=o),label:"Buy"},null,8,["modelValue"]),r(l(D),{modelValue:s.tradeSell,"onUpdate:modelValue":e[13]||(e[13]=o=>s.tradeSell=o),label:"Sell"},null,8,["modelValue"]),r(l(D),{modelValue:s.tradeTrade,"onUpdate:modelValue":e[14]||(e[14]=o=>s.tradeTrade=o),label:"Trade"},null,8,["modelValue"])])])]),t("details",Js,[e[43]||(e[43]=t("summary",{class:"theme-settings__heading"},"Typography",-1)),e[44]||(e[44]=t("p",{class:"theme-settings__hint"},"Three sizes control the scale: small (labels, captions), body (main text), heading (titles).",-1)),t("div",Ys,[r(l(S),{modelValue:b.value,"onUpdate:modelValue":e[15]||(e[15]=o=>b.value=o),label:"Font family (primary)",placeholder:"Inter, sans-serif"},null,8,["modelValue"]),r(l(S),{modelValue:E.value,"onUpdate:modelValue":e[16]||(e[16]=o=>E.value=o),label:"Font family (mono)",placeholder:"JetBrains Mono, monospace"},null,8,["modelValue"])]),t("div",Zs,[r(l(S),{modelValue:T.value,"onUpdate:modelValue":e[17]||(e[17]=o=>T.value=o),label:"Small (rem)",placeholder:"0.875"},null,8,["modelValue"]),r(l(S),{modelValue:F.value,"onUpdate:modelValue":e[18]||(e[18]=o=>F.value=o),label:"Body (rem)",placeholder:"1"},null,8,["modelValue"]),r(l(S),{modelValue:a.value,"onUpdate:modelValue":e[19]||(e[19]=o=>a.value=o),label:"Heading (rem)",placeholder:"1.25"},null,8,["modelValue"])])]),t("details",Qs,[e[46]||(e[46]=t("summary",{class:"theme-settings__heading"},"Rounding",-1)),e[47]||(e[47]=t("p",{class:"theme-settings__hint"},"One slider sets corner radius for the whole theme.",-1)),t("div",Xs,[t("label",{class:"theme-settings__slider-label",for:p},"Sharp"),Me(t("input",{id:p,"onUpdate:modelValue":e[20]||(e[20]=o=>k.value=o),type:"range",min:"0",max:"4",step:"1",class:"theme-settings__slider"},null,512),[[we,k.value,void 0,{number:!0}]]),e[45]||(e[45]=t("label",{class:"theme-settings__slider-label"},"Round",-1))]),t("p",en,y(M[k.value]),1)]),t("details",tn,[e[48]||(e[48]=t("summary",{class:"theme-settings__heading"},"Spacing & effects",-1)),t("div",sn,[r(l(S),{modelValue:m.branding.theme.spacing.xs,"onUpdate:modelValue":e[21]||(e[21]=o=>m.branding.theme.spacing.xs=o),label:"Space xs"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.spacing.sm,"onUpdate:modelValue":e[22]||(e[22]=o=>m.branding.theme.spacing.sm=o),label:"Space sm"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.spacing.md,"onUpdate:modelValue":e[23]||(e[23]=o=>m.branding.theme.spacing.md=o),label:"Space md"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.spacing.lg,"onUpdate:modelValue":e[24]||(e[24]=o=>m.branding.theme.spacing.lg=o),label:"Space lg"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.spacing.xl,"onUpdate:modelValue":e[25]||(e[25]=o=>m.branding.theme.spacing.xl=o),label:"Space xl"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.spacing["2xl"],"onUpdate:modelValue":e[26]||(e[26]=o=>m.branding.theme.spacing["2xl"]=o),label:"Space 2xl"},null,8,["modelValue"])]),t("div",nn,[r(l(S),{modelValue:m.branding.theme.borderWidth.thin,"onUpdate:modelValue":e[27]||(e[27]=o=>m.branding.theme.borderWidth.thin=o),label:"Border thin"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.borderWidth.medium,"onUpdate:modelValue":e[28]||(e[28]=o=>m.branding.theme.borderWidth.medium=o),label:"Border medium"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.borderWidth.thick,"onUpdate:modelValue":e[29]||(e[29]=o=>m.branding.theme.borderWidth.thick=o),label:"Border thick"},null,8,["modelValue"])]),r(l(S),{modelValue:m.branding.theme.shadows.glow,"onUpdate:modelValue":e[30]||(e[30]=o=>m.branding.theme.shadows.glow=o),label:"Shadow glow",placeholder:"0 0 20px rgba(...)"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.shadows.glowHover,"onUpdate:modelValue":e[31]||(e[31]=o=>m.branding.theme.shadows.glowHover=o),label:"Shadow glow hover"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.shadows.card,"onUpdate:modelValue":e[32]||(e[32]=o=>m.branding.theme.shadows.card=o),label:"Shadow card"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.gradients.primary,"onUpdate:modelValue":e[33]||(e[33]=o=>m.branding.theme.gradients.primary=o),label:"Gradient primary",placeholder:"linear-gradient(...)"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.gradients.secondary,"onUpdate:modelValue":e[34]||(e[34]=o=>m.branding.theme.gradients.secondary=o),label:"Gradient secondary"},null,8,["modelValue"]),r(l(S),{modelValue:m.branding.theme.gradients.accent,"onUpdate:modelValue":e[35]||(e[35]=o=>m.branding.theme.gradients.accent=o),label:"Gradient accent"},null,8,["modelValue"])])]),t("aside",{class:"theme-settings__preview",style:$e(h.value)},[...e[49]||(e[49]=[Fe('<p class="theme-settings__preview-label" data-v-cd24e24f>Preview</p><div class="theme-settings__preview-content" data-v-cd24e24f><div class="theme-settings__preview-buttons" data-v-cd24e24f><button type="button" class="theme-settings__btn theme-settings__btn--primary" data-v-cd24e24f> Primary </button><button type="button" class="theme-settings__btn theme-settings__btn--secondary" data-v-cd24e24f> Secondary </button></div><div class="theme-settings__preview-card" data-v-cd24e24f><p class="theme-settings__preview-title" data-v-cd24e24f>Card title</p><p class="theme-settings__preview-body" data-v-cd24e24f>Body text and secondary text.</p><p class="theme-settings__preview-muted" data-v-cd24e24f>Muted caption</p></div><div class="theme-settings__preview-status" data-v-cd24e24f><span class="theme-settings__pill theme-settings__pill--success" data-v-cd24e24f>Success</span><span class="theme-settings__pill theme-settings__pill--error" data-v-cd24e24f>Error</span><span class="theme-settings__pill theme-settings__pill--warning" data-v-cd24e24f>Warning</span><span class="theme-settings__pill theme-settings__pill--info" data-v-cd24e24f>Info</span></div><div class="theme-settings__preview-trade" data-v-cd24e24f><span class="theme-settings__chip theme-settings__chip--buy" data-v-cd24e24f>Buy</span><span class="theme-settings__chip theme-settings__chip--sell" data-v-cd24e24f>Sell</span><span class="theme-settings__chip theme-settings__chip--trade" data-v-cd24e24f>Trade</span></div></div>',2)])],4)]))}}),an=Object.assign(te(ln,[["__scopeId","data-v-cd24e24f"]]),{__name:"AdminThemeSettings"}),on={class:"admin"},rn={key:0,class:"admin__panel"},dn={key:1,class:"admin__panel"},mn={key:2,class:"admin__panel"},cn={key:3,class:"admin__panel"},un={class:"admin__actions"},pn={key:0,class:"admin__error"},gn=ne({__name:"admin",setup(m){const _=xe(),p=Be(),M=he(),s=A(()=>p.tenant),T=A(()=>p.slug),F=A(()=>Object.keys(_e)),a=new Set(Re.admin?.map(h=>h.id)??["general","modules","theming","marketplace"]),k=B(!1),w=A(()=>{const h=p.marketplaceSettings;return h?{collectionMints:h.collectionMints,splAssetMints:h.splAssetMints??[],currencyMints:h.currencyMints,whitelist:h.whitelist,shopFee:h.shopFee}:null});function $(h,c){h==="marketplace"&&c&&(k.value=!0),b.modulesById[h]=c}function z(h){const c=h;p.setMarketplaceSettings(c?{collectionMints:c.collectionMints??[],splAssetMints:c.splAssetMints??[],currencyMints:c.currencyMints??[],whitelist:c.whitelist,shopFee:c.shopFee??{wallet:"",makerFlatFee:0,takerFlatFee:0,makerPercentFee:0,takerPercentFee:0}}:null)}const N=A(()=>{const h=_.query.tab;return typeof h=="string"&&a.has(h)?h:"general"});Ce(()=>{const h=_.query.tab;(typeof h!="string"||!a.has(h))&&Pe({path:_.path,query:{..._.query,tab:"general"},replace:!0})});const j=B(!1),R=B(null);function V(h){const c=Ue(Ee,h?.branding?.theme??{});return{logo:h?.branding?.logo??"",theme:c}}const b=ue({name:"",description:"",branding:V(null),modulesById:{}});Y(s,h=>{if(!h){b.modulesById=Object.fromEntries(F.value.map(e=>[e,!1])),b.branding=V(null);return}b.name=h.name??"",b.description=h.description??"",b.branding=V(h);const c=h.modules??{};b.modulesById=Object.fromEntries(F.value.map(e=>[e,c[e]?.active??!1]))},{immediate:!0});async function E(){if(T.value){j.value=!0,R.value=null;try{const h=s.value?.modules??{},c={};for(const O of F.value){const G=h[O];c[O]={active:b.modulesById[O]??!1,deactivatedate:G?.deactivatedate??null,settingsjson:G?.settingsjson??{}}}const e=M.value,o=await fetch(`${e}/api/v1/tenant/${T.value}/settings`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:b.name,description:b.description,branding:{logo:b.branding.logo,theme:b.branding.theme},modules:c})});if(!o.ok){const G=(await o.json().catch(()=>({}))).error??(o.status===503?"API cannot persist (set DATABASE_URL or TENANT_CONFIG_PATH).":"Failed to save");throw new Error(G)}const x=await o.json();p.setTenant(x.tenant),Ie().loadTheme(x.tenant.branding?.theme??{},x.tenant.branding)}catch(h){R.value=h instanceof Error?h.message:"Failed to save"}finally{j.value=!1}}}return(h,c)=>(u(),ce(l(Ne),{title:"Admin"},{default:P(()=>[t("div",on,[l(N)==="general"?(u(),v("div",rn,[r(l(ee),null,{default:P(()=>[c[3]||(c[3]=t("h3",null,"General",-1)),r(l(S),{"model-value":l(T)??"",label:"Slug",disabled:""},null,8,["model-value"]),r(l(S),{modelValue:l(b).name,"onUpdate:modelValue":c[0]||(c[0]=e=>l(b).name=e),label:"Name"},null,8,["modelValue"]),r(l(S),{modelValue:l(b).description,"onUpdate:modelValue":c[1]||(c[1]=e=>l(b).description=e),label:"Description"},null,8,["modelValue"])]),_:1})])):l(N)==="theming"?(u(),v("div",dn,[r(an,{branding:l(b).branding},null,8,["branding"])])):l(N)==="modules"?(u(),v("div",mn,[r(l(ee),null,{default:P(()=>[c[4]||(c[4]=t("h3",null,"Modules",-1)),(u(!0),v(U,null,Z(l(F),e=>(u(),v("div",{key:e,class:"admin__module"},[t("span",null,y(l(_e)[e]?.label??e),1),r(l(Le),{"model-value":l(b).modulesById[e],label:l(b).modulesById[e]?"On":"Off","onUpdate:modelValue":o=>$(e,o)},null,8,["model-value","label","onUpdate:modelValue"])]))),128))]),_:1})])):l(N)==="marketplace"?(u(),v("div",cn,[r($s,{slug:l(T)??"",settings:l(w),onSaved:z},null,8,["slug","settings"])])):L("",!0),t("div",un,[r(l(K),{variant:"primary",disabled:l(j),onClick:E},{default:P(()=>[...c[5]||(c[5]=[X(" Save ",-1)])]),_:1},8,["disabled"]),l(R)?(u(),v("p",pn,y(l(R)),1)):L("",!0)])]),r(Ls,{modelValue:l(k),"onUpdate:modelValue":c[2]||(c[2]=e=>Ae(k)?k.value=e:null)},null,8,["modelValue"])]),_:1}))}}),wn=te(gn,[["__scopeId","data-v-c347be13"]]);export{wn as default};
