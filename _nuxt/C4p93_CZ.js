const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./OiCPX0_B.js","./DG6ESaol.js"])))=>i.map(i=>d[i]);
import{e as Ke,D as Oe,Q as Xe,a0 as Qe,f as V,o as r,i as g,c,a as o,t as s,b as u,k as l,g as w,w as U,q as G,U as Se,F as L,d as _,v as De,j as je,T as He,h as m,r as f,aa as re,W as Ge,_ as Je}from"./Cuem3LDA.js";import{I as d}from"./Cov751Ou.js";import{B as J}from"./Bl7VwagC.js";import{u as Ze,S as Z,T as ue,a as eo}from"./B7SIpMU4.js";import{t as h,a as oo,s as ee,e as to}from"./DnknCDuH.js";import{u as ao}from"./CJvSuGTU.js";/* empty css        */import{u as lo,E as so,c as no,s as qe,b as io,d as ro}from"./BBhsNU_X.js";import{e as F,C as ce,P as x,S as uo}from"./DG6ESaol.js";import{u as co}from"./vsL_u0tx.js";import{f as mo}from"./BHRLvuYU.js";import"./B39xTx9h.js";import"./BqRXT9UV.js";const vo={class:"escrow-modal"},po={class:"escrow-modal__header"},_o={class:"escrow-modal__title"},wo={class:"escrow-modal__header-actions"},yo={key:4,class:"escrow-modal__body"},fo={key:0,class:"escrow-modal__owner"},ko={class:"escrow-modal__details"},bo=["aria-expanded"],go={class:"escrow-modal__details-content"},ho={key:0,class:"escrow-modal__fill-loading"},Co={key:1,class:"escrow-modal__fill-content"},To={class:"escrow-modal__rate"},Bo=["title"],So={class:"escrow-modal__pay-receive"},Do={class:"escrow-modal__pay-receive-row"},qo={class:"escrow-modal__pay-receive-value"},Io={class:"escrow-modal__pay-receive-token"},Ro={class:"escrow-modal__pay-receive-row"},xo={class:"escrow-modal__pay-receive-value"},$o={class:"escrow-modal__pay-receive-token"},No={class:"escrow-modal__owner-actions"},Ao={class:"escrow-modal__details-cols"},Fo={class:"escrow-modal__details-col-left"},Eo={class:"escrow-modal__details-list"},Po=["href"],Mo=["href"],Vo=["href"],Uo=["href"],Lo={class:"escrow-modal__details-col-right"},Wo={key:0,class:"escrow-modal__owner-qr"},Yo=["src"],zo={class:"escrow-modal__owner-link-row"},Ko=["value"],Oo={class:"escrow-modal__details-list escrow-modal__details-list--rest"},Xo={key:1,class:"escrow-modal__fill"},Qo={key:0,class:"escrow-modal__fill-loading"},jo={key:1,class:"escrow-modal__fill-content"},Ho={class:"escrow-modal__rate"},Go=["title"],Jo={class:"escrow-modal__fill-amount"},Zo={class:"escrow-modal__fill-amount-header"},et={class:"escrow-modal__balance-inline"},ot={key:1,class:"escrow-modal__balance-placeholder"},tt={class:"escrow-modal__slider-row"},at=["disabled"],lt={class:"escrow-modal__slider-value"},st={class:"escrow-modal__fill-amount-input-row"},nt=["disabled"],it={class:"escrow-modal__fill-amount-token"},rt={class:"escrow-modal__pay-receive"},ut={class:"escrow-modal__pay-receive-row"},ct={class:"escrow-modal__pay-receive-value"},dt={class:"escrow-modal__pay-receive-token"},mt={class:"escrow-modal__pay-receive-row"},vt={class:"escrow-modal__pay-receive-value"},pt={class:"escrow-modal__pay-receive-token"},_t={key:0,class:"escrow-modal__insufficient"},wt={class:"escrow-modal__fill-actions"},yt={key:2,class:"escrow-modal__cannot-fill"},ft={key:2,class:"escrow-modal__details"},kt=["aria-expanded"],bt={class:"escrow-modal__details-content"},gt={class:"escrow-modal__details-cols"},ht={class:"escrow-modal__details-col-left"},Ct={class:"escrow-modal__details-list"},Tt=["href"],Bt=["href"],St=["href"],Dt=["href"],qt={class:"escrow-modal__details-col-right"},It={key:0,class:"escrow-modal__owner-qr"},Rt=["src"],xt={class:"escrow-modal__owner-link-row"},$t=["value"],Nt={class:"escrow-modal__details-list escrow-modal__details-list--rest"},Ie="11111111111111111111111111111111",At=Ke({__name:"EscrowDetailModal",props:{modelValue:{type:Boolean},escrowId:{}},emits:["update:modelValue"],setup(de,{emit:Re}){const v=de,xe=Re,$e=Oe(),{slug:W}=Xe($e),{shareUrl:Ne}=eo(W),Y=Qe(),me=Y.openConnectModal,{rpcUrl:S,rpcError:oe}=lo(),C=co(),te=ao(),ve=m(()=>!!(te.value&&W.value)),t=f(null),ae=f(!0),z=f(!1),K=f(!1),E=f(!1),P=f(!1),T=f(!1),D=f(100),O=f(""),le=f(!1),X=f([]),q=f(""),$=m(()=>v.escrowId?Ne(v.escrowId):"");async function se(){const a=$.value;if(a)try{await navigator.clipboard.writeText(a),Be("Link")}catch{}}function Ae(a){const e=a.account;return{publicKey:new x(a.publicKey),account:{maker:new x(e.maker),depositToken:new x(e.depositToken),requestToken:new x(e.requestToken),tokensDepositInit:new F(e.tokensDepositInit),tokensDepositRemaining:new F(e.tokensDepositRemaining),price:to(e.price),decimals:e.decimals,slippage:e.slippage,seed:new F(e.seed),authBump:0,vaultBump:0,escrowBump:0,expireTimestamp:new F(e.expireTimestamp),recipient:new x(e.recipient),onlyRecipient:e.onlyRecipient,onlyWhitelist:e.onlyWhitelist,allowPartialFill:e.allowPartialFill,whitelist:new x(e.whitelist)}}}const p=m(()=>Y.connectorState.value?.account??null),pe=m(()=>(Y.connectorState.value,re()!=null)),M=m(()=>t.value&&p.value&&t.value.account.maker.toBase58()===p.value),_e=m(()=>t.value?t.value.account.recipient.toBase58()===Ie:!0),we=m(()=>{if(!t.value)return"Never";const a=t.value.account.expireTimestamp?.toNumber?.()??0;return a<=0?"Never":new Date(a*1e3).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}),Q=m(()=>{if(!t.value||!p.value||t.value.account.maker.toBase58()===p.value||(t.value.account.tokensDepositRemaining?.toNumber()??0)<=0||t.value.account.onlyWhitelist)return!1;if(t.value.account.onlyRecipient){const e=t.value.account.recipient.toBase58();if(e!==Ie&&e!==p.value)return!1}const a=t.value.account.expireTimestamp?.toNumber?.()??0;return!(a>0&&a<Math.floor(Date.now()/1e3))}),{data:Fe}=Ze(t),n=m(()=>Fe.value),I=m(()=>{const a=t.value?.account?.price;return a!=null&&Number.isFinite(a)?Number(a):0}),R=m(()=>n.value?ee(n.value.depositSymbol??n.value.depositMintShort)||n.value.depositMintShort:""),N=m(()=>n.value?ee(n.value.priceSymbol??n.value.requestMintShort)||n.value.requestMintShort:""),ne=m(()=>n.value&&ee(n.value.depositName??n.value.depositSymbol)||"Deposit"),ye=m(()=>n.value&&ee(n.value.requestName??n.value.priceSymbol)||"Request"),j=m(()=>n.value?n.value.depositAmount*D.value/100:0);function Ee(a,e){return a===0?"0":e===0?String(Math.round(a)):a.toFixed(e).replace(/\.?0+$/,"")}function fe(){n.value&&(O.value=Ee(j.value,n.value.depositDecimals))}function Pe(){const a=n.value;if(!a||a.depositAmount<=0)return;const e=parseFloat(O.value);if(Number.isNaN(e)||e<0)return;const i=Math.min(100,Math.max(0,e/a.depositAmount*100));D.value=i}const ke=m(()=>n.value?j.value*I.value:0);function be(a){return Number.isFinite(a)?Number.isInteger(a)?String(a):a.toFixed(6).replace(/\.?0+$/,""):"0"}const ge=m(()=>be(ke.value)),he=m(()=>be(j.value)),Ce=m(()=>{if(!t.value)return 0;const a=t.value.account.requestToken.toBase58();return X.value.find(i=>i.mint===a)?.uiAmount??0}),Te=m(()=>!Q.value||!n.value?!1:Ce.value<ke.value),ie=m(()=>t.value?new Set([t.value.account.depositToken.toBase58(),t.value.account.requestToken.toBase58()]):new Set);function H(){xe("update:modelValue",!1)}function Be(a){const e=`copy-${Date.now()}`;C.add(e,{status:"success",message:`Copied: ${a}`})}async function B(a,e){try{await navigator.clipboard.writeText(a),Be(e)}catch{}}async function Me(){const a=re();if(!a?.publicKey||!t.value||!v.escrowId){const b=`fill-error-${Date.now()}`;C.add(b,{status:"error",message:p.value?"Wallet cannot sign transactions. Try reconnecting or use another wallet.":"Connect a wallet to fill this trade."});return}const e=n.value?.depositDecimals??0,i=oo(j.value,e),k=new F(i);if(k.lte(new F(0))){C.add(`fill-amount-${Date.now()}`,{status:"error",message:"Enter a valid amount to fill."});return}z.value=!0;const y=`fill-${v.escrowId}-${Date.now()}`;C.add(y,{status:"pending",message:"Filling escrow..."});try{const b=new ce(S.value),A=t.value.account.whitelist,Le=new x(so),We=A&&!A.equals(uo.programId)&&!A.equals(Le),Ye=await no({maker:t.value.account.maker,taker:a.publicKey,depositTokenMint:t.value.account.depositToken,requestTokenMint:t.value.account.requestToken,amount:k,seed:t.value.account.seed,connection:b,wallet:a,whitelist:We?A.toBase58():null}),ze=await qe(b,Ye,a,a.publicKey);C.update(y,{status:"success",message:"Escrow filled",signature:ze}),t.value=null,H()}catch(b){const A=b instanceof Error?b.message:"Fill failed";C.update(y,{status:"error",message:A})}finally{z.value=!1}}async function Ve(){const a=re();if(!a||!t.value||!v.escrowId)return;K.value=!0;const e=`cancel-${v.escrowId}-${Date.now()}`;C.add(e,{status:"pending",message:"Cancelling escrow..."});try{const i=new ce(S.value),k=await io({maker:t.value.account.maker,depositTokenMint:t.value.account.depositToken,requestTokenMint:t.value.account.requestToken,seed:t.value.account.seed,connection:i,wallet:a}),y=await qe(i,k,a,t.value.account.maker);C.update(e,{status:"success",message:"Escrow cancelled",signature:y}),t.value=null,H()}catch(i){C.update(e,{status:"error",message:i instanceof Error?i.message:"Cancel failed"})}finally{K.value=!1}}async function Ue(a){if(a){ae.value=!0,t.value=null,D.value=100;try{const e=te.value,i=W.value;if(e&&i){const k=`${e}/api/v1/tenant/${encodeURIComponent(i)}/marketplace/escrows/${encodeURIComponent(a)}`,y=await fetch(k);if(y.ok){const b=await y.json();b.escrow&&(t.value=Ae(b.escrow))}}if(!t.value&&S.value){const k=new ce(S.value),y=await ro(k,a);t.value=y}}finally{ae.value=!1}}}return V(()=>v.modelValue,a=>{a&&Y.refreshConnectorState()}),V(()=>[v.escrowId,W.value,te.value],([a,e,i])=>{a&&e&&i?Ue(a):t.value=null},{immediate:!0}),V([D,n],()=>{!le.value&&n.value&&fe()},{immediate:!0}),V([p,S,ie],async()=>{if(!p.value||!S.value||ie.value.size===0){X.value=[];return}try{X.value=await mo(S.value,p.value,ie.value)}catch{X.value=[]}},{immediate:!0}),V(()=>[v.modelValue,v.escrowId,$.value],async([a,e,i])=>{if(!a||!e||!i){q.value="";return}try{const k=await Ge(()=>import("./OiCPX0_B.js").then(y=>y.b),__vite__mapDeps([0,1]),import.meta.url);q.value=await k.toDataURL(i,{width:200,margin:1})}catch{q.value=""}},{immediate:!0}),(a,e)=>(r(),g(He,{to:"body"},[de.modelValue?(r(),c("div",{key:0,class:"escrow-modal-overlay",onClick:je(H,["self"])},[o("div",vo,[o("header",po,[o("h2",_o,s(M.value?"Your trade":"Trade details"),1),o("div",wo,[t.value&&!M.value?(r(),c("button",{key:0,type:"button",class:"escrow-modal__icon-btn","aria-label":"Copy link",onClick:se},[u(l(d),{icon:"mdi:share-variant"})])):w("",!0),o("button",{type:"button",class:"escrow-modal__icon-btn escrow-modal__close","aria-label":"Close",onClick:H},[u(l(d),{icon:"mdi:close"})])])]),l(oe)&&!ve.value?(r(),g(l(Z),{key:0,variant:"error",message:l(oe)},{hint:U(()=>[...e[16]||(e[16]=[o("p",{class:"escrow-modal__rpc-hint"},"Set NUXT_PUBLIC_HELIUS_RPC in your environment.",-1)])]),_:1},8,["message"])):l(oe)&&ve.value?(r(),g(l(Z),{key:1,variant:"info",message:"RPC is not configured. You can view this trade, but filling requires NUXT_PUBLIC_HELIUS_RPC."})):ae.value?(r(),g(l(Z),{key:2,variant:"loading",message:"Loading escrow..."})):t.value?(r(),c("div",yo,[M.value?(r(),c("section",fo,[o("section",ko,[o("button",{type:"button",class:"escrow-modal__details-toggle","aria-expanded":P.value,onClick:e[0]||(e[0]=i=>P.value=!P.value)},[e[17]||(e[17]=o("span",null,"Fill trade",-1)),u(l(d),{icon:P.value?"mdi:chevron-up":"mdi:chevron-down"},null,8,["icon"])],8,bo),G(o("div",go,[n.value?(r(),c("div",Co,[o("div",To,[e[20]||(e[20]=o("span",{class:"escrow-modal__rate-label"},"Rate",-1)),o("button",{type:"button",class:"escrow-modal__rate-value",title:T.value?"Show 1 deposit per X request":"Show 1 request per X deposit",onClick:e[1]||(e[1]=i=>T.value=!T.value)},[T.value?(r(),c(L,{key:1},[_(" 1 "+s(N.value)+" ",1),e[19]||(e[19]=o("span",{class:"escrow-modal__rate-approx"},"≈",-1)),_(" "+s(I.value?1/I.value:"–")+" "+s(R.value),1)],64)):(r(),c(L,{key:0},[_(" 1 "+s(R.value)+" ",1),e[18]||(e[18]=o("span",{class:"escrow-modal__rate-approx"},"≈",-1)),_(" "+s(I.value)+" "+s(N.value),1)],64)),u(l(d),{icon:"mdi:swap-horizontal",class:"escrow-modal__rate-icon"})],8,Bo)]),o("div",So,[o("div",Do,[e[21]||(e[21]=o("span",{class:"escrow-modal__pay-receive-label"},"You pay",-1)),o("span",qo,[_(s(ge.value)+" ",1),o("span",Io,"("+s(N.value)+") "+s(ye.value),1)])]),o("div",Ro,[e[22]||(e[22]=o("span",{class:"escrow-modal__pay-receive-label"},"You receive",-1)),o("span",xo,[_(s(he.value)+" ",1),o("span",$o,"("+s(R.value)+") "+s(ne.value),1)])])])])):(r(),c("div",ho,"Loading trade details..."))],512),[[Se,P.value]])]),o("div",No,[u(l(J),{variant:"secondary",disabled:K.value,onClick:Ve},{default:U(()=>[_(s(K.value?"Cancelling...":"Cancel"),1)]),_:1},8,["disabled"])]),e[33]||(e[33]=o("h3",{class:"escrow-modal__section-title"},"Details",-1)),o("div",Ao,[o("div",Fo,[o("dl",Eo,[e[23]||(e[23]=o("dt",null,"Escrow",-1)),o("dd",null,[o("code",null,s(l(h)(v.escrowId??"",8,8)),1),v.escrowId?(r(),c("a",{key:0,href:`https://solscan.io/account/${v.escrowId}`,target:"_blank",rel:"noopener",class:"escrow-modal__link",title:"View on Solscan"},[u(l(d),{icon:"mdi:open-in-new"})],8,Po)):w("",!0),o("button",{type:"button",class:"escrow-modal__copy","aria-label":"Copy escrow address",onClick:e[2]||(e[2]=i=>B(v.escrowId??"","Escrow address"))},[u(l(d),{icon:"mdi:content-copy"})])]),e[24]||(e[24]=o("dt",null,"Maker",-1)),o("dd",null,[o("code",null,s(l(h)(t.value.account.maker.toBase58(),8,8)),1),o("a",{href:`https://solscan.io/account/${t.value.account.maker.toBase58()}`,target:"_blank",rel:"noopener",class:"escrow-modal__link",title:"View on Solscan"},[u(l(d),{icon:"mdi:open-in-new"})],8,Mo),o("button",{type:"button",class:"escrow-modal__copy","aria-label":"Copy maker address",onClick:e[3]||(e[3]=i=>B(t.value.account.maker.toBase58(),"Maker address"))},[u(l(d),{icon:"mdi:content-copy"})])]),e[25]||(e[25]=o("dt",null,"Deposit token",-1)),o("dd",null,[o("code",null,s(l(h)(t.value.account.depositToken.toBase58(),8,8)),1),o("a",{href:`https://solscan.io/token/${t.value.account.depositToken.toBase58()}`,target:"_blank",rel:"noopener",class:"escrow-modal__link",title:"View on Solscan"},[u(l(d),{icon:"mdi:open-in-new"})],8,Vo),o("button",{type:"button",class:"escrow-modal__copy","aria-label":"Copy mint",onClick:e[4]||(e[4]=i=>B(t.value.account.depositToken.toBase58(),"Deposit token mint"))},[u(l(d),{icon:"mdi:content-copy"})])]),e[26]||(e[26]=o("dt",null,"Request token",-1)),o("dd",null,[o("code",null,s(l(h)(t.value.account.requestToken.toBase58(),8,8)),1),o("a",{href:`https://solscan.io/token/${t.value.account.requestToken.toBase58()}`,target:"_blank",rel:"noopener",class:"escrow-modal__link",title:"View on Solscan"},[u(l(d),{icon:"mdi:open-in-new"})],8,Uo),o("button",{type:"button",class:"escrow-modal__copy","aria-label":"Copy mint",onClick:e[5]||(e[5]=i=>B(t.value.account.requestToken.toBase58(),"Request token mint"))},[u(l(d),{icon:"mdi:content-copy"})])]),e[27]||(e[27]=o("dt",null,"Price (chain)",-1)),o("dd",null,[o("code",null,s(t.value.account.price),1)]),e[28]||(e[28]=o("dt",null,"Remaining (deposit)",-1)),o("dd",null,[n.value?(r(),g(l(ue),{key:0,amount:n.value.depositAmount,decimals:n.value.depositDecimals,symbol:n.value.depositSymbol,name:n.value.depositName,mint:t.value.account.depositToken.toBase58(),"show-mint-short":!1},null,8,["amount","decimals","symbol","name","mint"])):w("",!0)]),e[29]||(e[29]=o("dt",null,"Recipient",-1)),o("dd",null,s(_e.value?"Any wallet":l(h)(t.value.account.recipient.toBase58(),8,8)),1)])]),o("div",Lo,[$.value?(r(),c("div",Wo,[q.value?(r(),c("img",{key:0,src:q.value,alt:"QR code",class:"escrow-modal__owner-qr-img"},null,8,Yo)):w("",!0)])):w("",!0),o("div",zo,[o("input",{value:$.value,type:"text",readonly:"",class:"escrow-modal__owner-input"},null,8,Ko),o("button",{type:"button",class:"escrow-modal__owner-copy","aria-label":"Copy link",onClick:se},[u(l(d),{icon:"mdi:content-copy"})])]),o("dl",Oo,[e[30]||(e[30]=o("dt",null,"Whitelist only",-1)),o("dd",null,s(t.value.account.onlyWhitelist?"Yes":"No"),1),e[31]||(e[31]=o("dt",null,"Partial fill",-1)),o("dd",null,s(t.value.account.allowPartialFill?"Yes":"No"),1),e[32]||(e[32]=o("dt",null,"Expires",-1)),o("dd",null,s(we.value),1)])])])])):w("",!0),M.value?w("",!0):(r(),c("section",Xo,[e[44]||(e[44]=o("h3",{class:"escrow-modal__section-title"},"Fill trade",-1)),n.value?(r(),c("div",jo,[o("div",Ho,[e[36]||(e[36]=o("span",{class:"escrow-modal__rate-label"},"Rate",-1)),o("button",{type:"button",class:"escrow-modal__rate-value",title:T.value?"Show 1 deposit per X request":"Show 1 request per X deposit",onClick:e[6]||(e[6]=i=>T.value=!T.value)},[T.value?(r(),c(L,{key:1},[_(" 1 "+s(N.value)+" ",1),e[35]||(e[35]=o("span",{class:"escrow-modal__rate-approx"},"≈",-1)),_(" "+s(I.value?1/I.value:"–")+" "+s(R.value),1)],64)):(r(),c(L,{key:0},[_(" 1 "+s(R.value)+" ",1),e[34]||(e[34]=o("span",{class:"escrow-modal__rate-approx"},"≈",-1)),_(" "+s(I.value)+" "+s(N.value),1)],64)),u(l(d),{icon:"mdi:swap-horizontal",class:"escrow-modal__rate-icon"})],8,Go)]),o("div",Jo,[o("div",Zo,[e[38]||(e[38]=o("label",{class:"escrow-modal__label"},"Amount to fill",-1)),o("div",et,[e[37]||(e[37]=o("span",{class:"escrow-modal__balance-label"},"Balance",-1)),p.value?(r(),g(l(ue),{key:0,amount:Ce.value,decimals:n.value.requestDecimals,symbol:n.value.priceSymbol,name:n.value.requestName,mint:t.value.account.requestToken.toBase58(),"show-mint-short":!1},null,8,["amount","decimals","symbol","name","mint"])):(r(),c("span",ot,"Connect to see"))])]),o("div",tt,[G(o("input",{"onUpdate:modelValue":e[7]||(e[7]=i=>D.value=i),type:"range",min:"0",max:"100",step:"1",class:"escrow-modal__range",disabled:!t.value.account.allowPartialFill||!p.value},null,8,at),[[De,D.value,void 0,{number:!0}]]),o("span",lt,s(D.value)+"%",1)]),o("div",st,[G(o("input",{"onUpdate:modelValue":e[8]||(e[8]=i=>O.value=i),type:"text",inputmode:"decimal",class:"escrow-modal__fill-amount-input",disabled:!t.value.account.allowPartialFill||!p.value,onInput:Pe,onFocus:e[9]||(e[9]=i=>le.value=!0),onBlur:e[10]||(e[10]=i=>{le.value=!1,fe()})},null,40,nt),[[De,O.value]]),o("span",it," ("+s(R.value)+") "+s(ne.value),1)])]),o("div",rt,[o("div",ut,[e[39]||(e[39]=o("span",{class:"escrow-modal__pay-receive-label"},"You pay",-1)),o("span",ct,[_(s(ge.value)+" ",1),o("span",dt,"("+s(N.value)+") "+s(ye.value),1)])]),o("div",mt,[e[40]||(e[40]=o("span",{class:"escrow-modal__pay-receive-label"},"You receive",-1)),o("span",vt,[_(s(he.value)+" ",1),o("span",pt,"("+s(R.value)+") "+s(ne.value),1)])])]),p.value&&Te.value?(r(),c("div",_t," Insufficient balance to fill this amount. ")):w("",!0),o("div",wt,[p.value&&Q.value&&pe.value?(r(),g(l(J),{key:0,variant:"primary",class:"escrow-modal__fill-btn",disabled:z.value||Te.value,onClick:Me},{default:U(()=>[_(s(z.value?"Processing...":"Fill"),1)]),_:1},8,["disabled"])):p.value&&Q.value&&!pe.value?(r(),c(L,{key:1},[e[42]||(e[42]=o("p",{class:"escrow-modal__cannot-fill"}," Your wallet does not support signing transactions. Try another wallet. ",-1)),u(l(J),{variant:"primary",class:"escrow-modal__fill-btn",onClick:l(me)},{default:U(()=>[...e[41]||(e[41]=[_(" Change wallet ",-1)])]),_:1},8,["onClick"])],64)):p.value&&!Q.value?(r(),c("p",yt," You cannot fill this trade (restrictions or expired). ")):(r(),g(l(J),{key:3,variant:"primary",class:"escrow-modal__fill-btn",onClick:l(me)},{default:U(()=>[...e[43]||(e[43]=[_(" Connect wallet ",-1)])]),_:1},8,["onClick"]))])])):(r(),c("p",Qo,"Loading trade details..."))])),M.value?w("",!0):(r(),c("section",ft,[o("button",{type:"button",class:"escrow-modal__details-toggle","aria-expanded":E.value,onClick:e[11]||(e[11]=i=>E.value=!E.value)},[e[45]||(e[45]=o("span",null,"Details",-1)),u(l(d),{icon:E.value?"mdi:chevron-up":"mdi:chevron-down"},null,8,["icon"])],8,kt),G(o("div",bt,[o("div",gt,[o("div",ht,[o("dl",Ct,[e[46]||(e[46]=o("dt",null,"Escrow",-1)),o("dd",null,[o("code",null,s(l(h)(v.escrowId??"",8,8)),1),v.escrowId?(r(),c("a",{key:0,href:`https://solscan.io/account/${v.escrowId}`,target:"_blank",rel:"noopener",class:"escrow-modal__link",title:"View on Solscan"},[u(l(d),{icon:"mdi:open-in-new"})],8,Tt)):w("",!0),o("button",{type:"button",class:"escrow-modal__copy","aria-label":"Copy escrow address",onClick:e[12]||(e[12]=i=>B(v.escrowId??"","Escrow address"))},[u(l(d),{icon:"mdi:content-copy"})])]),e[47]||(e[47]=o("dt",null,"Maker",-1)),o("dd",null,[o("code",null,s(l(h)(t.value.account.maker.toBase58(),8,8)),1),o("a",{href:`https://solscan.io/account/${t.value.account.maker.toBase58()}`,target:"_blank",rel:"noopener",class:"escrow-modal__link",title:"View on Solscan"},[u(l(d),{icon:"mdi:open-in-new"})],8,Bt),o("button",{type:"button",class:"escrow-modal__copy","aria-label":"Copy maker address",onClick:e[13]||(e[13]=i=>B(t.value.account.maker.toBase58(),"Maker address"))},[u(l(d),{icon:"mdi:content-copy"})])]),e[48]||(e[48]=o("dt",null,"Deposit token",-1)),o("dd",null,[o("code",null,s(l(h)(t.value.account.depositToken.toBase58(),8,8)),1),o("a",{href:`https://solscan.io/token/${t.value.account.depositToken.toBase58()}`,target:"_blank",rel:"noopener",class:"escrow-modal__link",title:"View on Solscan"},[u(l(d),{icon:"mdi:open-in-new"})],8,St),o("button",{type:"button",class:"escrow-modal__copy","aria-label":"Copy mint",onClick:e[14]||(e[14]=i=>B(t.value.account.depositToken.toBase58(),"Deposit token mint"))},[u(l(d),{icon:"mdi:content-copy"})])]),e[49]||(e[49]=o("dt",null,"Request token",-1)),o("dd",null,[o("code",null,s(l(h)(t.value.account.requestToken.toBase58(),8,8)),1),o("a",{href:`https://solscan.io/token/${t.value.account.requestToken.toBase58()}`,target:"_blank",rel:"noopener",class:"escrow-modal__link",title:"View on Solscan"},[u(l(d),{icon:"mdi:open-in-new"})],8,Dt),o("button",{type:"button",class:"escrow-modal__copy","aria-label":"Copy mint",onClick:e[15]||(e[15]=i=>B(t.value.account.requestToken.toBase58(),"Request token mint"))},[u(l(d),{icon:"mdi:content-copy"})])]),e[50]||(e[50]=o("dt",null,"Price (chain)",-1)),o("dd",null,[o("code",null,s(t.value.account.price),1)]),e[51]||(e[51]=o("dt",null,"Remaining (deposit)",-1)),o("dd",null,[n.value?(r(),g(l(ue),{key:0,amount:n.value.depositAmount,decimals:n.value.depositDecimals,symbol:n.value.depositSymbol,name:n.value.depositName,mint:t.value.account.depositToken.toBase58(),"show-mint-short":!1},null,8,["amount","decimals","symbol","name","mint"])):w("",!0)]),e[52]||(e[52]=o("dt",null,"Recipient",-1)),o("dd",null,s(_e.value?"Any wallet":l(h)(t.value.account.recipient.toBase58(),8,8)),1)])]),o("div",qt,[$.value?(r(),c("div",It,[q.value?(r(),c("img",{key:0,src:q.value,alt:"QR code",class:"escrow-modal__owner-qr-img"},null,8,Rt)):w("",!0)])):w("",!0),o("div",xt,[o("input",{value:$.value,type:"text",readonly:"",class:"escrow-modal__owner-input"},null,8,$t),o("button",{type:"button",class:"escrow-modal__owner-copy","aria-label":"Copy link",onClick:se},[u(l(d),{icon:"mdi:content-copy"})])]),o("dl",Nt,[e[53]||(e[53]=o("dt",null,"Whitelist only",-1)),o("dd",null,s(t.value.account.onlyWhitelist?"Yes":"No"),1),e[54]||(e[54]=o("dt",null,"Partial fill",-1)),o("dd",null,s(t.value.account.allowPartialFill?"Yes":"No"),1),e[55]||(e[55]=o("dt",null,"Expires",-1)),o("dd",null,s(we.value),1)])])])],512),[[Se,E.value]])]))])):(r(),g(l(Z),{key:3,variant:"empty",message:"Escrow not found."}))])])):w("",!0)]))}}),Qt=Je(At,[["__scopeId","data-v-c6f31c12"]]);export{Qt as default};
