import{R as p,i as m,a4 as d}from"./DhkfeLsH.js";import{h as f}from"./DAaVrNXw.js";import{u as h}from"./Bg9r2jCQ.js";function R(){const c=p().public.heliusRpc?.trim()??"",n=c.length>0,o=m(()=>n?c.replace(/\/$/,""):""),e=m(()=>n?null:"Set NUXT_PUBLIC_HELIUS_RPC in your environment. The public Solana RPC returns 403 and cannot be used.");return{rpcUrl:o,hasRpc:n,rpcError:e}}const i=new Map;function g(t){return{mint:t.mint,name:t.name??"",symbol:t.symbol??"",image:t.image??null,decimals:t.decimals??0}}function M(){const t=h();async function c(n,o=!1){const e=n,u=i.get(e);if(u&&!o)return u;if(!o&&t.value){const r=`${t.value}/api/v1/marketplace/metadata/mint/${encodeURIComponent(n)}`;try{const s=await fetch(r);if(s.ok){const a=await s.json();return i.set(e,a),a}}catch{}}const{rpcUrl:l}=R();if(!l.value)return null;try{const r=new d(l.value),s=await f(r,n),a=g(s);return i.set(e,a),a}catch{return null}}return{fetchMetadata:c}}export{M as a,R as u};
