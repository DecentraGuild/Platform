import{_ as y,o as t,c as a,r as m,f as c,a as l,e as w,t as f,j as p,k as n,T as D,n as N,w as d,U as H,b as h,V as P,W as F,X as K,g as S,F as I,l as V,S as T,y as R,d as b,m as j,h as q,q as z}from"./Bz1q9w36.js";import{a as B,B as E,I as G,M as X}from"./DFUxm5hc.js";const J={},Q={class:"app-shell"},Y={key:0,class:"app-shell__header"},Z={class:"app-shell__body"},x={key:0,class:"app-shell__nav"},ee={class:"app-shell__main"};function te(e,o){return t(),a("div",Q,[e.$slots.header?(t(),a("header",Y,[m(e.$slots,"header",{},void 0)])):c("",!0),l("div",Z,[e.$slots.nav?(t(),a("nav",x,[m(e.$slots,"nav",{},void 0)])):c("",!0),l("main",ee,[m(e.$slots,"default",{},void 0)])])])}const ne=y(J,[["render",te],["__scopeId","data-v-4aea8461"]]),ae={class:"app-header"},oe=["src","alt"],se={key:1,class:"app-header__name"},le={class:"app-header__right"},ie={key:0,class:"app-header__nav"},de={key:1,class:"app-header__actions"},ce=w({__name:"AppHeader",props:{logo:{},name:{}},setup(e){return(o,_)=>(t(),a("div",ae,[m(o.$slots,"logo",{},()=>[e.logo?(t(),a("img",{key:0,src:e.logo,alt:e.name,class:"app-header__logo"},null,8,oe)):(t(),a("span",se,f(e.name||"dGuild"),1))]),l("div",le,[o.$slots.nav?(t(),a("div",ie,[m(o.$slots,"nav",{},void 0)])):c("",!0),o.$slots.actions?(t(),a("div",de,[m(o.$slots,"actions",{},void 0)])):c("",!0)])]))}}),re=y(ce,[["__scopeId","data-v-91ba7b21"]]),ue={},_e={class:"app-nav"};function me(e,o){return t(),a("nav",_e,[m(e.$slots,"default",{},void 0)])}const he=y(ue,[["render",me],["__scopeId","data-v-2cbcbc4a"]]),ve={class:"nav-link__label"},fe=["href"],pe={class:"nav-link__label"},ke=w({__name:"NavLink",props:{to:{},href:{},icon:{},isActive:{type:Boolean}},setup(e){return(o,_)=>e.to?(t(),p(n(D),{key:0,to:e.to,class:N(["nav-link",{"nav-link--active":e.isActive}]),"active-class":"nav-link--active"},{default:d(()=>[e.icon?(t(),p(n(B),{key:0,icon:e.icon,class:"nav-link__icon"},null,8,["icon"])):c("",!0),l("span",ve,[m(o.$slots,"default",{},void 0,!0)])]),_:3},8,["to","class"])):e.href?(t(),a("a",{key:1,href:e.href,class:N(["nav-link",{"nav-link--active":e.isActive}])},[e.icon?(t(),p(n(B),{key:0,icon:e.icon,class:"nav-link__icon"},null,8,["icon"])):c("",!0),l("span",pe,[m(o.$slots,"default",{},void 0)])],10,fe)):c("",!0)}}),A=y(ke,[["__scopeId","data-v-0f81d918"]]),$e=["aria-labelledby"],ye={class:"modal__header"},ge=["id"],be={class:"modal__body"},we=w({__name:"Modal",props:{modelValue:{type:Boolean},title:{}},emits:["update:modelValue"],setup(e,{emit:o}){const _=o,i=S(()=>"modal-title-"+Math.random().toString(36).slice(2,9));function k(){_("update:modelValue",!1)}return(C,g)=>(t(),p(H,{to:"body"},[h(P,{name:"modal"},{default:d(()=>[e.modelValue?(t(),a("div",{key:0,class:"modal",role:"dialog","aria-modal":"true","aria-labelledby":i.value,onKeydown:F(k,["escape"])},[l("div",{class:"modal__backdrop","aria-hidden":"true",onClick:k}),l("div",{class:"modal__content",onClick:g[0]||(g[0]=K(()=>{},["stop"]))},[l("div",ye,[e.title?(t(),a("h2",{key:0,id:i.value,class:"modal__title"},f(e.title),9,ge)):c("",!0),l("button",{type:"button",class:"modal__close","aria-label":"Close",onClick:k},[h(n(B),{icon:"mdi:close"})])]),l("div",be,[m(C.$slots,"default",{},void 0,!0)])])],40,$e)):c("",!0)]),_:3})]))}}),Ce=y(we,[["__scopeId","data-v-f1f7b54b"]]),Se={class:"connect-wallet-modal"},Ie={key:0,class:"connect-wallet-modal__description"},Me={class:"connect-wallet-modal__list"},Ae=["disabled","onClick"],Be={class:"connect-wallet-modal__name"},Ve={key:1,class:"connect-wallet-modal__empty"},Ne={key:2,class:"connect-wallet-modal__error"},Ee=w({__name:"ConnectWalletModal",props:{open:{type:Boolean},title:{default:"Connect wallet"},description:{default:""},connectors:{},loading:{type:Boolean,default:!1},error:{default:null}},emits:["close","select"],setup(e){return(o,_)=>(t(),p(Ce,{"model-value":e.open,title:e.title,"onUpdate:modelValue":_[0]||(_[0]=i=>o.$emit("close"))},{default:d(()=>[l("div",Se,[e.description?(t(),a("p",Ie,f(e.description),1)):c("",!0),l("ul",Me,[(t(!0),a(I,null,V(e.connectors,i=>(t(),a("li",{key:i.id,class:"connect-wallet-modal__item"},[l("button",{type:"button",class:"connect-wallet-modal__connector",disabled:!i.ready||e.loading,onClick:k=>o.$emit("select",i.id)},[l("span",Be,f(i.name),1),e.loading?(t(),p(n(B),{key:0,icon:"mdi:loading",class:"connect-wallet-modal__spinner"})):c("",!0)],8,Ae)]))),128))]),e.connectors.length===0&&!e.loading?(t(),a("p",Ve," No wallets detected. Install a Solana wallet (e.g. Phantom, Backpack) to continue. ")):c("",!0),e.error?(t(),a("p",Ne,f(e.error),1)):c("",!0)])]),_:1},8,["model-value","title"]))}}),Te=y(Ee,[["__scopeId","data-v-fa7ebe93"]]),Le={class:"auth-widget"},Oe={class:"auth-widget__address"},Ue=w({__name:"AuthWidget",setup(e){const o=T(),{wallet:_,loading:i,error:k,connectorState:C,fetchMe:g,refreshConnectorState:s,connectAndSignIn:r,signOut:u}=o,M=j(!1),L=S(()=>{const $=_.value;return!$||$.length<10?$??"":`${$.slice(0,4)}...${$.slice(-4)}`});R(()=>{g(),s()});async function O($){await r($)&&(M.value=!1)}async function U(){await u()}return($,v)=>(t(),a("div",Le,[n(_)?(t(),a(I,{key:0},[l("span",Oe,f(L.value),1),h(n(E),{variant:"secondary",onClick:U},{default:d(()=>[...v[2]||(v[2]=[b(" Sign out ",-1)])]),_:1})],64)):(t(),a(I,{key:1},[h(n(E),{variant:"secondary",onClick:v[0]||(v[0]=W=>M.value=!0)},{default:d(()=>[...v[3]||(v[3]=[b(" Connect wallet ",-1)])]),_:1}),h(n(Te),{open:M.value,title:"Connect wallet",description:"Choose a wallet to sign in.",connectors:n(C).connectors,loading:n(i),error:n(k),onClose:v[1]||(v[1]=W=>M.value=!1),onSelect:O},null,8,["open","connectors","loading","error"])],64))]))}}),We=y(Ue,[["__scopeId","data-v-cdc8bbc7"]]),De={key:0,class:"tenant-error"},He=w({__name:"default",setup(e){const o=q(),_=z(),i=S(()=>o.tenant),k=T(),C=S(()=>{const s=k.wallet.value,r=i.value?.admins??[];return!!(s&&r.includes(s))}),g=S(()=>i.value?.modules?i.value.modules.filter(s=>s.enabled&&G.has(s.id)).filter(s=>s.id!=="admin"||C.value).map(s=>{const r=X[s.id],u={admin:"mdi:cog",marketplace:"mdi:store",raffles:"mdi:ticket",whitelist:"mdi:format-list-checks",minting:"mdi:brush"};return{id:s.id,path:r?.path??"#",label:r?.label??s.id,icon:u[s.id]}}):[]);return(s,r)=>(t(),p(n(ne),null,{header:d(()=>[h(n(re),{logo:n(_).branding.logo,name:n(_).branding.name??n(i)?.name},{actions:d(()=>[h(n(We))]),nav:d(()=>[h(n(A),{to:"/",icon:"mdi:home"},{default:d(()=>[...r[1]||(r[1]=[b("Home",-1)])]),_:1}),(t(!0),a(I,null,V(n(g),u=>(t(),p(n(A),{key:u.id,to:u.path,icon:u.icon},{default:d(()=>[b(f(u.label),1)]),_:2},1032,["to","icon"]))),128))]),_:1},8,["logo","name"])]),nav:d(()=>[h(n(he),null,{default:d(()=>[h(n(A),{to:"/",icon:"mdi:home"},{default:d(()=>[...r[2]||(r[2]=[b("Home",-1)])]),_:1}),(t(!0),a(I,null,V(n(g),u=>(t(),p(n(A),{key:u.id,to:u.path,icon:u.icon},{default:d(()=>[b(f(u.label),1)]),_:2},1032,["to","icon"]))),128))]),_:1})]),default:d(()=>[n(o).error?(t(),a("div",De,[b(f(n(o).error)+" ",1),r[0]||(r[0]=l("span",{class:"tenant-error__hint"},"Ensure the API is running and the tenant slug exists.",-1))])):c("",!0),m(s.$slots,"default",{},void 0,!0)]),_:3}))}}),Ke=y(He,[["__scopeId","data-v-91b659bb"]]);export{Ke as default};
