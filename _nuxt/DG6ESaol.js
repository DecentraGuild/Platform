function Cc(n){return new Error(`[unenv] ${n} is not implemented yet!`)}function In(n){return Object.assign(()=>{throw Cc(n)},{__unenv__:!0})}const Re=[],Ee=[],Oc=typeof Uint8Array>"u"?Array:Uint8Array,ai="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let n=0,t=ai.length;n<t;++n)Re[n]=ai[n],Ee[ai.charCodeAt(n)]=n;Ee[45]=62;Ee[95]=63;function Uc(n){const t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");let e=n.indexOf("=");e===-1&&(e=t);const r=e===t?0:4-e%4;return[e,r]}function Nc(n,t,e){return(t+e)*3/4-e}function zc(n){let t;const e=Uc(n),r=e[0],s=e[1],i=new Oc(Nc(n,r,s));let o=0;const l=s>0?r-4:r;let h;for(h=0;h<l;h+=4)t=Ee[n.charCodeAt(h)]<<18|Ee[n.charCodeAt(h+1)]<<12|Ee[n.charCodeAt(h+2)]<<6|Ee[n.charCodeAt(h+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Ee[n.charCodeAt(h)]<<2|Ee[n.charCodeAt(h+1)]>>4,i[o++]=t&255),s===1&&(t=Ee[n.charCodeAt(h)]<<10|Ee[n.charCodeAt(h+1)]<<4|Ee[n.charCodeAt(h+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function Kc(n){return Re[n>>18&63]+Re[n>>12&63]+Re[n>>6&63]+Re[n&63]}function qc(n,t,e){let r;const s=[];for(let i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),s.push(Kc(r));return s.join("")}function $s(n){let t;const e=n.length,r=e%3,s=[],i=16383;for(let o=0,l=e-r;o<l;o+=i)s.push(qc(n,o,o+i>l?l:o+i));return r===1?(t=n[e-1],s.push(Re[t>>2]+Re[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],s.push(Re[t>>10]+Re[t>>4&63]+Re[t<<2&63]+"=")),s.join("")}function xn(n,t,e,r,s){let i,o;const l=s*8-r-1,h=(1<<l)-1,g=h>>1;let b=-7,v=e?s-1:0;const I=e?-1:1;let S=n[t+v];for(v+=I,i=S&(1<<-b)-1,S>>=-b,b+=l;b>0;)i=i*256+n[t+v],v+=I,b-=8;for(o=i&(1<<-b)-1,i>>=-b,b+=r;b>0;)o=o*256+n[t+v],v+=I,b-=8;if(i===0)i=1-g;else{if(i===h)return o?Number.NaN:(S?-1:1)*Number.POSITIVE_INFINITY;o=o+Math.pow(2,r),i=i-g}return(S?-1:1)*o*Math.pow(2,i-r)}function Vo(n,t,e,r,s,i){let o,l,h,g=i*8-s-1;const b=(1<<g)-1,v=b>>1,I=s===23?Math.pow(2,-24)-Math.pow(2,-77):0;let S=r?0:i-1;const A=r?1:-1,R=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),Number.isNaN(t)||t===Number.POSITIVE_INFINITY?(l=Number.isNaN(t)?1:0,o=b):(o=Math.floor(Math.log2(t)),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),t+=o+v>=1?I/h:I*Math.pow(2,1-v),t*h>=2&&(o++,h/=2),o+v>=b?(l=0,o=b):o+v>=1?(l=(t*h-1)*Math.pow(2,s),o=o+v):(l=t*Math.pow(2,v-1)*Math.pow(2,s),o=0));s>=8;)n[e+S]=l&255,S+=A,l/=256,s-=8;for(o=o<<s|l,g+=s;g>0;)n[e+S]=o&255,S+=A,o/=256,g-=8;n[e+S-A]|=R*128}const Vs=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,Hi=50,dn=2147483647,ji=dn;q.TYPED_ARRAY_SUPPORT=Fc();!q.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This environment lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Fc(){try{const n=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(n,t),n.foo()===42}catch{return!1}}Object.defineProperty(q.prototype,"parent",{enumerable:!0,get:function(){if(q.isBuffer(this))return this.buffer}});Object.defineProperty(q.prototype,"offset",{enumerable:!0,get:function(){if(q.isBuffer(this))return this.byteOffset}});function $e(n){if(n>dn)throw new RangeError('The value "'+n+'" is invalid for option "size"');const t=new Uint8Array(n);return Object.setPrototypeOf(t,q.prototype),t}function q(n,t,e){if(typeof n=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Gi(n)}return Ho(n,t,e)}q.poolSize=8192;function Ho(n,t,e){if(typeof n=="string")return Wc(n,t);if(ArrayBuffer.isView(n))return $c(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(Ce(n,ArrayBuffer)||n&&Ce(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(n,SharedArrayBuffer)||n&&Ce(n.buffer,SharedArrayBuffer)))return Ci(n,t,e);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const r=n.valueOf&&n.valueOf();if(r!=null&&r!==n)return q.from(r,t,e);const s=Vc(n);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return q.from(n[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}q.from=function(n,t,e){return Ho(n,t,e)};Object.setPrototypeOf(q.prototype,Uint8Array.prototype);Object.setPrototypeOf(q,Uint8Array);function jo(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function Dc(n,t,e){return jo(n),n<=0?$e(n):t!==void 0?typeof e=="string"?$e(n).fill(t,e):$e(n).fill(t):$e(n)}q.alloc=function(n,t,e){return Dc(n,t,e)};function Gi(n){return jo(n),$e(n<0?0:Zi(n)|0)}q.allocUnsafe=function(n){return Gi(n)};q.allocUnsafeSlow=function(n){return Gi(n)};function Wc(n,t){if((typeof t!="string"||t==="")&&(t="utf8"),!q.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const e=Zo(n,t)|0;let r=$e(e);const s=r.write(n,t);return s!==e&&(r=r.slice(0,s)),r}function Li(n){const t=n.length<0?0:Zi(n.length)|0,e=$e(t);for(let r=0;r<t;r+=1)e[r]=n[r]&255;return e}function $c(n){if(Ce(n,Uint8Array)){const t=new Uint8Array(n);return Ci(t.buffer,t.byteOffset,t.byteLength)}return Li(n)}function Ci(n,t,e){if(t<0||n.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let r;return t===void 0&&e===void 0?r=new Uint8Array(n):e===void 0?r=new Uint8Array(n,t):r=new Uint8Array(n,t,e),Object.setPrototypeOf(r,q.prototype),r}function Vc(n){if(q.isBuffer(n)){const t=Zi(n.length)|0,e=$e(t);return e.length===0||n.copy(e,0,0,t),e}if(n.length!==void 0)return typeof n.length!="number"||Xi(n.length)?$e(0):Li(n);if(n.type==="Buffer"&&Array.isArray(n.data))return Li(n.data)}function Zi(n){if(n>=dn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+dn.toString(16)+" bytes");return n|0}function Go(n){return+n!=n&&(n=0),q.alloc(+n)}q.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==q.prototype};q.compare=function(t,e){if(Ce(t,Uint8Array)&&(t=q.from(t,t.offset,t.byteLength)),Ce(e,Uint8Array)&&(e=q.from(e,e.offset,e.byteLength)),!q.isBuffer(t)||!q.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,s=e.length;for(let i=0,o=Math.min(r,s);i<o;++i)if(t[i]!==e[i]){r=t[i],s=e[i];break}return r<s?-1:s<r?1:0};q.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};q.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return q.alloc(0);let r;if(e===void 0)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const s=q.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let o=t[r];if(Ce(o,Uint8Array))i+o.length>s.length?(q.isBuffer(o)||(o=q.from(o.buffer,o.byteOffset,o.byteLength)),o.copy(s,i)):Uint8Array.prototype.set.call(s,o,i);else if(q.isBuffer(o))o.copy(s,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=o.length}return s};function Zo(n,t){if(q.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||Ce(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);const e=n.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&e===0)return 0;let s=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return Oi(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return ia(n).length;default:if(s)return r?-1:Oi(n).length;t=(""+t).toLowerCase(),s=!0}}q.byteLength=Zo;function Hc(n,t,e){let r=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(n||(n="utf8");;)switch(n){case"hex":return ru(this,t,e);case"utf8":case"utf-8":return Xo(this,t,e);case"ascii":return tu(this,t,e);case"latin1":case"binary":return eu(this,t,e);case"base64":return Jc(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nu(this,t,e);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),r=!0}}q.prototype._isBuffer=!0;function nr(n,t,e){const r=n[t];n[t]=n[e],n[e]=r}q.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)nr(this,e,e+1);return this};q.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)nr(this,e,e+3),nr(this,e+1,e+2);return this};q.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)nr(this,e,e+7),nr(this,e+1,e+6),nr(this,e+2,e+5),nr(this,e+3,e+4);return this};q.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?Xo(this,0,t):Reflect.apply(Hc,this,arguments)};q.prototype.toLocaleString=q.prototype.toString;q.prototype.equals=function(t){if(!q.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:q.compare(this,t)===0};q.prototype.inspect=function(){let t="";const e=Hi;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"};Vs&&(q.prototype[Vs]=q.prototype.inspect);q.prototype.compare=function(t,e,r,s,i){if(Ce(t,Uint8Array)&&(t=q.from(t,t.offset,t.byteLength)),!q.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),r===void 0&&(r=t?t.length:0),s===void 0&&(s=0),i===void 0&&(i=this.length),e<0||r>t.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&e>=r)return 0;if(s>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,s>>>=0,i>>>=0,this===t)return 0;let o=i-s,l=r-e;const h=Math.min(o,l),g=this.slice(s,i),b=t.slice(e,r);for(let v=0;v<h;++v)if(g[v]!==b[v]){o=g[v],l=b[v];break}return o<l?-1:l<o?1:0};function Yo(n,t,e,r,s){if(n.length===0)return-1;if(typeof e=="string"?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,Xi(e)&&(e=s?0:n.length-1),e<0&&(e=n.length+e),e>=n.length){if(s)return-1;e=n.length-1}else if(e<0)if(s)e=0;else return-1;if(typeof t=="string"&&(t=q.from(t,r)),q.isBuffer(t))return t.length===0?-1:Hs(n,t,e,r,s);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(n,t,e):Uint8Array.prototype.lastIndexOf.call(n,t,e):Hs(n,[t],e,r,s);throw new TypeError("val must be string, number or Buffer")}function Hs(n,t,e,r,s){let i=1,o=n.length,l=t.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(n.length<2||t.length<2)return-1;i=2,o/=2,l/=2,e/=2}function h(b,v){return i===1?b[v]:b.readUInt16BE(v*i)}let g;if(s){let b=-1;for(g=e;g<o;g++)if(h(n,g)===h(t,b===-1?0:g-b)){if(b===-1&&(b=g),g-b+1===l)return b*i}else b!==-1&&(g-=g-b),b=-1}else for(e+l>o&&(e=o-l),g=e;g>=0;g--){let b=!0;for(let v=0;v<l;v++)if(h(n,g+v)!==h(t,v)){b=!1;break}if(b)return g}return-1}q.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1};q.prototype.indexOf=function(t,e,r){return Yo(this,t,e,r,!0)};q.prototype.lastIndexOf=function(t,e,r){return Yo(this,t,e,r,!1)};function jc(n,t,e,r){e=Number(e)||0;const s=n.length-e;r?(r=Number(r),r>s&&(r=s)):r=s;const i=t.length;r>i/2&&(r=i/2);let o;for(o=0;o<r;++o){const l=Number.parseInt(t.slice(o*2,o*2+2),16);if(Xi(l))return o;n[e+o]=l}return o}function Gc(n,t,e,r){return _n(Oi(t,n.length-e),n,e,r)}function Zc(n,t,e,r){return _n(au(t),n,e,r)}function Yc(n,t,e,r){return _n(ia(t),n,e,r)}function Xc(n,t,e,r){return _n(cu(t,n.length-e),n,e,r)}q.prototype.write=function(t,e,r,s){if(e===void 0)s="utf8",r=this.length,e=0;else if(r===void 0&&typeof e=="string")s=e,r=this.length,e=0;else if(Number.isFinite(e))e=e>>>0,Number.isFinite(r)?(r=r>>>0,s===void 0&&(s="utf8")):(s=r,r=void 0);else throw new TypeError("Buffer.write(string, encoding, offset[, length]) is no longer supported");const i=this.length-e;if((r===void 0||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let o=!1;for(;;)switch(s){case"hex":return jc(this,t,e,r);case"utf8":case"utf-8":return Gc(this,t,e,r);case"ascii":case"latin1":case"binary":return Zc(this,t,e,r);case"base64":return Yc(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xc(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}};q.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Jc(n,t,e){return t===0&&e===n.length?$s(n):$s(n.slice(t,e))}function Xo(n,t,e){e=Math.min(n.length,e);const r=[];let s=t;for(;s<e;){const i=n[s];let o=null,l=i>239?4:i>223?3:i>191?2:1;if(s+l<=e){let h,g,b,v;switch(l){case 1:i<128&&(o=i);break;case 2:h=n[s+1],(h&192)===128&&(v=(i&31)<<6|h&63,v>127&&(o=v));break;case 3:h=n[s+1],g=n[s+2],(h&192)===128&&(g&192)===128&&(v=(i&15)<<12|(h&63)<<6|g&63,v>2047&&(v<55296||v>57343)&&(o=v));break;case 4:h=n[s+1],g=n[s+2],b=n[s+3],(h&192)===128&&(g&192)===128&&(b&192)===128&&(v=(i&15)<<18|(h&63)<<12|(g&63)<<6|b&63,v>65535&&v<1114112&&(o=v))}}o===null?(o=65533,l=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),s+=l}return Qc(r)}const js=4096;function Qc(n){const t=n.length;if(t<=js)return String.fromCharCode.apply(String,n);let e="",r=0;for(;r<t;)e+=String.fromCharCode.apply(String,n.slice(r,r+=js));return e}function tu(n,t,e){let r="";e=Math.min(n.length,e);for(let s=t;s<e;++s)r+=String.fromCharCode(n[s]&127);return r}function eu(n,t,e){let r="";e=Math.min(n.length,e);for(let s=t;s<e;++s)r+=String.fromCharCode(n[s]);return r}function ru(n,t,e){const r=n.length;(!t||t<0)&&(t=0),(!e||e<0||e>r)&&(e=r);let s="";for(let i=t;i<e;++i)s+=uu[n[i]];return s}function nu(n,t,e){const r=n.slice(t,e);let s="";for(let i=0;i<r.length-1;i+=2)s+=String.fromCharCode(r[i]+r[i+1]*256);return s}q.prototype.slice=function(t,e){const r=this.length;t=Math.trunc(t),e=e===void 0?r:Math.trunc(e),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);const s=this.subarray(t,e);return Object.setPrototypeOf(s,q.prototype),s};function ce(n,t,e){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+t>e)throw new RangeError("Trying to access beyond buffer length")}q.prototype.readUintLE=q.prototype.readUIntLE=function(t,e,r){t=t>>>0,e=e>>>0,r||ce(t,e,this.length);let s=this[t],i=1,o=0;for(;++o<e&&(i*=256);)s+=this[t+o]*i;return s};q.prototype.readUintBE=q.prototype.readUIntBE=function(t,e,r){t=t>>>0,e=e>>>0,r||ce(t,e,this.length);let s=this[t+--e],i=1;for(;e>0&&(i*=256);)s+=this[t+--e]*i;return s};q.prototype.readUint8=q.prototype.readUInt8=function(t,e){return t=t>>>0,e||ce(t,1,this.length),this[t]};q.prototype.readUint16LE=q.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||ce(t,2,this.length),this[t]|this[t+1]<<8};q.prototype.readUint16BE=q.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||ce(t,2,this.length),this[t]<<8|this[t+1]};q.prototype.readUint32LE=q.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};q.prototype.readUint32BE=q.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};q.prototype.readBigUInt64LE=er(function(t){t=t>>>0,Pr(t,"offset");const e=this[t],r=this[t+7];(e===void 0||r===void 0)&&jr(t,this.length-8);const s=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,i=this[++t]+this[++t]*2**8+this[++t]*2**16+r*2**24;return BigInt(s)+(BigInt(i)<<BigInt(32))});q.prototype.readBigUInt64BE=er(function(t){t=t>>>0,Pr(t,"offset");const e=this[t],r=this[t+7];(e===void 0||r===void 0)&&jr(t,this.length-8);const s=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],i=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+r;return(BigInt(s)<<BigInt(32))+BigInt(i)});q.prototype.readIntLE=function(t,e,r){t=t>>>0,e=e>>>0,r||ce(t,e,this.length);let s=this[t],i=1,o=0;for(;++o<e&&(i*=256);)s+=this[t+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s};q.prototype.readIntBE=function(t,e,r){t=t>>>0,e=e>>>0,r||ce(t,e,this.length);let s=e,i=1,o=this[t+--s];for(;s>0&&(i*=256);)o+=this[t+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o};q.prototype.readInt8=function(t,e){return t=t>>>0,e||ce(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};q.prototype.readInt16LE=function(t,e){t=t>>>0,e||ce(t,2,this.length);const r=this[t]|this[t+1]<<8;return r&32768?r|4294901760:r};q.prototype.readInt16BE=function(t,e){t=t>>>0,e||ce(t,2,this.length);const r=this[t+1]|this[t]<<8;return r&32768?r|4294901760:r};q.prototype.readInt32LE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};q.prototype.readInt32BE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};q.prototype.readBigInt64LE=er(function(t){t=t>>>0,Pr(t,"offset");const e=this[t],r=this[t+7];(e===void 0||r===void 0)&&jr(t,this.length-8);const s=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(r<<24);return(BigInt(s)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});q.prototype.readBigInt64BE=er(function(t){t=t>>>0,Pr(t,"offset");const e=this[t],r=this[t+7];(e===void 0||r===void 0)&&jr(t,this.length-8);const s=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+r)});q.prototype.readFloatLE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),xn(this,t,!0,23,4)};q.prototype.readFloatBE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),xn(this,t,!1,23,4)};q.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||ce(t,8,this.length),xn(this,t,!0,52,8)};q.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||ce(t,8,this.length),xn(this,t,!1,52,8)};function ve(n,t,e,r,s,i){if(!q.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<i)throw new RangeError('"value" argument is out of bounds');if(e+r>n.length)throw new RangeError("Index out of range")}q.prototype.writeUintLE=q.prototype.writeUIntLE=function(t,e,r,s){if(t=+t,e=e>>>0,r=r>>>0,!s){const l=Math.pow(2,8*r)-1;ve(this,t,e,r,l,0)}let i=1,o=0;for(this[e]=t&255;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r};q.prototype.writeUintBE=q.prototype.writeUIntBE=function(t,e,r,s){if(t=+t,e=e>>>0,r=r>>>0,!s){const l=Math.pow(2,8*r)-1;ve(this,t,e,r,l,0)}let i=r-1,o=1;for(this[e+i]=t&255;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r};q.prototype.writeUint8=q.prototype.writeUInt8=function(t,e,r){return t=+t,e=e>>>0,r||ve(this,t,e,1,255,0),this[e]=t&255,e+1};q.prototype.writeUint16LE=q.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=e>>>0,r||ve(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2};q.prototype.writeUint16BE=q.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=e>>>0,r||ve(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2};q.prototype.writeUint32LE=q.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=e>>>0,r||ve(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4};q.prototype.writeUint32BE=q.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=e>>>0,r||ve(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function Jo(n,t,e,r,s){na(t,r,s,n,e,7);let i=Number(t&BigInt(4294967295));n[e++]=i,i=i>>8,n[e++]=i,i=i>>8,n[e++]=i,i=i>>8,n[e++]=i;let o=Number(t>>BigInt(32)&BigInt(4294967295));return n[e++]=o,o=o>>8,n[e++]=o,o=o>>8,n[e++]=o,o=o>>8,n[e++]=o,e}function Qo(n,t,e,r,s){na(t,r,s,n,e,7);let i=Number(t&BigInt(4294967295));n[e+7]=i,i=i>>8,n[e+6]=i,i=i>>8,n[e+5]=i,i=i>>8,n[e+4]=i;let o=Number(t>>BigInt(32)&BigInt(4294967295));return n[e+3]=o,o=o>>8,n[e+2]=o,o=o>>8,n[e+1]=o,o=o>>8,n[e]=o,e+8}q.prototype.writeBigUInt64LE=er(function(t,e=0){return Jo(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});q.prototype.writeBigUInt64BE=er(function(t,e=0){return Qo(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});q.prototype.writeIntLE=function(t,e,r,s){if(t=+t,e=e>>>0,!s){const h=Math.pow(2,8*r-1);ve(this,t,e,r,h-1,-h)}let i=0,o=1,l=0;for(this[e]=t&255;++i<r&&(o*=256);)t<0&&l===0&&this[e+i-1]!==0&&(l=1),this[e+i]=Math.trunc(t/o)-l&255;return e+r};q.prototype.writeIntBE=function(t,e,r,s){if(t=+t,e=e>>>0,!s){const h=Math.pow(2,8*r-1);ve(this,t,e,r,h-1,-h)}let i=r-1,o=1,l=0;for(this[e+i]=t&255;--i>=0&&(o*=256);)t<0&&l===0&&this[e+i+1]!==0&&(l=1),this[e+i]=Math.trunc(t/o)-l&255;return e+r};q.prototype.writeInt8=function(t,e,r){return t=+t,e=e>>>0,r||ve(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1};q.prototype.writeInt16LE=function(t,e,r){return t=+t,e=e>>>0,r||ve(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2};q.prototype.writeInt16BE=function(t,e,r){return t=+t,e=e>>>0,r||ve(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2};q.prototype.writeInt32LE=function(t,e,r){return t=+t,e=e>>>0,r||ve(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4};q.prototype.writeInt32BE=function(t,e,r){return t=+t,e=e>>>0,r||ve(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};q.prototype.writeBigInt64LE=er(function(t,e=0){return Jo(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});q.prototype.writeBigInt64BE=er(function(t,e=0){return Qo(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ta(n,t,e,r,s,i){if(e+r>n.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function ea(n,t,e,r,s){return t=+t,e=e>>>0,s||ta(n,t,e,4),Vo(n,t,e,r,23,4),e+4}q.prototype.writeFloatLE=function(t,e,r){return ea(this,t,e,!0,r)};q.prototype.writeFloatBE=function(t,e,r){return ea(this,t,e,!1,r)};function ra(n,t,e,r,s){return t=+t,e=e>>>0,s||ta(n,t,e,8),Vo(n,t,e,r,52,8),e+8}q.prototype.writeDoubleLE=function(t,e,r){return ra(this,t,e,!0,r)};q.prototype.writeDoubleBE=function(t,e,r){return ra(this,t,e,!1,r)};q.prototype.copy=function(t,e,r,s){if(!q.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),!s&&s!==0&&(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<r&&(s=r),s===r||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-r&&(s=t.length-e+r);const i=s-r;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,r,s):Uint8Array.prototype.set.call(t,this.subarray(r,s),e),i};q.prototype.fill=function(t,e,r,s){if(typeof t=="string"){if(typeof e=="string"?(s=e,e=0,r=this.length):typeof r=="string"&&(s=r,r=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!q.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(t.length===1){const o=t.charCodeAt(0);(s==="utf8"&&o<128||s==="latin1")&&(t=o)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e=e>>>0,r=r===void 0?this.length:r>>>0,t||(t=0);let i;if(typeof t=="number")for(i=e;i<r;++i)this[i]=t;else{const o=q.isBuffer(t)?t:q.from(t,s),l=o.length;if(l===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%l]}return this};const Sr={};function Yi(n,t,e){Sr[n]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:Reflect.apply(t,this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}Yi("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Yi("ERR_INVALID_ARG_TYPE",function(n,t){return`The "${n}" argument must be of type number. Received type ${typeof t}`},TypeError);Yi("ERR_OUT_OF_RANGE",function(n,t,e){let r=`The value of "${n}" is out of range.`,s=e;return Number.isInteger(e)&&Math.abs(e)>2**32?s=Gs(String(e)):typeof e=="bigint"&&(s=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(s=Gs(s)),s+="n"),r+=` It must be ${t}. Received ${s}`,r},RangeError);function Gs(n){let t="",e=n.length;const r=n[0]==="-"?1:0;for(;e>=r+4;e-=3)t=`_${n.slice(e-3,e)}${t}`;return`${n.slice(0,e)}${t}`}function iu(n,t,e){Pr(t,"offset"),(n[t]===void 0||n[t+e]===void 0)&&jr(t,n.length-(e+1))}function na(n,t,e,r,s,i){if(n>e||n<t){const o=typeof t=="bigint"?"n":"";let l;throw l=t===0||t===BigInt(0)?`>= 0${o} and < 2${o} ** ${(i+1)*8}${o}`:`>= -(2${o} ** ${(i+1)*8-1}${o}) and < 2 ** ${(i+1)*8-1}${o}`,new Sr.ERR_OUT_OF_RANGE("value",l,n)}iu(r,s,i)}function Pr(n,t){if(typeof n!="number")throw new Sr.ERR_INVALID_ARG_TYPE(t,"number",n)}function jr(n,t,e){throw Math.floor(n)!==n?(Pr(n,e),new Sr.ERR_OUT_OF_RANGE("offset","an integer",n)):t<0?new Sr.ERR_BUFFER_OUT_OF_BOUNDS:new Sr.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,n)}const su=/[^\w+/-]/g;function ou(n){if(n=n.split("=")[0],n=n.trim().replace(su,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function Oi(n,t){t=t||Number.POSITIVE_INFINITY;let e;const r=n.length;let s=null;const i=[];for(let o=0;o<r;++o){if(e=n.charCodeAt(o),e>55295&&e<57344){if(!s){if(e>56319){(t-=3)>-1&&i.push(239,191,189);continue}else if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}s=e;continue}if(e<56320){(t-=3)>-1&&i.push(239,191,189),s=e;continue}e=(s-55296<<10|e-56320)+65536}else s&&(t-=3)>-1&&i.push(239,191,189);if(s=null,e<128){if((t-=1)<0)break;i.push(e)}else if(e<2048){if((t-=2)<0)break;i.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;i.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return i}function au(n){const t=[];for(let e=0;e<n.length;++e)t.push(n.charCodeAt(e)&255);return t}function cu(n,t){let e,r,s;const i=[];for(let o=0;o<n.length&&!((t-=2)<0);++o)e=n.charCodeAt(o),r=e>>8,s=e%256,i.push(s,r);return i}function ia(n){return zc(ou(n))}function _n(n,t,e,r){let s;for(s=0;s<r&&!(s+e>=t.length||s>=n.length);++s)t[s+e]=n[s];return s}function Ce(n,t){return n instanceof t||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===t.name}function Xi(n){return n!==n}const uu=(function(){const n="0123456789abcdef",t=Array.from({length:256});for(let e=0;e<16;++e){const r=e*16;for(let s=0;s<16;++s)t[r+s]=n[e]+n[s]}return t})();function er(n){return typeof BigInt>"u"?lu:n}function lu(){throw new Error("BigInt not supported")}class sa extends Blob{__unenv__=!0;size=0;type="";name="";lastModified=0;constructor(...t){throw super(...t),new Error("[unenv] buffer.File is not implemented")}arrayBuffer(){throw new Error("Not implemented")}slice(){throw new Error("Not implemented")}text(){throw new Error("Not implemented")}stream(){throw new Error("Not implemented")}bytes(){throw new Error("Not implemented")}}const nt=globalThis.Buffer||q,oa=globalThis.Blob,aa=In("buffer.resolveObjectURL"),ca=In("buffer.transcode"),ua=In("buffer.isUtf8"),la=In("buffer.isAscii"),ha=globalThis.btoa.bind(globalThis),fa=globalThis.atob.bind(globalThis),Ji=0,da={MAX_LENGTH:ji,MAX_STRING_LENGTH:Ji},hu={Buffer:nt,SlowBuffer:Go,kMaxLength:ji,INSPECT_MAX_BYTES:Hi,Blob:oa,resolveObjectURL:aa,transcode:ca,btoa:ha,atob:fa,kStringMaxLength:Ji,constants:da,isUtf8:ua,isAscii:la,File:sa},fu=Object.freeze(Object.defineProperty({__proto__:null,Blob:oa,Buffer:nt,File:sa,INSPECT_MAX_BYTES:Hi,SlowBuffer:Go,atob:fa,btoa:ha,constants:da,default:hu,isAscii:la,isUtf8:ua,kMaxLength:ji,kStringMaxLength:Ji,resolveObjectURL:aa,transcode:ca},Symbol.toStringTag,{value:"Module"})),yr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Gr(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Fr(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function He(n,...t){if(!Gr(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function pa(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Fr(n.outputLen),Fr(n.blockLen)}function Ar(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function ga(n,t){He(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function du(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function tr(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function ci(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Ae(n,t){return n<<32-t|n>>>t}const pu=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function gu(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function yu(n){for(let t=0;t<n.length;t++)n[t]=gu(n[t]);return n}const Zs=pu?n=>n:yu,ya=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",mu=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function cr(n){if(He(n),ya)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=mu[n[e]];return t}const ze={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ys(n){if(n>=ze._0&&n<=ze._9)return n-ze._0;if(n>=ze.A&&n<=ze.F)return n-(ze.A-10);if(n>=ze.a&&n<=ze.f)return n-(ze.a-10)}function pn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(ya)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=Ys(n.charCodeAt(i)),l=Ys(n.charCodeAt(i+1));if(o===void 0||l===void 0){const h=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+i)}r[s]=o*16+l}return r}function wu(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function An(n){return typeof n=="string"&&(n=wu(n)),He(n),n}function Me(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];He(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class Qi{}function ts(n){const t=r=>n().update(An(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function es(n=32){if(yr&&typeof yr.getRandomValues=="function")return yr.getRandomValues(new Uint8Array(n));if(yr&&typeof yr.randomBytes=="function")return Uint8Array.from(yr.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function bu(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),l=Number(e&i),h=r?4:0,g=r?0:4;n.setUint32(t+h,o,r),n.setUint32(t+g,l,r)}function ku(n,t,e){return n&t^~n&e}function vu(n,t,e){return n&t^n&e^t&e}class ma extends Qi{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=ci(this.buffer)}update(t){Ar(this),t=An(t),He(t);const{view:e,buffer:r,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const l=Math.min(s-this.pos,i-o);if(l===s){const h=ci(t);for(;s<=i-o;o+=s)this.process(h,o);continue}r.set(t.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ar(this),ga(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,tr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let v=o;v<s;v++)e[v]=0;bu(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=ci(t),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=h/4,b=this.get();if(g>b.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<g;v++)l.setUint32(4*v,b[v],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=l,s%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const je=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fe=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),en=BigInt(2**32-1),Xs=BigInt(32);function Su(n,t=!1){return t?{h:Number(n&en),l:Number(n>>Xs&en)}:{h:Number(n>>Xs&en)|0,l:Number(n&en)|0}}function wa(n,t=!1){const e=n.length;let r=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l}=Su(n[i],t);[r[i],s[i]]=[o,l]}return[r,s]}const Js=(n,t,e)=>n>>>e,Qs=(n,t,e)=>n<<32-e|t>>>e,mr=(n,t,e)=>n>>>e|t<<32-e,wr=(n,t,e)=>n<<32-e|t>>>e,rn=(n,t,e)=>n<<64-e|t>>>e-32,nn=(n,t,e)=>n>>>e-32|t<<64-e,Eu=(n,t,e)=>n<<e|t>>>32-e,Iu=(n,t,e)=>t<<e|n>>>32-e,xu=(n,t,e)=>t<<e-32|n>>>64-e,_u=(n,t,e)=>n<<e-32|t>>>64-e;function Ke(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const Au=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Bu=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,Ru=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),Mu=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,Tu=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),Pu=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,Lu=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ge=new Uint32Array(64);class Cu extends ma{constructor(t=32){super(64,t,8,!1),this.A=je[0]|0,this.B=je[1]|0,this.C=je[2]|0,this.D=je[3]|0,this.E=je[4]|0,this.F=je[5]|0,this.G=je[6]|0,this.H=je[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:l,H:h}=this;return[t,e,r,s,i,o,l,h]}set(t,e,r,s,i,o,l,h){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=l|0,this.H=h|0}process(t,e){for(let v=0;v<16;v++,e+=4)Ge[v]=t.getUint32(e,!1);for(let v=16;v<64;v++){const I=Ge[v-15],S=Ge[v-2],A=Ae(I,7)^Ae(I,18)^I>>>3,R=Ae(S,17)^Ae(S,19)^S>>>10;Ge[v]=R+Ge[v-7]+A+Ge[v-16]|0}let{A:r,B:s,C:i,D:o,E:l,F:h,G:g,H:b}=this;for(let v=0;v<64;v++){const I=Ae(l,6)^Ae(l,11)^Ae(l,25),S=b+I+ku(l,h,g)+Lu[v]+Ge[v]|0,R=(Ae(r,2)^Ae(r,13)^Ae(r,22))+vu(r,s,i)|0;b=g,g=h,h=l,l=o+S|0,o=i,i=s,s=r,r=S+R|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,l=l+this.E|0,h=h+this.F|0,g=g+this.G|0,b=b+this.H|0,this.set(r,s,i,o,l,h,g,b)}roundClean(){tr(Ge)}destroy(){this.set(0,0,0,0,0,0,0,0),tr(this.buffer)}}const ba=wa(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Ou=ba[0],Uu=ba[1],Ze=new Uint32Array(80),Ye=new Uint32Array(80);class Nu extends ma{constructor(t=64){super(128,t,16,!1),this.Ah=fe[0]|0,this.Al=fe[1]|0,this.Bh=fe[2]|0,this.Bl=fe[3]|0,this.Ch=fe[4]|0,this.Cl=fe[5]|0,this.Dh=fe[6]|0,this.Dl=fe[7]|0,this.Eh=fe[8]|0,this.El=fe[9]|0,this.Fh=fe[10]|0,this.Fl=fe[11]|0,this.Gh=fe[12]|0,this.Gl=fe[13]|0,this.Hh=fe[14]|0,this.Hl=fe[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:l,Dl:h,Eh:g,El:b,Fh:v,Fl:I,Gh:S,Gl:A,Hh:R,Hl:T}=this;return[t,e,r,s,i,o,l,h,g,b,v,I,S,A,R,T]}set(t,e,r,s,i,o,l,h,g,b,v,I,S,A,R,T){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=h|0,this.Eh=g|0,this.El=b|0,this.Fh=v|0,this.Fl=I|0,this.Gh=S|0,this.Gl=A|0,this.Hh=R|0,this.Hl=T|0}process(t,e){for(let K=0;K<16;K++,e+=4)Ze[K]=t.getUint32(e),Ye[K]=t.getUint32(e+=4);for(let K=16;K<80;K++){const j=Ze[K-15]|0,X=Ye[K-15]|0,Q=mr(j,X,1)^mr(j,X,8)^Js(j,X,7),it=wr(j,X,1)^wr(j,X,8)^Qs(j,X,7),et=Ze[K-2]|0,M=Ye[K-2]|0,P=mr(et,M,19)^rn(et,M,61)^Js(et,M,6),U=wr(et,M,19)^nn(et,M,61)^Qs(et,M,6),z=Ru(it,U,Ye[K-7],Ye[K-16]),p=Mu(z,Q,P,Ze[K-7],Ze[K-16]);Ze[K]=p|0,Ye[K]=z|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:l,Cl:h,Dh:g,Dl:b,Eh:v,El:I,Fh:S,Fl:A,Gh:R,Gl:T,Hh:C,Hl:D}=this;for(let K=0;K<80;K++){const j=mr(v,I,14)^mr(v,I,18)^rn(v,I,41),X=wr(v,I,14)^wr(v,I,18)^nn(v,I,41),Q=v&S^~v&R,it=I&A^~I&T,et=Tu(D,X,it,Uu[K],Ye[K]),M=Pu(et,C,j,Q,Ou[K],Ze[K]),P=et|0,U=mr(r,s,28)^rn(r,s,34)^rn(r,s,39),z=wr(r,s,28)^nn(r,s,34)^nn(r,s,39),p=r&i^r&l^i&l,a=s&o^s&h^o&h;C=R|0,D=T|0,R=S|0,T=A|0,S=v|0,A=I|0,{h:v,l:I}=Ke(g|0,b|0,M|0,P|0),g=l|0,b=h|0,l=i|0,h=o|0,i=r|0,o=s|0;const f=Au(P,z,a);r=Bu(f,M,U,p),s=f|0}({h:r,l:s}=Ke(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ke(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:h}=Ke(this.Ch|0,this.Cl|0,l|0,h|0),{h:g,l:b}=Ke(this.Dh|0,this.Dl|0,g|0,b|0),{h:v,l:I}=Ke(this.Eh|0,this.El|0,v|0,I|0),{h:S,l:A}=Ke(this.Fh|0,this.Fl|0,S|0,A|0),{h:R,l:T}=Ke(this.Gh|0,this.Gl|0,R|0,T|0),{h:C,l:D}=Ke(this.Hh|0,this.Hl|0,C|0,D|0),this.set(r,s,i,o,l,h,g,b,v,I,S,A,R,T,C,D)}roundClean(){tr(Ze,Ye)}destroy(){tr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ka=ts(()=>new Cu),zu=ts(()=>new Nu);const rs=BigInt(0),Ui=BigInt(1);function ur(n,t=""){if(typeof n!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof n)}return n}function Ie(n,t,e=""){const r=Gr(n),s=n?.length,i=t!==void 0;if(!r||i&&s!==t){const o=e&&`"${e}" `,l=i?` of length ${t}`:"",h=r?`length=${s}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+l+", got "+h)}return n}function sn(n){const t=n.toString(16);return t.length&1?"0"+t:t}function va(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?rs:BigInt("0x"+n)}function Bn(n){return va(cr(n))}function Dr(n){return He(n),va(cr(Uint8Array.from(n).reverse()))}function ns(n,t){return pn(n.toString(16).padStart(t*2,"0"))}function Sa(n,t){return ns(n,t).reverse()}function St(n,t,e){let r;if(typeof t=="string")try{r=pn(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(Gr(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}function to(n){return Uint8Array.from(n)}const ui=n=>typeof n=="bigint"&&rs<=n;function Ku(n,t,e){return ui(n)&&ui(t)&&ui(e)&&t<=n&&n<e}function Ni(n,t,e,r){if(!Ku(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Ea(n){let t;for(t=0;n>rs;n>>=Ui,t+=1);return t}const Zr=n=>(Ui<<BigInt(n))-Ui;function qu(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const r=S=>new Uint8Array(S),s=S=>Uint8Array.of(S);let i=r(n),o=r(n),l=0;const h=()=>{i.fill(1),o.fill(0),l=0},g=(...S)=>e(o,i,...S),b=(S=r(0))=>{o=g(s(0),S),i=g(),S.length!==0&&(o=g(s(1),S),i=g())},v=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let S=0;const A=[];for(;S<t;){i=g();const R=i.slice();A.push(R),S+=i.length}return Me(...A)};return(S,A)=>{h(),b(S);let R;for(;!(R=A(v()));)b();return h(),R}}function Yr(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,o){const l=n[s];if(o&&l===void 0)return;const h=typeof l;if(h!==i||l===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${h}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(e).forEach(([s,i])=>r(s,i,!0))}function gn(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}const ke=BigInt(0),he=BigInt(1),ir=BigInt(2),Ia=BigInt(3),xa=BigInt(4),_a=BigInt(5),Fu=BigInt(7),Aa=BigInt(8),Du=BigInt(9),Ba=BigInt(16);function ie(n,t){const e=n%t;return e>=ke?e:t+e}function vt(n,t,e){let r=n;for(;t-- >ke;)r*=r,r%=e;return r}function eo(n,t){if(n===ke)throw new Error("invert: expected non-zero number");if(t<=ke)throw new Error("invert: expected positive modulus, got "+t);let e=ie(n,t),r=t,s=ke,i=he;for(;e!==ke;){const l=r/e,h=r%e,g=s-i*l;r=e,e=h,s=i,i=g}if(r!==he)throw new Error("invert: does not exist");return ie(s,t)}function is(n,t,e){if(!n.eql(n.sqr(t),e))throw new Error("Cannot find square root")}function Ra(n,t){const e=(n.ORDER+he)/xa,r=n.pow(t,e);return is(n,r,t),r}function Wu(n,t){const e=(n.ORDER-_a)/Aa,r=n.mul(t,ir),s=n.pow(r,e),i=n.mul(t,s),o=n.mul(n.mul(i,ir),s),l=n.mul(i,n.sub(o,n.ONE));return is(n,l,t),l}function $u(n){const t=fr(n),e=Ma(n),r=e(t,t.neg(t.ONE)),s=e(t,r),i=e(t,t.neg(r)),o=(n+Fu)/Ba;return(l,h)=>{let g=l.pow(h,o),b=l.mul(g,r);const v=l.mul(g,s),I=l.mul(g,i),S=l.eql(l.sqr(b),h),A=l.eql(l.sqr(v),h);g=l.cmov(g,b,S),b=l.cmov(I,v,A);const R=l.eql(l.sqr(b),h),T=l.cmov(g,b,R);return is(l,T,h),T}}function Ma(n){if(n<Ia)throw new Error("sqrt is not defined for small field");let t=n-he,e=0;for(;t%ir===ke;)t/=ir,e++;let r=ir;const s=fr(n);for(;ro(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return Ra;let i=s.pow(r,t);const o=(t+he)/ir;return function(h,g){if(h.is0(g))return g;if(ro(h,g)!==1)throw new Error("Cannot find square root");let b=e,v=h.mul(h.ONE,i),I=h.pow(g,t),S=h.pow(g,o);for(;!h.eql(I,h.ONE);){if(h.is0(I))return h.ZERO;let A=1,R=h.sqr(I);for(;!h.eql(R,h.ONE);)if(A++,R=h.sqr(R),A===b)throw new Error("Cannot find square root");const T=he<<BigInt(b-A-1),C=h.pow(v,T);b=A,v=h.sqr(C),I=h.mul(I,v),S=h.mul(S,C)}return S}}function Vu(n){return n%xa===Ia?Ra:n%Aa===_a?Wu:n%Ba===Du?$u(n):Ma(n)}const Hu=(n,t)=>(ie(n,t)&he)===he,ju=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Gu(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=ju.reduce((r,s)=>(r[s]="function",r),t);return Yr(n,e),n}function Zu(n,t,e){if(e<ke)throw new Error("invalid exponent, negatives unsupported");if(e===ke)return n.ONE;if(e===he)return t;let r=n.ONE,s=t;for(;e>ke;)e&he&&(r=n.mul(r,s)),s=n.sqr(s),e>>=he;return r}function Ta(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),s=t.reduce((o,l,h)=>n.is0(l)?o:(r[h]=o,n.mul(o,l)),n.ONE),i=n.inv(s);return t.reduceRight((o,l,h)=>n.is0(l)?o:(r[h]=n.mul(o,r[h]),n.mul(o,l)),i),r}function ro(n,t){const e=(n.ORDER-he)/ir,r=n.pow(t,e),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Pa(n,t){t!==void 0&&Fr(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function fr(n,t,e=!1,r={}){if(n<=ke)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i,o=!1,l;if(typeof t=="object"&&t!=null){if(r.sqrt||e)throw new Error("cannot specify opts in two arguments");const I=t;I.BITS&&(s=I.BITS),I.sqrt&&(i=I.sqrt),typeof I.isLE=="boolean"&&(e=I.isLE),typeof I.modFromBytes=="boolean"&&(o=I.modFromBytes),l=I.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:h,nByteLength:g}=Pa(n,s);if(g>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let b;const v=Object.freeze({ORDER:n,isLE:e,BITS:h,BYTES:g,MASK:Zr(h),ZERO:ke,ONE:he,allowedLengths:l,create:I=>ie(I,n),isValid:I=>{if(typeof I!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof I);return ke<=I&&I<n},is0:I=>I===ke,isValidNot0:I=>!v.is0(I)&&v.isValid(I),isOdd:I=>(I&he)===he,neg:I=>ie(-I,n),eql:(I,S)=>I===S,sqr:I=>ie(I*I,n),add:(I,S)=>ie(I+S,n),sub:(I,S)=>ie(I-S,n),mul:(I,S)=>ie(I*S,n),pow:(I,S)=>Zu(v,I,S),div:(I,S)=>ie(I*eo(S,n),n),sqrN:I=>I*I,addN:(I,S)=>I+S,subN:(I,S)=>I-S,mulN:(I,S)=>I*S,inv:I=>eo(I,n),sqrt:i||(I=>(b||(b=Vu(n)),b(v,I))),toBytes:I=>e?Sa(I,g):ns(I,g),fromBytes:(I,S=!0)=>{if(l){if(!l.includes(I.length)||I.length>g)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+I.length);const R=new Uint8Array(g);R.set(I,e?0:R.length-I.length),I=R}if(I.length!==g)throw new Error("Field.fromBytes: expected "+g+" bytes, got "+I.length);let A=e?Dr(I):Bn(I);if(o&&(A=ie(A,n)),!S&&!v.isValid(A))throw new Error("invalid field element: outside of range 0..ORDER");return A},invertBatch:I=>Ta(v,I),cmov:(I,S,A)=>A?S:I});return Object.freeze(v)}function La(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Ca(n){const t=La(n);return t+Math.ceil(t/2)}function Yu(n,t,e=!1){const r=n.length,s=La(t),i=Ca(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=e?Dr(n):Bn(n),l=ie(o,t-he)+he;return e?Sa(l,s):ns(l,s)}const Br=BigInt(0),sr=BigInt(1);function yn(n,t){const e=t.negate();return n?e:t}function or(n,t){const e=Ta(n.Fp,t.map(r=>r.Z));return t.map((r,s)=>n.fromAffine(r.toAffine(e[s])))}function Oa(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function li(n,t){Oa(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=Zr(n),o=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function no(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=e;let l=Number(n&s),h=n>>o;l>r&&(l-=i,h+=sr);const g=t*r,b=g+Math.abs(l)-1,v=l===0,I=l<0,S=t%2!==0;return{nextN:h,offset:b,isZero:v,isNeg:I,isNegF:S,offsetF:g}}function Xu(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Ju(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const hi=new WeakMap,Ua=new WeakMap;function fi(n){return Ua.get(n)||1}function io(n){if(n!==Br)throw new Error("invalid wNAF")}class Na{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,r=this.ZERO){let s=t;for(;e>Br;)e&sr&&(r=r.add(s)),s=s.double(),e>>=sr;return r}precomputeWindow(t,e){const{windows:r,windowSize:s}=li(e,this.bits),i=[];let o=t,l=o;for(let h=0;h<r;h++){l=o,i.push(l);for(let g=1;g<s;g++)l=l.add(o),i.push(l);o=l.double()}return i}wNAF(t,e,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=li(t,this.bits);for(let l=0;l<o.windows;l++){const{nextN:h,offset:g,isZero:b,isNeg:v,isNegF:I,offsetF:S}=no(r,l,o);r=h,b?i=i.add(yn(I,e[S])):s=s.add(yn(v,e[g]))}return io(r),{p:s,f:i}}wNAFUnsafe(t,e,r,s=this.ZERO){const i=li(t,this.bits);for(let o=0;o<i.windows&&r!==Br;o++){const{nextN:l,offset:h,isZero:g,isNeg:b}=no(r,o,i);if(r=l,!g){const v=e[h];s=s.add(b?v.negate():v)}}return io(r),s}getPrecomputes(t,e,r){let s=hi.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof r=="function"&&(s=r(s)),hi.set(e,s))),s}cached(t,e,r){const s=fi(t);return this.wNAF(s,this.getPrecomputes(s,t,r),e)}unsafe(t,e,r,s){const i=fi(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,s)}createCache(t,e){Oa(e,this.bits),Ua.set(t,e),hi.delete(t)}hasCache(t){return fi(t)!==1}}function Qu(n,t,e,r){let s=t,i=n.ZERO,o=n.ZERO;for(;e>Br||r>Br;)e&sr&&(i=i.add(s)),r&sr&&(o=o.add(s)),s=s.double(),e>>=sr,r>>=sr;return{p1:i,p2:o}}function za(n,t,e,r){Xu(e,n),Ju(r,t);const s=e.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,l=Ea(BigInt(s));let h=1;l>12?h=l-3:l>4?h=l-2:l>0&&(h=2);const g=Zr(h),b=new Array(Number(g)+1).fill(o),v=Math.floor((t.BITS-1)/h)*h;let I=o;for(let S=v;S>=0;S-=h){b.fill(o);for(let R=0;R<i;R++){const T=r[R],C=Number(T>>BigInt(S)&g);b[C]=b[C].add(e[R])}let A=o;for(let R=b.length-1,T=o;R>0;R--)T=T.add(b[R]),A=A.add(T);if(I=I.add(A),S!==0)for(let R=0;R<h;R++)I=I.double()}return I}function so(n,t,e){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Gu(t),t}else return fr(n,{isLE:e})}function Ka(n,t,e={},r){if(r===void 0&&(r=n==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const h of["p","n","h"]){const g=t[h];if(!(typeof g=="bigint"&&g>Br))throw new Error(`CURVE.${h} must be positive bigint`)}const s=so(t.p,e.Fp,r),i=so(t.n,e.Fn,r),l=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const h of l)if(!s.isValid(t[h]))throw new Error(`CURVE.${h} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}const Xe=BigInt(0),se=BigInt(1),di=BigInt(2),tl=BigInt(8);function el(n,t,e,r){const s=n.sqr(e),i=n.sqr(r),o=n.add(n.mul(t.a,s),i),l=n.add(n.ONE,n.mul(t.d,n.mul(s,i)));return n.eql(o,l)}function rl(n,t={}){const e=Ka("edwards",n,t,t.FpFnLE),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:o}=i;Yr(t,{},{uvRatio:"function"});const l=di<<BigInt(s.BYTES*8)-se,h=T=>r.create(T),g=t.uvRatio||((T,C)=>{try{return{isValid:!0,value:r.sqrt(r.div(T,C))}}catch{return{isValid:!1,value:Xe}}});if(!el(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function b(T,C,D=!1){const K=D?se:Xe;return Ni("coordinate "+T,C,K,l),C}function v(T){if(!(T instanceof A))throw new Error("ExtendedPoint expected")}const I=gn((T,C)=>{const{X:D,Y:K,Z:j}=T,X=T.is0();C==null&&(C=X?tl:r.inv(j));const Q=h(D*C),it=h(K*C),et=r.mul(j,C);if(X)return{x:Xe,y:se};if(et!==se)throw new Error("invZ was invalid");return{x:Q,y:it}}),S=gn(T=>{const{a:C,d:D}=i;if(T.is0())throw new Error("bad point: ZERO");const{X:K,Y:j,Z:X,T:Q}=T,it=h(K*K),et=h(j*j),M=h(X*X),P=h(M*M),U=h(it*C),z=h(M*h(U+et)),p=h(P+h(D*h(it*et)));if(z!==p)throw new Error("bad point: equation left != right (1)");const a=h(K*j),f=h(X*Q);if(a!==f)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(C,D,K,j){this.X=b("x",C),this.Y=b("y",D),this.Z=b("z",K,!0),this.T=b("t",j),Object.freeze(this)}static CURVE(){return i}static fromAffine(C){if(C instanceof A)throw new Error("extended point not allowed");const{x:D,y:K}=C||{};return b("x",D),b("y",K),new A(D,K,se,h(D*K))}static fromBytes(C,D=!1){const K=r.BYTES,{a:j,d:X}=i;C=to(Ie(C,K,"point")),ur(D,"zip215");const Q=to(C),it=C[K-1];Q[K-1]=it&-129;const et=Dr(Q),M=D?l:r.ORDER;Ni("point.y",et,Xe,M);const P=h(et*et),U=h(P-se),z=h(X*P-j);let{isValid:p,value:a}=g(U,z);if(!p)throw new Error("bad point: invalid y coordinate");const f=(a&se)===se,d=(it&128)!==0;if(!D&&a===Xe&&d)throw new Error("bad point: x=0 and x_0=1");return d!==f&&(a=h(-a)),A.fromAffine({x:a,y:et})}static fromHex(C,D=!1){return A.fromBytes(St("point",C),D)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(C=8,D=!0){return R.createCache(this,C),D||this.multiply(di),this}assertValidity(){S(this)}equals(C){v(C);const{X:D,Y:K,Z:j}=this,{X,Y:Q,Z:it}=C,et=h(D*it),M=h(X*j),P=h(K*it),U=h(Q*j);return et===M&&P===U}is0(){return this.equals(A.ZERO)}negate(){return new A(h(-this.X),this.Y,this.Z,h(-this.T))}double(){const{a:C}=i,{X:D,Y:K,Z:j}=this,X=h(D*D),Q=h(K*K),it=h(di*h(j*j)),et=h(C*X),M=D+K,P=h(h(M*M)-X-Q),U=et+Q,z=U-it,p=et-Q,a=h(P*z),f=h(U*p),d=h(P*p),m=h(z*U);return new A(a,f,m,d)}add(C){v(C);const{a:D,d:K}=i,{X:j,Y:X,Z:Q,T:it}=this,{X:et,Y:M,Z:P,T:U}=C,z=h(j*et),p=h(X*M),a=h(it*K*U),f=h(Q*P),d=h((j+X)*(et+M)-z-p),m=f-a,k=f+a,x=h(p-D*z),B=h(d*m),w=h(k*x),c=h(d*x),u=h(m*k);return new A(B,w,u,c)}subtract(C){return this.add(C.negate())}multiply(C){if(!s.isValidNot0(C))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:D,f:K}=R.cached(this,C,j=>or(A,j));return or(A,[D,K])[0]}multiplyUnsafe(C,D=A.ZERO){if(!s.isValid(C))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return C===Xe?A.ZERO:this.is0()||C===se?this:R.unsafe(this,C,K=>or(A,K),D)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return R.unsafe(this,i.n).is0()}toAffine(C){return I(this,C)}clearCofactor(){return o===se?this:this.multiplyUnsafe(o)}toBytes(){const{x:C,y:D}=this.toAffine(),K=r.toBytes(D);return K[K.length-1]|=C&se?128:0,K}toHex(){return cr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(C){return or(A,C)}static msm(C,D){return za(A,s,C,D)}_setWindowSize(C){this.precompute(C)}toRawBytes(){return this.toBytes()}}A.BASE=new A(i.Gx,i.Gy,se,h(i.Gx*i.Gy)),A.ZERO=new A(Xe,se,se,Xe),A.Fp=r,A.Fn=s;const R=new Na(A,s.BITS);return A.BASE.precompute(8),A}function nl(n,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');Yr(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=e,{BASE:s,Fp:i,Fn:o}=n,l=e.randomBytes||es,h=e.adjustScalarBytes||(M=>M),g=e.domain||((M,P,U)=>{if(ur(U,"phflag"),P.length||U)throw new Error("Contexts/pre-hash are not supported");return M});function b(M){return o.create(Dr(M))}function v(M){const P=K.secretKey;M=St("private key",M,P);const U=St("hashed private key",t(M),2*P),z=h(U.slice(0,P)),p=U.slice(P,2*P),a=b(z);return{head:z,prefix:p,scalar:a}}function I(M){const{head:P,prefix:U,scalar:z}=v(M),p=s.multiply(z),a=p.toBytes();return{head:P,prefix:U,scalar:z,point:p,pointBytes:a}}function S(M){return I(M).pointBytes}function A(M=Uint8Array.of(),...P){const U=Me(...P);return b(t(g(U,St("context",M),!!r)))}function R(M,P,U={}){M=St("message",M),r&&(M=r(M));const{prefix:z,scalar:p,pointBytes:a}=I(P),f=A(U.context,z,M),d=s.multiply(f).toBytes(),m=A(U.context,d,a,M),k=o.create(f+m*p);if(!o.isValid(k))throw new Error("sign failed: invalid s");const x=Me(d,o.toBytes(k));return Ie(x,K.signature,"result")}const T={zip215:!0};function C(M,P,U,z=T){const{context:p,zip215:a}=z,f=K.signature;M=St("signature",M,f),P=St("message",P),U=St("publicKey",U,K.publicKey),a!==void 0&&ur(a,"zip215"),r&&(P=r(P));const d=f/2,m=M.subarray(0,d),k=Dr(M.subarray(d,f));let x,B,w;try{x=n.fromBytes(U,a),B=n.fromBytes(m,a),w=s.multiplyUnsafe(k)}catch{return!1}if(!a&&x.isSmallOrder())return!1;const c=A(p,B.toBytes(),x.toBytes(),P);return B.add(x.multiplyUnsafe(c)).subtract(w).clearCofactor().is0()}const D=i.BYTES,K={secretKey:D,publicKey:D,signature:2*D,seed:D};function j(M=l(K.seed)){return Ie(M,K.seed,"seed")}function X(M){const P=et.randomSecretKey(M);return{secretKey:P,publicKey:S(P)}}function Q(M){return Gr(M)&&M.length===o.BYTES}function it(M,P){try{return!!n.fromBytes(M,P)}catch{return!1}}const et={getExtendedPublicKey:I,randomSecretKey:j,isValidSecretKey:Q,isValidPublicKey:it,toMontgomery(M){const{y:P}=n.fromBytes(M),U=K.publicKey,z=U===32;if(!z&&U!==57)throw new Error("only defined for 25519 and 448");const p=z?i.div(se+P,se-P):i.div(P-se,P+se);return i.toBytes(p)},toMontgomerySecret(M){const P=K.secretKey;Ie(M,P);const U=t(M.subarray(0,P));return h(U).subarray(0,P)},randomPrivateKey:j,precompute(M=8,P=n.BASE){return P.precompute(M,!1)}};return Object.freeze({keygen:X,getPublicKey:S,sign:R,verify:C,utils:et,Point:n,lengths:K})}function il(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=fr(t.n,n.nBitLength,!0),s={Fp:e,Fn:r,uvRatio:n.uvRatio},i={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:s,hash:n.hash,eddsaOpts:i}}function sl(n,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:n,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function ol(n){const{CURVE:t,curveOpts:e,hash:r,eddsaOpts:s}=il(n),i=rl(t,e),o=nl(i,r,s);return sl(n,o)}const al=BigInt(1),oo=BigInt(2);BigInt(3);const cl=BigInt(5),ul=BigInt(8),ss=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),qa={p:ss,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:ul,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function ll(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=ss,l=n*n%i*n%i,h=vt(l,oo,i)*l%i,g=vt(h,al,i)*n%i,b=vt(g,cl,i)*g%i,v=vt(b,t,i)*b%i,I=vt(v,e,i)*v%i,S=vt(I,r,i)*I%i,A=vt(S,s,i)*S%i,R=vt(A,s,i)*S%i,T=vt(R,t,i)*b%i;return{pow_p_5_8:vt(T,oo,i)*n%i,b2:l}}function hl(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const ao=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function fl(n,t){const e=ss,r=ie(t*t*t,e),s=ie(r*r*t,e),i=ll(n*s).pow_p_5_8;let o=ie(n*r*i,e);const l=ie(t*o*o,e),h=o,g=ie(o*ao,e),b=l===n,v=l===ie(-n,e),I=l===ie(-n*ao,e);return b&&(o=h),(v||I)&&(o=g),Hu(o,e)&&(o=ie(-o,e)),{isValid:b||v,value:o}}const dl=fr(qa.p,{isLE:!0}),pl={...qa,Fp:dl,hash:zu,adjustScalarBytes:hl,uvRatio:fl},Lr=ol(pl);function Rn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Mn(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),e}var ln={exports:{}};const os=Mn(fu);var gl=ln.exports,co;function Fa(){return co||(co=1,(function(n){(function(t,e){function r(p,a){if(!p)throw new Error(a||"Assertion failed")}function s(p,a){p.super_=a;var f=function(){};f.prototype=a.prototype,p.prototype=new f,p.prototype.constructor=p}function i(p,a,f){if(i.isBN(p))return p;this.negative=0,this.words=null,this.length=0,this.red=null,p!==null&&((a==="le"||a==="be")&&(f=a,a=10),this._init(p||0,a||10,f||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=os.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,f){return a.cmp(f)>0?a:f},i.min=function(a,f){return a.cmp(f)<0?a:f},i.prototype._init=function(a,f,d){if(typeof a=="number")return this._initNumber(a,f,d);if(typeof a=="object")return this._initArray(a,f,d);f==="hex"&&(f=16),r(f===(f|0)&&f>=2&&f<=36),a=a.toString().replace(/\s+/g,"");var m=0;a[0]==="-"&&(m++,this.negative=1),m<a.length&&(f===16?this._parseHex(a,m,d):(this._parseBase(a,f,m),d==="le"&&this._initArray(this.toArray(),f,d)))},i.prototype._initNumber=function(a,f,d){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),f,d)},i.prototype._initArray=function(a,f,d){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var k,x,B=0;if(d==="be")for(m=a.length-1,k=0;m>=0;m-=3)x=a[m]|a[m-1]<<8|a[m-2]<<16,this.words[k]|=x<<B&67108863,this.words[k+1]=x>>>26-B&67108863,B+=24,B>=26&&(B-=26,k++);else if(d==="le")for(m=0,k=0;m<a.length;m+=3)x=a[m]|a[m+1]<<8|a[m+2]<<16,this.words[k]|=x<<B&67108863,this.words[k+1]=x>>>26-B&67108863,B+=24,B>=26&&(B-=26,k++);return this._strip()};function l(p,a){var f=p.charCodeAt(a);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;r(!1,"Invalid character in "+p)}function h(p,a,f){var d=l(p,f);return f-1>=a&&(d|=l(p,f-1)<<4),d}i.prototype._parseHex=function(a,f,d){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var k=0,x=0,B;if(d==="be")for(m=a.length-1;m>=f;m-=2)B=h(a,f,m)<<k,this.words[x]|=B&67108863,k>=18?(k-=18,x+=1,this.words[x]|=B>>>26):k+=8;else{var w=a.length-f;for(m=w%2===0?f+1:f;m<a.length;m+=2)B=h(a,f,m)<<k,this.words[x]|=B&67108863,k>=18?(k-=18,x+=1,this.words[x]|=B>>>26):k+=8}this._strip()};function g(p,a,f,d){for(var m=0,k=0,x=Math.min(p.length,f),B=a;B<x;B++){var w=p.charCodeAt(B)-48;m*=d,w>=49?k=w-49+10:w>=17?k=w-17+10:k=w,r(w>=0&&k<d,"Invalid character"),m+=k}return m}i.prototype._parseBase=function(a,f,d){this.words=[0],this.length=1;for(var m=0,k=1;k<=67108863;k*=f)m++;m--,k=k/f|0;for(var x=a.length-d,B=x%m,w=Math.min(x,x-B)+d,c=0,u=d;u<w;u+=m)c=g(a,u,u+m,f),this.imuln(k),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(B!==0){var y=1;for(c=g(a,u,a.length,f),u=0;u<B;u++)y*=f;this.imuln(y),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red};function b(p,a){p.words=a.words,p.length=a.length,p.negative=a.negative,p.red=a.red}if(i.prototype._move=function(a){b(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=v}catch{i.prototype.inspect=v}else i.prototype.inspect=v;function v(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,f){a=a||10,f=f|0||1;var d;if(a===16||a==="hex"){d="";for(var m=0,k=0,x=0;x<this.length;x++){var B=this.words[x],w=((B<<m|k)&16777215).toString(16);k=B>>>24-m&16777215,m+=2,m>=26&&(m-=26,x--),k!==0||x!==this.length-1?d=I[6-w.length]+w+d:d=w+d}for(k!==0&&(d=k.toString(16)+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(a===(a|0)&&a>=2&&a<=36){var c=S[a],u=A[a];d="";var y=this.clone();for(y.negative=0;!y.isZero();){var E=y.modrn(u).toString(a);y=y.idivn(u),y.isZero()?d=E+d:d=I[c-E.length]+E+d}for(this.isZero()&&(d="0"+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,f){return this.toArrayLike(o,a,f)}),i.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)};var R=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)};i.prototype.toArrayLike=function(a,f,d){this._strip();var m=this.byteLength(),k=d||Math.max(1,m);r(m<=k,"byte array longer than desired length"),r(k>0,"Requested array length <= 0");var x=R(a,k),B=f==="le"?"LE":"BE";return this["_toArrayLike"+B](x,m),x},i.prototype._toArrayLikeLE=function(a,f){for(var d=0,m=0,k=0,x=0;k<this.length;k++){var B=this.words[k]<<x|m;a[d++]=B&255,d<a.length&&(a[d++]=B>>8&255),d<a.length&&(a[d++]=B>>16&255),x===6?(d<a.length&&(a[d++]=B>>24&255),m=0,x=0):(m=B>>>24,x+=2)}if(d<a.length)for(a[d++]=m;d<a.length;)a[d++]=0},i.prototype._toArrayLikeBE=function(a,f){for(var d=a.length-1,m=0,k=0,x=0;k<this.length;k++){var B=this.words[k]<<x|m;a[d--]=B&255,d>=0&&(a[d--]=B>>8&255),d>=0&&(a[d--]=B>>16&255),x===6?(d>=0&&(a[d--]=B>>24&255),m=0,x=0):(m=B>>>24,x+=2)}if(d>=0)for(a[d--]=m;d>=0;)a[d--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var f=a,d=0;return f>=4096&&(d+=13,f>>>=13),f>=64&&(d+=7,f>>>=7),f>=8&&(d+=4,f>>>=4),f>=2&&(d+=2,f>>>=2),d+f},i.prototype._zeroBits=function(a){if(a===0)return 26;var f=a,d=0;return(f&8191)===0&&(d+=13,f>>>=13),(f&127)===0&&(d+=7,f>>>=7),(f&15)===0&&(d+=4,f>>>=4),(f&3)===0&&(d+=2,f>>>=2),(f&1)===0&&d++,d},i.prototype.bitLength=function(){var a=this.words[this.length-1],f=this._countBits(a);return(this.length-1)*26+f};function T(p){for(var a=new Array(p.bitLength()),f=0;f<a.length;f++){var d=f/26|0,m=f%26;a[f]=p.words[d]>>>m&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var d=this._zeroBits(this.words[f]);if(a+=d,d!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var f;this.length>a.length?f=a:f=this;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]&a.words[d];return this.length=f.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var f,d;this.length>a.length?(f=this,d=a):(f=a,d=this);for(var m=0;m<d.length;m++)this.words[m]=f.words[m]^d.words[m];if(this!==f)for(;m<f.length;m++)this.words[m]=f.words[m];return this.length=f.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var f=Math.ceil(a/26)|0,d=a%26;this._expand(f),d>0&&f--;for(var m=0;m<f;m++)this.words[m]=~this.words[m]&67108863;return d>0&&(this.words[m]=~this.words[m]&67108863>>26-d),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,f){r(typeof a=="number"&&a>=0);var d=a/26|0,m=a%26;return this._expand(d+1),f?this.words[d]=this.words[d]|1<<m:this.words[d]=this.words[d]&~(1<<m),this._strip()},i.prototype.iadd=function(a){var f;if(this.negative!==0&&a.negative===0)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();var d,m;this.length>a.length?(d=this,m=a):(d=a,m=this);for(var k=0,x=0;x<m.length;x++)f=(d.words[x]|0)+(m.words[x]|0)+k,this.words[x]=f&67108863,k=f>>>26;for(;k!==0&&x<d.length;x++)f=(d.words[x]|0)+k,this.words[x]=f&67108863,k=f>>>26;if(this.length=d.length,k!==0)this.words[this.length]=k,this.length++;else if(d!==this)for(;x<d.length;x++)this.words[x]=d.words[x];return this},i.prototype.add=function(a){var f;return a.negative!==0&&this.negative===0?(a.negative=0,f=this.sub(a),a.negative^=1,f):a.negative===0&&this.negative!==0?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var d=this.cmp(a);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,k;d>0?(m=this,k=a):(m=a,k=this);for(var x=0,B=0;B<k.length;B++)f=(m.words[B]|0)-(k.words[B]|0)+x,x=f>>26,this.words[B]=f&67108863;for(;x!==0&&B<m.length;B++)f=(m.words[B]|0)+x,x=f>>26,this.words[B]=f&67108863;if(x===0&&B<m.length&&m!==this)for(;B<m.length;B++)this.words[B]=m.words[B];return this.length=Math.max(this.length,B),m!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function C(p,a,f){f.negative=a.negative^p.negative;var d=p.length+a.length|0;f.length=d,d=d-1|0;var m=p.words[0]|0,k=a.words[0]|0,x=m*k,B=x&67108863,w=x/67108864|0;f.words[0]=B;for(var c=1;c<d;c++){for(var u=w>>>26,y=w&67108863,E=Math.min(c,a.length-1),L=Math.max(0,c-p.length+1);L<=E;L++){var F=c-L|0;m=p.words[F]|0,k=a.words[L]|0,x=m*k+y,u+=x/67108864|0,y=x&67108863}f.words[c]=y|0,w=u|0}return w!==0?f.words[c]=w|0:f.length--,f._strip()}var D=function(a,f,d){var m=a.words,k=f.words,x=d.words,B=0,w,c,u,y=m[0]|0,E=y&8191,L=y>>>13,F=m[1]|0,Y=F&8191,J=F>>>13,dt=m[2]|0,pt=dt&8191,wt=dt>>>13,Nr=m[3]|0,It=Nr&8191,xt=Nr>>>13,Bs=m[4]|0,_t=Bs&8191,At=Bs>>>13,Rs=m[5]|0,Bt=Rs&8191,Rt=Rs>>>13,Ms=m[6]|0,Mt=Ms&8191,Tt=Ms>>>13,Ts=m[7]|0,Pt=Ts&8191,Lt=Ts>>>13,Ps=m[8]|0,Ct=Ps&8191,Ot=Ps>>>13,Ls=m[9]|0,Ut=Ls&8191,Nt=Ls>>>13,Cs=k[0]|0,zt=Cs&8191,Kt=Cs>>>13,Os=k[1]|0,qt=Os&8191,Ft=Os>>>13,Us=k[2]|0,Dt=Us&8191,Wt=Us>>>13,Ns=k[3]|0,$t=Ns&8191,Vt=Ns>>>13,zs=k[4]|0,Ht=zs&8191,jt=zs>>>13,Ks=k[5]|0,Gt=Ks&8191,Zt=Ks>>>13,qs=k[6]|0,Yt=qs&8191,Xt=qs>>>13,Fs=k[7]|0,Jt=Fs&8191,Qt=Fs>>>13,Ds=k[8]|0,te=Ds&8191,ee=Ds>>>13,Ws=k[9]|0,re=Ws&8191,ne=Ws>>>13;d.negative=a.negative^f.negative,d.length=19,w=Math.imul(E,zt),c=Math.imul(E,Kt),c=c+Math.imul(L,zt)|0,u=Math.imul(L,Kt);var Dn=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,w=Math.imul(Y,zt),c=Math.imul(Y,Kt),c=c+Math.imul(J,zt)|0,u=Math.imul(J,Kt),w=w+Math.imul(E,qt)|0,c=c+Math.imul(E,Ft)|0,c=c+Math.imul(L,qt)|0,u=u+Math.imul(L,Ft)|0;var Wn=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,w=Math.imul(pt,zt),c=Math.imul(pt,Kt),c=c+Math.imul(wt,zt)|0,u=Math.imul(wt,Kt),w=w+Math.imul(Y,qt)|0,c=c+Math.imul(Y,Ft)|0,c=c+Math.imul(J,qt)|0,u=u+Math.imul(J,Ft)|0,w=w+Math.imul(E,Dt)|0,c=c+Math.imul(E,Wt)|0,c=c+Math.imul(L,Dt)|0,u=u+Math.imul(L,Wt)|0;var $n=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+($n>>>26)|0,$n&=67108863,w=Math.imul(It,zt),c=Math.imul(It,Kt),c=c+Math.imul(xt,zt)|0,u=Math.imul(xt,Kt),w=w+Math.imul(pt,qt)|0,c=c+Math.imul(pt,Ft)|0,c=c+Math.imul(wt,qt)|0,u=u+Math.imul(wt,Ft)|0,w=w+Math.imul(Y,Dt)|0,c=c+Math.imul(Y,Wt)|0,c=c+Math.imul(J,Dt)|0,u=u+Math.imul(J,Wt)|0,w=w+Math.imul(E,$t)|0,c=c+Math.imul(E,Vt)|0,c=c+Math.imul(L,$t)|0,u=u+Math.imul(L,Vt)|0;var Vn=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,w=Math.imul(_t,zt),c=Math.imul(_t,Kt),c=c+Math.imul(At,zt)|0,u=Math.imul(At,Kt),w=w+Math.imul(It,qt)|0,c=c+Math.imul(It,Ft)|0,c=c+Math.imul(xt,qt)|0,u=u+Math.imul(xt,Ft)|0,w=w+Math.imul(pt,Dt)|0,c=c+Math.imul(pt,Wt)|0,c=c+Math.imul(wt,Dt)|0,u=u+Math.imul(wt,Wt)|0,w=w+Math.imul(Y,$t)|0,c=c+Math.imul(Y,Vt)|0,c=c+Math.imul(J,$t)|0,u=u+Math.imul(J,Vt)|0,w=w+Math.imul(E,Ht)|0,c=c+Math.imul(E,jt)|0,c=c+Math.imul(L,Ht)|0,u=u+Math.imul(L,jt)|0;var Hn=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,w=Math.imul(Bt,zt),c=Math.imul(Bt,Kt),c=c+Math.imul(Rt,zt)|0,u=Math.imul(Rt,Kt),w=w+Math.imul(_t,qt)|0,c=c+Math.imul(_t,Ft)|0,c=c+Math.imul(At,qt)|0,u=u+Math.imul(At,Ft)|0,w=w+Math.imul(It,Dt)|0,c=c+Math.imul(It,Wt)|0,c=c+Math.imul(xt,Dt)|0,u=u+Math.imul(xt,Wt)|0,w=w+Math.imul(pt,$t)|0,c=c+Math.imul(pt,Vt)|0,c=c+Math.imul(wt,$t)|0,u=u+Math.imul(wt,Vt)|0,w=w+Math.imul(Y,Ht)|0,c=c+Math.imul(Y,jt)|0,c=c+Math.imul(J,Ht)|0,u=u+Math.imul(J,jt)|0,w=w+Math.imul(E,Gt)|0,c=c+Math.imul(E,Zt)|0,c=c+Math.imul(L,Gt)|0,u=u+Math.imul(L,Zt)|0;var jn=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(jn>>>26)|0,jn&=67108863,w=Math.imul(Mt,zt),c=Math.imul(Mt,Kt),c=c+Math.imul(Tt,zt)|0,u=Math.imul(Tt,Kt),w=w+Math.imul(Bt,qt)|0,c=c+Math.imul(Bt,Ft)|0,c=c+Math.imul(Rt,qt)|0,u=u+Math.imul(Rt,Ft)|0,w=w+Math.imul(_t,Dt)|0,c=c+Math.imul(_t,Wt)|0,c=c+Math.imul(At,Dt)|0,u=u+Math.imul(At,Wt)|0,w=w+Math.imul(It,$t)|0,c=c+Math.imul(It,Vt)|0,c=c+Math.imul(xt,$t)|0,u=u+Math.imul(xt,Vt)|0,w=w+Math.imul(pt,Ht)|0,c=c+Math.imul(pt,jt)|0,c=c+Math.imul(wt,Ht)|0,u=u+Math.imul(wt,jt)|0,w=w+Math.imul(Y,Gt)|0,c=c+Math.imul(Y,Zt)|0,c=c+Math.imul(J,Gt)|0,u=u+Math.imul(J,Zt)|0,w=w+Math.imul(E,Yt)|0,c=c+Math.imul(E,Xt)|0,c=c+Math.imul(L,Yt)|0,u=u+Math.imul(L,Xt)|0;var Gn=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,w=Math.imul(Pt,zt),c=Math.imul(Pt,Kt),c=c+Math.imul(Lt,zt)|0,u=Math.imul(Lt,Kt),w=w+Math.imul(Mt,qt)|0,c=c+Math.imul(Mt,Ft)|0,c=c+Math.imul(Tt,qt)|0,u=u+Math.imul(Tt,Ft)|0,w=w+Math.imul(Bt,Dt)|0,c=c+Math.imul(Bt,Wt)|0,c=c+Math.imul(Rt,Dt)|0,u=u+Math.imul(Rt,Wt)|0,w=w+Math.imul(_t,$t)|0,c=c+Math.imul(_t,Vt)|0,c=c+Math.imul(At,$t)|0,u=u+Math.imul(At,Vt)|0,w=w+Math.imul(It,Ht)|0,c=c+Math.imul(It,jt)|0,c=c+Math.imul(xt,Ht)|0,u=u+Math.imul(xt,jt)|0,w=w+Math.imul(pt,Gt)|0,c=c+Math.imul(pt,Zt)|0,c=c+Math.imul(wt,Gt)|0,u=u+Math.imul(wt,Zt)|0,w=w+Math.imul(Y,Yt)|0,c=c+Math.imul(Y,Xt)|0,c=c+Math.imul(J,Yt)|0,u=u+Math.imul(J,Xt)|0,w=w+Math.imul(E,Jt)|0,c=c+Math.imul(E,Qt)|0,c=c+Math.imul(L,Jt)|0,u=u+Math.imul(L,Qt)|0;var Zn=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,w=Math.imul(Ct,zt),c=Math.imul(Ct,Kt),c=c+Math.imul(Ot,zt)|0,u=Math.imul(Ot,Kt),w=w+Math.imul(Pt,qt)|0,c=c+Math.imul(Pt,Ft)|0,c=c+Math.imul(Lt,qt)|0,u=u+Math.imul(Lt,Ft)|0,w=w+Math.imul(Mt,Dt)|0,c=c+Math.imul(Mt,Wt)|0,c=c+Math.imul(Tt,Dt)|0,u=u+Math.imul(Tt,Wt)|0,w=w+Math.imul(Bt,$t)|0,c=c+Math.imul(Bt,Vt)|0,c=c+Math.imul(Rt,$t)|0,u=u+Math.imul(Rt,Vt)|0,w=w+Math.imul(_t,Ht)|0,c=c+Math.imul(_t,jt)|0,c=c+Math.imul(At,Ht)|0,u=u+Math.imul(At,jt)|0,w=w+Math.imul(It,Gt)|0,c=c+Math.imul(It,Zt)|0,c=c+Math.imul(xt,Gt)|0,u=u+Math.imul(xt,Zt)|0,w=w+Math.imul(pt,Yt)|0,c=c+Math.imul(pt,Xt)|0,c=c+Math.imul(wt,Yt)|0,u=u+Math.imul(wt,Xt)|0,w=w+Math.imul(Y,Jt)|0,c=c+Math.imul(Y,Qt)|0,c=c+Math.imul(J,Jt)|0,u=u+Math.imul(J,Qt)|0,w=w+Math.imul(E,te)|0,c=c+Math.imul(E,ee)|0,c=c+Math.imul(L,te)|0,u=u+Math.imul(L,ee)|0;var Yn=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,w=Math.imul(Ut,zt),c=Math.imul(Ut,Kt),c=c+Math.imul(Nt,zt)|0,u=Math.imul(Nt,Kt),w=w+Math.imul(Ct,qt)|0,c=c+Math.imul(Ct,Ft)|0,c=c+Math.imul(Ot,qt)|0,u=u+Math.imul(Ot,Ft)|0,w=w+Math.imul(Pt,Dt)|0,c=c+Math.imul(Pt,Wt)|0,c=c+Math.imul(Lt,Dt)|0,u=u+Math.imul(Lt,Wt)|0,w=w+Math.imul(Mt,$t)|0,c=c+Math.imul(Mt,Vt)|0,c=c+Math.imul(Tt,$t)|0,u=u+Math.imul(Tt,Vt)|0,w=w+Math.imul(Bt,Ht)|0,c=c+Math.imul(Bt,jt)|0,c=c+Math.imul(Rt,Ht)|0,u=u+Math.imul(Rt,jt)|0,w=w+Math.imul(_t,Gt)|0,c=c+Math.imul(_t,Zt)|0,c=c+Math.imul(At,Gt)|0,u=u+Math.imul(At,Zt)|0,w=w+Math.imul(It,Yt)|0,c=c+Math.imul(It,Xt)|0,c=c+Math.imul(xt,Yt)|0,u=u+Math.imul(xt,Xt)|0,w=w+Math.imul(pt,Jt)|0,c=c+Math.imul(pt,Qt)|0,c=c+Math.imul(wt,Jt)|0,u=u+Math.imul(wt,Qt)|0,w=w+Math.imul(Y,te)|0,c=c+Math.imul(Y,ee)|0,c=c+Math.imul(J,te)|0,u=u+Math.imul(J,ee)|0,w=w+Math.imul(E,re)|0,c=c+Math.imul(E,ne)|0,c=c+Math.imul(L,re)|0,u=u+Math.imul(L,ne)|0;var Xn=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,w=Math.imul(Ut,qt),c=Math.imul(Ut,Ft),c=c+Math.imul(Nt,qt)|0,u=Math.imul(Nt,Ft),w=w+Math.imul(Ct,Dt)|0,c=c+Math.imul(Ct,Wt)|0,c=c+Math.imul(Ot,Dt)|0,u=u+Math.imul(Ot,Wt)|0,w=w+Math.imul(Pt,$t)|0,c=c+Math.imul(Pt,Vt)|0,c=c+Math.imul(Lt,$t)|0,u=u+Math.imul(Lt,Vt)|0,w=w+Math.imul(Mt,Ht)|0,c=c+Math.imul(Mt,jt)|0,c=c+Math.imul(Tt,Ht)|0,u=u+Math.imul(Tt,jt)|0,w=w+Math.imul(Bt,Gt)|0,c=c+Math.imul(Bt,Zt)|0,c=c+Math.imul(Rt,Gt)|0,u=u+Math.imul(Rt,Zt)|0,w=w+Math.imul(_t,Yt)|0,c=c+Math.imul(_t,Xt)|0,c=c+Math.imul(At,Yt)|0,u=u+Math.imul(At,Xt)|0,w=w+Math.imul(It,Jt)|0,c=c+Math.imul(It,Qt)|0,c=c+Math.imul(xt,Jt)|0,u=u+Math.imul(xt,Qt)|0,w=w+Math.imul(pt,te)|0,c=c+Math.imul(pt,ee)|0,c=c+Math.imul(wt,te)|0,u=u+Math.imul(wt,ee)|0,w=w+Math.imul(Y,re)|0,c=c+Math.imul(Y,ne)|0,c=c+Math.imul(J,re)|0,u=u+Math.imul(J,ne)|0;var Jn=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,w=Math.imul(Ut,Dt),c=Math.imul(Ut,Wt),c=c+Math.imul(Nt,Dt)|0,u=Math.imul(Nt,Wt),w=w+Math.imul(Ct,$t)|0,c=c+Math.imul(Ct,Vt)|0,c=c+Math.imul(Ot,$t)|0,u=u+Math.imul(Ot,Vt)|0,w=w+Math.imul(Pt,Ht)|0,c=c+Math.imul(Pt,jt)|0,c=c+Math.imul(Lt,Ht)|0,u=u+Math.imul(Lt,jt)|0,w=w+Math.imul(Mt,Gt)|0,c=c+Math.imul(Mt,Zt)|0,c=c+Math.imul(Tt,Gt)|0,u=u+Math.imul(Tt,Zt)|0,w=w+Math.imul(Bt,Yt)|0,c=c+Math.imul(Bt,Xt)|0,c=c+Math.imul(Rt,Yt)|0,u=u+Math.imul(Rt,Xt)|0,w=w+Math.imul(_t,Jt)|0,c=c+Math.imul(_t,Qt)|0,c=c+Math.imul(At,Jt)|0,u=u+Math.imul(At,Qt)|0,w=w+Math.imul(It,te)|0,c=c+Math.imul(It,ee)|0,c=c+Math.imul(xt,te)|0,u=u+Math.imul(xt,ee)|0,w=w+Math.imul(pt,re)|0,c=c+Math.imul(pt,ne)|0,c=c+Math.imul(wt,re)|0,u=u+Math.imul(wt,ne)|0;var Qn=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,w=Math.imul(Ut,$t),c=Math.imul(Ut,Vt),c=c+Math.imul(Nt,$t)|0,u=Math.imul(Nt,Vt),w=w+Math.imul(Ct,Ht)|0,c=c+Math.imul(Ct,jt)|0,c=c+Math.imul(Ot,Ht)|0,u=u+Math.imul(Ot,jt)|0,w=w+Math.imul(Pt,Gt)|0,c=c+Math.imul(Pt,Zt)|0,c=c+Math.imul(Lt,Gt)|0,u=u+Math.imul(Lt,Zt)|0,w=w+Math.imul(Mt,Yt)|0,c=c+Math.imul(Mt,Xt)|0,c=c+Math.imul(Tt,Yt)|0,u=u+Math.imul(Tt,Xt)|0,w=w+Math.imul(Bt,Jt)|0,c=c+Math.imul(Bt,Qt)|0,c=c+Math.imul(Rt,Jt)|0,u=u+Math.imul(Rt,Qt)|0,w=w+Math.imul(_t,te)|0,c=c+Math.imul(_t,ee)|0,c=c+Math.imul(At,te)|0,u=u+Math.imul(At,ee)|0,w=w+Math.imul(It,re)|0,c=c+Math.imul(It,ne)|0,c=c+Math.imul(xt,re)|0,u=u+Math.imul(xt,ne)|0;var ti=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(ti>>>26)|0,ti&=67108863,w=Math.imul(Ut,Ht),c=Math.imul(Ut,jt),c=c+Math.imul(Nt,Ht)|0,u=Math.imul(Nt,jt),w=w+Math.imul(Ct,Gt)|0,c=c+Math.imul(Ct,Zt)|0,c=c+Math.imul(Ot,Gt)|0,u=u+Math.imul(Ot,Zt)|0,w=w+Math.imul(Pt,Yt)|0,c=c+Math.imul(Pt,Xt)|0,c=c+Math.imul(Lt,Yt)|0,u=u+Math.imul(Lt,Xt)|0,w=w+Math.imul(Mt,Jt)|0,c=c+Math.imul(Mt,Qt)|0,c=c+Math.imul(Tt,Jt)|0,u=u+Math.imul(Tt,Qt)|0,w=w+Math.imul(Bt,te)|0,c=c+Math.imul(Bt,ee)|0,c=c+Math.imul(Rt,te)|0,u=u+Math.imul(Rt,ee)|0,w=w+Math.imul(_t,re)|0,c=c+Math.imul(_t,ne)|0,c=c+Math.imul(At,re)|0,u=u+Math.imul(At,ne)|0;var ei=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(ei>>>26)|0,ei&=67108863,w=Math.imul(Ut,Gt),c=Math.imul(Ut,Zt),c=c+Math.imul(Nt,Gt)|0,u=Math.imul(Nt,Zt),w=w+Math.imul(Ct,Yt)|0,c=c+Math.imul(Ct,Xt)|0,c=c+Math.imul(Ot,Yt)|0,u=u+Math.imul(Ot,Xt)|0,w=w+Math.imul(Pt,Jt)|0,c=c+Math.imul(Pt,Qt)|0,c=c+Math.imul(Lt,Jt)|0,u=u+Math.imul(Lt,Qt)|0,w=w+Math.imul(Mt,te)|0,c=c+Math.imul(Mt,ee)|0,c=c+Math.imul(Tt,te)|0,u=u+Math.imul(Tt,ee)|0,w=w+Math.imul(Bt,re)|0,c=c+Math.imul(Bt,ne)|0,c=c+Math.imul(Rt,re)|0,u=u+Math.imul(Rt,ne)|0;var ri=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(ri>>>26)|0,ri&=67108863,w=Math.imul(Ut,Yt),c=Math.imul(Ut,Xt),c=c+Math.imul(Nt,Yt)|0,u=Math.imul(Nt,Xt),w=w+Math.imul(Ct,Jt)|0,c=c+Math.imul(Ct,Qt)|0,c=c+Math.imul(Ot,Jt)|0,u=u+Math.imul(Ot,Qt)|0,w=w+Math.imul(Pt,te)|0,c=c+Math.imul(Pt,ee)|0,c=c+Math.imul(Lt,te)|0,u=u+Math.imul(Lt,ee)|0,w=w+Math.imul(Mt,re)|0,c=c+Math.imul(Mt,ne)|0,c=c+Math.imul(Tt,re)|0,u=u+Math.imul(Tt,ne)|0;var ni=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(ni>>>26)|0,ni&=67108863,w=Math.imul(Ut,Jt),c=Math.imul(Ut,Qt),c=c+Math.imul(Nt,Jt)|0,u=Math.imul(Nt,Qt),w=w+Math.imul(Ct,te)|0,c=c+Math.imul(Ct,ee)|0,c=c+Math.imul(Ot,te)|0,u=u+Math.imul(Ot,ee)|0,w=w+Math.imul(Pt,re)|0,c=c+Math.imul(Pt,ne)|0,c=c+Math.imul(Lt,re)|0,u=u+Math.imul(Lt,ne)|0;var ii=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(ii>>>26)|0,ii&=67108863,w=Math.imul(Ut,te),c=Math.imul(Ut,ee),c=c+Math.imul(Nt,te)|0,u=Math.imul(Nt,ee),w=w+Math.imul(Ct,re)|0,c=c+Math.imul(Ct,ne)|0,c=c+Math.imul(Ot,re)|0,u=u+Math.imul(Ot,ne)|0;var si=(B+w|0)+((c&8191)<<13)|0;B=(u+(c>>>13)|0)+(si>>>26)|0,si&=67108863,w=Math.imul(Ut,re),c=Math.imul(Ut,ne),c=c+Math.imul(Nt,re)|0,u=Math.imul(Nt,ne);var oi=(B+w|0)+((c&8191)<<13)|0;return B=(u+(c>>>13)|0)+(oi>>>26)|0,oi&=67108863,x[0]=Dn,x[1]=Wn,x[2]=$n,x[3]=Vn,x[4]=Hn,x[5]=jn,x[6]=Gn,x[7]=Zn,x[8]=Yn,x[9]=Xn,x[10]=Jn,x[11]=Qn,x[12]=ti,x[13]=ei,x[14]=ri,x[15]=ni,x[16]=ii,x[17]=si,x[18]=oi,B!==0&&(x[19]=B,d.length++),d};Math.imul||(D=C);function K(p,a,f){f.negative=a.negative^p.negative,f.length=p.length+a.length;for(var d=0,m=0,k=0;k<f.length-1;k++){var x=m;m=0;for(var B=d&67108863,w=Math.min(k,a.length-1),c=Math.max(0,k-p.length+1);c<=w;c++){var u=k-c,y=p.words[u]|0,E=a.words[c]|0,L=y*E,F=L&67108863;x=x+(L/67108864|0)|0,F=F+B|0,B=F&67108863,x=x+(F>>>26)|0,m+=x>>>26,x&=67108863}f.words[k]=B,d=x,x=m}return d!==0?f.words[k]=d:f.length--,f._strip()}function j(p,a,f){return K(p,a,f)}i.prototype.mulTo=function(a,f){var d,m=this.length+a.length;return this.length===10&&a.length===10?d=D(this,a,f):m<63?d=C(this,a,f):m<1024?d=K(this,a,f):d=j(this,a,f),d},i.prototype.mul=function(a){var f=new i(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},i.prototype.mulf=function(a){var f=new i(null);return f.words=new Array(this.length+a.length),j(this,a,f)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var f=a<0;f&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var d=0,m=0;m<this.length;m++){var k=(this.words[m]|0)*a,x=(k&67108863)+(d&67108863);d>>=26,d+=k/67108864|0,d+=x>>>26,this.words[m]=x&67108863}return d!==0&&(this.words[m]=d,this.length++),this.length=a===0?1:this.length,f?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var f=T(a);if(f.length===0)return new i(1);for(var d=this,m=0;m<f.length&&f[m]===0;m++,d=d.sqr());if(++m<f.length)for(var k=d.sqr();m<f.length;m++,k=k.sqr())f[m]!==0&&(d=d.mul(k));return d},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var f=a%26,d=(a-f)/26,m=67108863>>>26-f<<26-f,k;if(f!==0){var x=0;for(k=0;k<this.length;k++){var B=this.words[k]&m,w=(this.words[k]|0)-B<<f;this.words[k]=w|x,x=B>>>26-f}x&&(this.words[k]=x,this.length++)}if(d!==0){for(k=this.length-1;k>=0;k--)this.words[k+d]=this.words[k];for(k=0;k<d;k++)this.words[k]=0;this.length+=d}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,f,d){r(typeof a=="number"&&a>=0);var m;f?m=(f-f%26)/26:m=0;var k=a%26,x=Math.min((a-k)/26,this.length),B=67108863^67108863>>>k<<k,w=d;if(m-=x,m=Math.max(0,m),w){for(var c=0;c<x;c++)w.words[c]=this.words[c];w.length=x}if(x!==0)if(this.length>x)for(this.length-=x,c=0;c<this.length;c++)this.words[c]=this.words[c+x];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(u!==0||c>=m);c--){var y=this.words[c]|0;this.words[c]=u<<26-k|y>>>k,u=y&B}return w&&u!==0&&(w.words[w.length++]=u),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,f,d){return r(this.negative===0),this.iushrn(a,f,d)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var f=a%26,d=(a-f)/26,m=1<<f;if(this.length<=d)return!1;var k=this.words[d];return!!(k&m)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var f=a%26,d=(a-f)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(f!==0&&d++,this.length=Math.min(d,this.length),f!==0){var m=67108863^67108863>>>f<<f;this.words[this.length-1]&=m}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,f,d){var m=a.length+d,k;this._expand(m);var x,B=0;for(k=0;k<a.length;k++){x=(this.words[k+d]|0)+B;var w=(a.words[k]|0)*f;x-=w&67108863,B=(x>>26)-(w/67108864|0),this.words[k+d]=x&67108863}for(;k<this.length-d;k++)x=(this.words[k+d]|0)+B,B=x>>26,this.words[k+d]=x&67108863;if(B===0)return this._strip();for(r(B===-1),B=0,k=0;k<this.length;k++)x=-(this.words[k]|0)+B,B=x>>26,this.words[k]=x&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,f){var d=this.length-a.length,m=this.clone(),k=a,x=k.words[k.length-1]|0,B=this._countBits(x);d=26-B,d!==0&&(k=k.ushln(d),m.iushln(d),x=k.words[k.length-1]|0);var w=m.length-k.length,c;if(f!=="mod"){c=new i(null),c.length=w+1,c.words=new Array(c.length);for(var u=0;u<c.length;u++)c.words[u]=0}var y=m.clone()._ishlnsubmul(k,1,w);y.negative===0&&(m=y,c&&(c.words[w]=1));for(var E=w-1;E>=0;E--){var L=(m.words[k.length+E]|0)*67108864+(m.words[k.length+E-1]|0);for(L=Math.min(L/x|0,67108863),m._ishlnsubmul(k,L,E);m.negative!==0;)L--,m.negative=0,m._ishlnsubmul(k,1,E),m.isZero()||(m.negative^=1);c&&(c.words[E]=L)}return c&&c._strip(),m._strip(),f!=="div"&&d!==0&&m.iushrn(d),{div:c||null,mod:m}},i.prototype.divmod=function(a,f,d){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var m,k,x;return this.negative!==0&&a.negative===0?(x=this.neg().divmod(a,f),f!=="mod"&&(m=x.div.neg()),f!=="div"&&(k=x.mod.neg(),d&&k.negative!==0&&k.iadd(a)),{div:m,mod:k}):this.negative===0&&a.negative!==0?(x=this.divmod(a.neg(),f),f!=="mod"&&(m=x.div.neg()),{div:m,mod:x.mod}):(this.negative&a.negative)!==0?(x=this.neg().divmod(a.neg(),f),f!=="div"&&(k=x.mod.neg(),d&&k.negative!==0&&k.isub(a)),{div:x.div,mod:k}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?f==="div"?{div:this.divn(a.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,f)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var d=f.div.negative!==0?f.mod.isub(a):f.mod,m=a.ushrn(1),k=a.andln(1),x=d.cmp(m);return x<0||k===1&&x===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modrn=function(a){var f=a<0;f&&(a=-a),r(a<=67108863);for(var d=(1<<26)%a,m=0,k=this.length-1;k>=0;k--)m=(d*m+(this.words[k]|0))%a;return f?-m:m},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var f=a<0;f&&(a=-a),r(a<=67108863);for(var d=0,m=this.length-1;m>=0;m--){var k=(this.words[m]|0)+d*67108864;this.words[m]=k/a|0,d=k%a}return this._strip(),f?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var f=this,d=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var m=new i(1),k=new i(0),x=new i(0),B=new i(1),w=0;f.isEven()&&d.isEven();)f.iushrn(1),d.iushrn(1),++w;for(var c=d.clone(),u=f.clone();!f.isZero();){for(var y=0,E=1;(f.words[0]&E)===0&&y<26;++y,E<<=1);if(y>0)for(f.iushrn(y);y-- >0;)(m.isOdd()||k.isOdd())&&(m.iadd(c),k.isub(u)),m.iushrn(1),k.iushrn(1);for(var L=0,F=1;(d.words[0]&F)===0&&L<26;++L,F<<=1);if(L>0)for(d.iushrn(L);L-- >0;)(x.isOdd()||B.isOdd())&&(x.iadd(c),B.isub(u)),x.iushrn(1),B.iushrn(1);f.cmp(d)>=0?(f.isub(d),m.isub(x),k.isub(B)):(d.isub(f),x.isub(m),B.isub(k))}return{a:x,b:B,gcd:d.iushln(w)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var f=this,d=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var m=new i(1),k=new i(0),x=d.clone();f.cmpn(1)>0&&d.cmpn(1)>0;){for(var B=0,w=1;(f.words[0]&w)===0&&B<26;++B,w<<=1);if(B>0)for(f.iushrn(B);B-- >0;)m.isOdd()&&m.iadd(x),m.iushrn(1);for(var c=0,u=1;(d.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0)for(d.iushrn(c);c-- >0;)k.isOdd()&&k.iadd(x),k.iushrn(1);f.cmp(d)>=0?(f.isub(d),m.isub(k)):(d.isub(f),k.isub(m))}var y;return f.cmpn(1)===0?y=m:y=k,y.cmpn(0)<0&&y.iadd(a),y},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),d=a.clone();f.negative=0,d.negative=0;for(var m=0;f.isEven()&&d.isEven();m++)f.iushrn(1),d.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;d.isEven();)d.iushrn(1);var k=f.cmp(d);if(k<0){var x=f;f=d,d=x}else if(k===0||d.cmpn(1)===0)break;f.isub(d)}while(!0);return d.iushln(m)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var f=a%26,d=(a-f)/26,m=1<<f;if(this.length<=d)return this._expand(d+1),this.words[d]|=m,this;for(var k=m,x=d;k!==0&&x<this.length;x++){var B=this.words[x]|0;B+=k,k=B>>>26,B&=67108863,this.words[x]=B}return k!==0&&(this.words[x]=k,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var f=a<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var d;if(this.length>1)d=1;else{f&&(a=-a),r(a<=67108863,"Number is too big");var m=this.words[0]|0;d=m===a?0:m<a?-1:1}return this.negative!==0?-d|0:d},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var f=this.ucmp(a);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,d=this.length-1;d>=0;d--){var m=this.words[d]|0,k=a.words[d]|0;if(m!==k){m<k?f=-1:m>k&&(f=1);break}}return f},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new U(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var X={k256:null,p224:null,p192:null,p25519:null};function Q(p,a){this.name=p,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Q.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},Q.prototype.ireduce=function(a){var f=a,d;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),d=f.bitLength();while(d>this.n);var m=d<this.n?-1:f.ucmp(this.p);return m===0?(f.words[0]=0,f.length=1):m>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},Q.prototype.split=function(a,f){a.iushrn(this.n,0,f)},Q.prototype.imulK=function(a){return a.imul(this.k)};function it(){Q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(it,Q),it.prototype.split=function(a,f){for(var d=4194303,m=Math.min(a.length,9),k=0;k<m;k++)f.words[k]=a.words[k];if(f.length=m,a.length<=9){a.words[0]=0,a.length=1;return}var x=a.words[9];for(f.words[f.length++]=x&d,k=10;k<a.length;k++){var B=a.words[k]|0;a.words[k-10]=(B&d)<<4|x>>>22,x=B}x>>>=22,a.words[k-10]=x,x===0&&a.length>10?a.length-=10:a.length-=9},it.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,d=0;d<a.length;d++){var m=a.words[d]|0;f+=m*977,a.words[d]=f&67108863,f=m*64+(f/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function et(){Q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(et,Q);function M(){Q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(M,Q);function P(){Q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(P,Q),P.prototype.imulK=function(a){for(var f=0,d=0;d<a.length;d++){var m=(a.words[d]|0)*19+f,k=m&67108863;m>>>=26,a.words[d]=k,f=m}return f!==0&&(a.words[a.length++]=f),a},i._prime=function(a){if(X[a])return X[a];var f;if(a==="k256")f=new it;else if(a==="p224")f=new et;else if(a==="p192")f=new M;else if(a==="p25519")f=new P;else throw new Error("Unknown prime "+a);return X[a]=f,f};function U(p){if(typeof p=="string"){var a=i._prime(p);this.m=a.p,this.prime=a}else r(p.gtn(1),"modulus must be greater than 1"),this.m=p,this.prime=null}U.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},U.prototype._verify2=function(a,f){r((a.negative|f.negative)===0,"red works only with positives"),r(a.red&&a.red===f.red,"red works only with red numbers")},U.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(b(a,a.umod(this.m)._forceRed(this)),a)},U.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},U.prototype.add=function(a,f){this._verify2(a,f);var d=a.add(f);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},U.prototype.iadd=function(a,f){this._verify2(a,f);var d=a.iadd(f);return d.cmp(this.m)>=0&&d.isub(this.m),d},U.prototype.sub=function(a,f){this._verify2(a,f);var d=a.sub(f);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},U.prototype.isub=function(a,f){this._verify2(a,f);var d=a.isub(f);return d.cmpn(0)<0&&d.iadd(this.m),d},U.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},U.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},U.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},U.prototype.isqr=function(a){return this.imul(a,a.clone())},U.prototype.sqr=function(a){return this.mul(a,a)},U.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(r(f%2===1),f===3){var d=this.m.add(new i(1)).iushrn(2);return this.pow(a,d)}for(var m=this.m.subn(1),k=0;!m.isZero()&&m.andln(1)===0;)k++,m.iushrn(1);r(!m.isZero());var x=new i(1).toRed(this),B=x.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,w).cmp(B)!==0;)c.redIAdd(B);for(var u=this.pow(c,m),y=this.pow(a,m.addn(1).iushrn(1)),E=this.pow(a,m),L=k;E.cmp(x)!==0;){for(var F=E,Y=0;F.cmp(x)!==0;Y++)F=F.redSqr();r(Y<L);var J=this.pow(u,new i(1).iushln(L-Y-1));y=y.redMul(J),u=J.redSqr(),E=E.redMul(u),L=Y}return y},U.prototype.invm=function(a){var f=a._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},U.prototype.pow=function(a,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return a.clone();var d=4,m=new Array(1<<d);m[0]=new i(1).toRed(this),m[1]=a;for(var k=2;k<m.length;k++)m[k]=this.mul(m[k-1],a);var x=m[0],B=0,w=0,c=f.bitLength()%26;for(c===0&&(c=26),k=f.length-1;k>=0;k--){for(var u=f.words[k],y=c-1;y>=0;y--){var E=u>>y&1;if(x!==m[0]&&(x=this.sqr(x)),E===0&&B===0){w=0;continue}B<<=1,B|=E,w++,!(w!==d&&(k!==0||y!==0))&&(x=this.mul(x,m[B]),w=0,B=0)}c=26}return x},U.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},U.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},i.mont=function(a){return new z(a)};function z(p){U.call(this,p),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(z,U),z.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},z.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},z.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var d=a.imul(f),m=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=d.isub(m).iushrn(this.shift),x=k;return k.cmp(this.m)>=0?x=k.isub(this.m):k.cmpn(0)<0&&(x=k.iadd(this.m)),x._forceRed(this)},z.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new i(0)._forceRed(this);var d=a.mul(f),m=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=d.isub(m).iushrn(this.shift),x=k;return k.cmp(this.m)>=0?x=k.isub(this.m):k.cmpn(0)<0&&(x=k.iadd(this.m)),x._forceRed(this)},z.prototype.invm=function(a){var f=this.imod(a._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(n,gl)})(ln)),ln.exports}var yl=Fa();const uo=Rn(yl);var on={exports:{}};var lo;function ml(){return lo||(lo=1,(function(n,t){var e=os,r=e.Buffer;function s(o,l){for(var h in o)l[h]=o[h]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(o,l,h){return r(o,l,h)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,l,h){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,l,h)},i.alloc=function(o,l,h){if(typeof o!="number")throw new TypeError("Argument must be a number");var g=r(o);return l!==void 0?typeof h=="string"?g.fill(l,h):g.fill(l):g.fill(0),g},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(on,on.exports)),on.exports}var pi,ho;function wl(){if(ho)return pi;ho=1;var n=ml().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),l=o.charCodeAt(0);if(r[l]!==255)throw new TypeError(o+" is ambiguous");r[l]=i}var h=e.length,g=e.charAt(0),b=Math.log(h)/Math.log(256),v=Math.log(256)/Math.log(h);function I(R){if((Array.isArray(R)||R instanceof Uint8Array)&&(R=n.from(R)),!n.isBuffer(R))throw new TypeError("Expected Buffer");if(R.length===0)return"";for(var T=0,C=0,D=0,K=R.length;D!==K&&R[D]===0;)D++,T++;for(var j=(K-D)*v+1>>>0,X=new Uint8Array(j);D!==K;){for(var Q=R[D],it=0,et=j-1;(Q!==0||it<C)&&et!==-1;et--,it++)Q+=256*X[et]>>>0,X[et]=Q%h>>>0,Q=Q/h>>>0;if(Q!==0)throw new Error("Non-zero carry");C=it,D++}for(var M=j-C;M!==j&&X[M]===0;)M++;for(var P=g.repeat(T);M<j;++M)P+=e.charAt(X[M]);return P}function S(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return n.alloc(0);for(var T=0,C=0,D=0;R[T]===g;)C++,T++;for(var K=(R.length-T)*b+1>>>0,j=new Uint8Array(K);T<R.length;){var X=R.charCodeAt(T);if(X>255)return;var Q=r[X];if(Q===255)return;for(var it=0,et=K-1;(Q!==0||it<D)&&et!==-1;et--,it++)Q+=h*j[et]>>>0,j[et]=Q%256>>>0,Q=Q/256>>>0;if(Q!==0)throw new Error("Non-zero carry");D=it,T++}for(var M=K-D;M!==K&&j[M]===0;)M++;var P=n.allocUnsafe(C+(K-M));P.fill(0,0,C);for(var U=C;M!==K;)P[U++]=j[M++];return P}function A(R){var T=S(R);if(T)return T;throw new Error("Non-base"+h+" character")}return{encode:I,decodeUnsafe:S,decode:A}}return pi=t,pi}var gi,fo;function Da(){if(fo)return gi;fo=1;var n=wl(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return gi=n(t),gi}var bl=Da();const le=Rn(bl),po=ka;var ft={};function De(n,t,e){return t<=n&&n<=e}function Tn(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function kl(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var l=i&1023,h=o&1023;s.push(65536+(l<<10)+h),r+=1}else s.push(65533)}r+=1}return s}function vl(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var mn=-1;function as(n){this.tokens=[].slice.call(n)}as.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():mn},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var Rr=-1;function yi(n,t){if(n)throw TypeError("Decoder error");return t||65533}var wn="utf-8";function bn(n,t){if(!(this instanceof bn))return new bn(n,t);if(n=n!==void 0?String(n).toLowerCase():wn,n!==wn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Tn(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}bn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Tn(e),this._streaming||(this._decoder=new Sl({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new as(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Rr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Rr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),vl(i)}};function kn(n,t){if(!(this instanceof kn))return new kn(n,t);if(n=n!==void 0?String(n).toLowerCase():wn,n!==wn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Tn(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}kn.prototype={encode:function(t,e){t=t?String(t):"",e=Tn(e),this._streaming||(this._encoder=new El(this._options)),this._streaming=!!e.stream;for(var r=[],s=new as(kl(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Rr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Rr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Sl(n){var t=n.fatal,e=0,r=0,s=0,i=128,o=191;this.handler=function(l,h){if(h===mn&&s!==0)return s=0,yi(t);if(h===mn)return Rr;if(s===0){if(De(h,0,127))return h;if(De(h,194,223))s=1,e=h-192;else if(De(h,224,239))h===224&&(i=160),h===237&&(o=159),s=2,e=h-224;else if(De(h,240,244))h===240&&(i=144),h===244&&(o=143),s=3,e=h-240;else return yi(t);return e=e<<6*s,null}if(!De(h,i,o))return e=s=r=0,i=128,o=191,l.prepend(h),yi(t);if(i=128,o=191,r+=1,e+=h-128<<6*(s-r),r!==s)return null;var g=e;return e=s=r=0,g}}function El(n){n.fatal,this.handler=function(t,e){if(e===mn)return Rr;if(De(e,0,127))return e;var r,s;De(e,128,2047)?(r=1,s=192):De(e,2048,65535)?(r=2,s=224):De(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var o=e>>6*(r-1);i.push(128|o&63),r-=1}return i}}const Il=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:bn,TextEncoder:kn},Symbol.toStringTag,{value:"Module"})),xl=Mn(Il);var go;function _l(){if(go)return ft;go=1;var n=ft&&ft.__createBinding||(Object.create?(function(M,P,U,z){z===void 0&&(z=U),Object.defineProperty(M,z,{enumerable:!0,get:function(){return P[U]}})}):(function(M,P,U,z){z===void 0&&(z=U),M[z]=P[U]})),t=ft&&ft.__setModuleDefault||(Object.create?(function(M,P){Object.defineProperty(M,"default",{enumerable:!0,value:P})}):function(M,P){M.default=P}),e=ft&&ft.__decorate||function(M,P,U,z){var p=arguments.length,a=p<3?P:z===null?z=Object.getOwnPropertyDescriptor(P,U):z,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(M,P,U,z);else for(var d=M.length-1;d>=0;d--)(f=M[d])&&(a=(p<3?f(a):p>3?f(P,U,a):f(P,U))||a);return p>3&&a&&Object.defineProperty(P,U,a),a},r=ft&&ft.__importStar||function(M){if(M&&M.__esModule)return M;var P={};if(M!=null)for(var U in M)U!=="default"&&Object.hasOwnProperty.call(M,U)&&n(P,M,U);return t(P,M),P},s=ft&&ft.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(ft,"__esModule",{value:!0}),ft.deserializeUnchecked=ft.deserialize=ft.serialize=ft.BinaryReader=ft.BinaryWriter=ft.BorshError=ft.baseDecode=ft.baseEncode=void 0;const i=s(Fa()),o=s(Da()),l=r(xl),h=typeof TextDecoder!="function"?l.TextDecoder:TextDecoder,g=new h("utf-8",{fatal:!0});function b(M){return typeof M=="string"&&(M=Buffer.from(M,"utf8")),o.default.encode(Buffer.from(M))}ft.baseEncode=b;function v(M){return Buffer.from(o.default.decode(M))}ft.baseDecode=v;const I=1024;class S extends Error{constructor(P){super(P),this.fieldPath=[],this.originalMessage=P}addToFieldPath(P){this.fieldPath.splice(0,0,P),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ft.BorshError=S;class A{constructor(){this.buf=Buffer.alloc(I),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(I)]))}writeU8(P){this.maybeResize(),this.buf.writeUInt8(P,this.length),this.length+=1}writeU16(P){this.maybeResize(),this.buf.writeUInt16LE(P,this.length),this.length+=2}writeU32(P){this.maybeResize(),this.buf.writeUInt32LE(P,this.length),this.length+=4}writeU64(P){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(P).toArray("le",8)))}writeU128(P){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(P).toArray("le",16)))}writeU256(P){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(P).toArray("le",32)))}writeU512(P){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(P).toArray("le",64)))}writeBuffer(P){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),P,Buffer.alloc(I)]),this.length+=P.length}writeString(P){this.maybeResize();const U=Buffer.from(P,"utf8");this.writeU32(U.length),this.writeBuffer(U)}writeFixedArray(P){this.writeBuffer(Buffer.from(P))}writeArray(P,U){this.maybeResize(),this.writeU32(P.length);for(const z of P)this.maybeResize(),U(z)}toArray(){return this.buf.subarray(0,this.length)}}ft.BinaryWriter=A;function R(M,P,U){const z=U.value;U.value=function(...p){try{return z.apply(this,p)}catch(a){if(a instanceof RangeError){const f=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(f)>=0)throw new S("Reached the end of buffer when deserializing")}throw a}}}class T{constructor(P){this.buf=P,this.offset=0}readU8(){const P=this.buf.readUInt8(this.offset);return this.offset+=1,P}readU16(){const P=this.buf.readUInt16LE(this.offset);return this.offset+=2,P}readU32(){const P=this.buf.readUInt32LE(this.offset);return this.offset+=4,P}readU64(){const P=this.readBuffer(8);return new i.default(P,"le")}readU128(){const P=this.readBuffer(16);return new i.default(P,"le")}readU256(){const P=this.readBuffer(32);return new i.default(P,"le")}readU512(){const P=this.readBuffer(64);return new i.default(P,"le")}readBuffer(P){if(this.offset+P>this.buf.length)throw new S(`Expected buffer length ${P} isn't within bounds`);const U=this.buf.slice(this.offset,this.offset+P);return this.offset+=P,U}readString(){const P=this.readU32(),U=this.readBuffer(P);try{return g.decode(U)}catch(z){throw new S(`Error decoding UTF-8 string: ${z}`)}}readFixedArray(P){return new Uint8Array(this.readBuffer(P))}readArray(P){const U=this.readU32(),z=Array();for(let p=0;p<U;++p)z.push(P());return z}}e([R],T.prototype,"readU8",null),e([R],T.prototype,"readU16",null),e([R],T.prototype,"readU32",null),e([R],T.prototype,"readU64",null),e([R],T.prototype,"readU128",null),e([R],T.prototype,"readU256",null),e([R],T.prototype,"readU512",null),e([R],T.prototype,"readString",null),e([R],T.prototype,"readFixedArray",null),e([R],T.prototype,"readArray",null),ft.BinaryReader=T;function C(M){return M.charAt(0).toUpperCase()+M.slice(1)}function D(M,P,U,z,p){try{if(typeof z=="string")p[`write${C(z)}`](U);else if(z instanceof Array)if(typeof z[0]=="number"){if(U.length!==z[0])throw new S(`Expecting byte array of length ${z[0]}, but got ${U.length} bytes`);p.writeFixedArray(U)}else if(z.length===2&&typeof z[1]=="number"){if(U.length!==z[1])throw new S(`Expecting byte array of length ${z[1]}, but got ${U.length} bytes`);for(let a=0;a<z[1];a++)D(M,null,U[a],z[0],p)}else p.writeArray(U,a=>{D(M,P,a,z[0],p)});else if(z.kind!==void 0)switch(z.kind){case"option":{U==null?p.writeU8(0):(p.writeU8(1),D(M,P,U,z.type,p));break}case"map":{p.writeU32(U.size),U.forEach((a,f)=>{D(M,P,f,z.key,p),D(M,P,a,z.value,p)});break}default:throw new S(`FieldType ${z} unrecognized`)}else K(M,U,p)}catch(a){throw a instanceof S&&a.addToFieldPath(P),a}}function K(M,P,U){if(typeof P.borshSerialize=="function"){P.borshSerialize(U);return}const z=M.get(P.constructor);if(!z)throw new S(`Class ${P.constructor.name} is missing in schema`);if(z.kind==="struct")z.fields.map(([p,a])=>{D(M,p,P[p],a,U)});else if(z.kind==="enum"){const p=P[z.field];for(let a=0;a<z.values.length;++a){const[f,d]=z.values[a];if(f===p){U.writeU8(a),D(M,f,P[f],d,U);break}}}else throw new S(`Unexpected schema kind: ${z.kind} for ${P.constructor.name}`)}function j(M,P,U=A){const z=new U;return K(M,P,z),z.toArray()}ft.serialize=j;function X(M,P,U,z){try{if(typeof U=="string")return z[`read${C(U)}`]();if(U instanceof Array){if(typeof U[0]=="number")return z.readFixedArray(U[0]);if(typeof U[1]=="number"){const p=[];for(let a=0;a<U[1];a++)p.push(X(M,null,U[0],z));return p}else return z.readArray(()=>X(M,P,U[0],z))}if(U.kind==="option")return z.readU8()?X(M,P,U.type,z):void 0;if(U.kind==="map"){let p=new Map;const a=z.readU32();for(let f=0;f<a;f++){const d=X(M,P,U.key,z),m=X(M,P,U.value,z);p.set(d,m)}return p}return Q(M,U,z)}catch(p){throw p instanceof S&&p.addToFieldPath(P),p}}function Q(M,P,U){if(typeof P.borshDeserialize=="function")return P.borshDeserialize(U);const z=M.get(P);if(!z)throw new S(`Class ${P.name} is missing in schema`);if(z.kind==="struct"){const p={};for(const[a,f]of M.get(P).fields)p[a]=X(M,a,f,U);return new P(p)}if(z.kind==="enum"){const p=U.readU8();if(p>=z.values.length)throw new S(`Enum index: ${p} is out of range`);const[a,f]=z.values[p],d=X(M,a,f,U);return new P({[a]:d})}throw new S(`Unexpected schema kind: ${z.kind} for ${P.constructor.name}`)}function it(M,P,U,z=T){const p=new z(U),a=Q(M,P,p);if(p.offset<U.length)throw new S(`Unexpected ${U.length-p.offset} bytes after deserialized data`);return a}ft.deserialize=it;function et(M,P,U,z=T){const p=new z(U);return Q(M,P,p)}return ft.deserializeUnchecked=et,ft}var mi=_l(),N={},yo;function Al(){if(yo)return N;yo=1,Object.defineProperty(N,"__esModule",{value:!0}),N.s16=N.s8=N.nu64be=N.u48be=N.u40be=N.u32be=N.u24be=N.u16be=N.nu64=N.u48=N.u40=N.u32=N.u24=N.u16=N.u8=N.offset=N.greedy=N.Constant=N.UTF8=N.CString=N.Blob=N.Boolean=N.BitField=N.BitStructure=N.VariantLayout=N.Union=N.UnionLayoutDiscriminator=N.UnionDiscriminator=N.Structure=N.Sequence=N.DoubleBE=N.Double=N.FloatBE=N.Float=N.NearInt64BE=N.NearInt64=N.NearUInt64BE=N.NearUInt64=N.IntBE=N.Int=N.UIntBE=N.UInt=N.OffsetLayout=N.GreedyCount=N.ExternalLayout=N.bindConstructorLayout=N.nameWithProperty=N.Layout=N.uint8ArrayToBuffer=N.checkUint8Array=void 0,N.constant=N.utf8=N.cstr=N.blob=N.unionLayoutDiscriminator=N.union=N.seq=N.bits=N.struct=N.f64be=N.f64=N.f32be=N.f32=N.ns64be=N.s48be=N.s40be=N.s32be=N.s24be=N.s16be=N.ns64=N.s48=N.s40=N.s32=N.s24=void 0;const n=os;function t(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}N.checkUint8Array=t;function e(c){return t(c),n.Buffer.from(c.buffer,c.byteOffset,c.length)}N.uint8ArrayToBuffer=e;let r=class{constructor(u,y){if(!Number.isInteger(u))throw new TypeError("span must be an integer");this.span=u,this.property=y}makeDestinationObject(){return{}}getSpan(u,y){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(u){const y=Object.create(this.constructor.prototype);return Object.assign(y,this),y.property=u,y}fromArray(u){}};N.Layout=r;function s(c,u){return u.property?c+"["+u.property+"]":c}N.nameWithProperty=s;function i(c,u){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(u&&u instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(u,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=u,u.boundConstructor_=c,u.makeDestinationObject=(()=>new c),Object.defineProperty(c.prototype,"encode",{value(y,E){return u.encode(this,y,E)},writable:!0}),Object.defineProperty(c,"decode",{value(y,E){return u.decode(y,E)},writable:!0})}N.bindConstructorLayout=i;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}N.ExternalLayout=o;class l extends o{constructor(u=1,y){if(!Number.isInteger(u)||0>=u)throw new TypeError("elementSpan must be a (positive) integer");super(-1,y),this.elementSpan=u}isCount(){return!0}decode(u,y=0){t(u);const E=u.length-y;return Math.floor(E/this.elementSpan)}encode(u,y,E){return 0}}N.GreedyCount=l;class h extends o{constructor(u,y=0,E){if(!(u instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(y))throw new TypeError("offset must be integer or undefined");super(u.span,E||u.property),this.layout=u,this.offset=y}isCount(){return this.layout instanceof g||this.layout instanceof b}decode(u,y=0){return this.layout.decode(u,y+this.offset)}encode(u,y,E=0){return this.layout.encode(u,y,E+this.offset)}}N.OffsetLayout=h;class g extends r{constructor(u,y){if(super(u,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,y=0){return e(u).readUIntLE(y,this.span)}encode(u,y,E=0){return e(y).writeUIntLE(u,E,this.span),this.span}}N.UInt=g;class b extends r{constructor(u,y){if(super(u,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,y=0){return e(u).readUIntBE(y,this.span)}encode(u,y,E=0){return e(y).writeUIntBE(u,E,this.span),this.span}}N.UIntBE=b;class v extends r{constructor(u,y){if(super(u,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,y=0){return e(u).readIntLE(y,this.span)}encode(u,y,E=0){return e(y).writeIntLE(u,E,this.span),this.span}}N.Int=v;class I extends r{constructor(u,y){if(super(u,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,y=0){return e(u).readIntBE(y,this.span)}encode(u,y,E=0){return e(y).writeIntBE(u,E,this.span),this.span}}N.IntBE=I;const S=Math.pow(2,32);function A(c){const u=Math.floor(c/S),y=c-u*S;return{hi32:u,lo32:y}}function R(c,u){return c*S+u}class T extends r{constructor(u){super(8,u)}decode(u,y=0){const E=e(u),L=E.readUInt32LE(y),F=E.readUInt32LE(y+4);return R(F,L)}encode(u,y,E=0){const L=A(u),F=e(y);return F.writeUInt32LE(L.lo32,E),F.writeUInt32LE(L.hi32,E+4),8}}N.NearUInt64=T;class C extends r{constructor(u){super(8,u)}decode(u,y=0){const E=e(u),L=E.readUInt32BE(y),F=E.readUInt32BE(y+4);return R(L,F)}encode(u,y,E=0){const L=A(u),F=e(y);return F.writeUInt32BE(L.hi32,E),F.writeUInt32BE(L.lo32,E+4),8}}N.NearUInt64BE=C;class D extends r{constructor(u){super(8,u)}decode(u,y=0){const E=e(u),L=E.readUInt32LE(y),F=E.readInt32LE(y+4);return R(F,L)}encode(u,y,E=0){const L=A(u),F=e(y);return F.writeUInt32LE(L.lo32,E),F.writeInt32LE(L.hi32,E+4),8}}N.NearInt64=D;class K extends r{constructor(u){super(8,u)}decode(u,y=0){const E=e(u),L=E.readInt32BE(y),F=E.readUInt32BE(y+4);return R(L,F)}encode(u,y,E=0){const L=A(u),F=e(y);return F.writeInt32BE(L.hi32,E),F.writeUInt32BE(L.lo32,E+4),8}}N.NearInt64BE=K;class j extends r{constructor(u){super(4,u)}decode(u,y=0){return e(u).readFloatLE(y)}encode(u,y,E=0){return e(y).writeFloatLE(u,E),4}}N.Float=j;class X extends r{constructor(u){super(4,u)}decode(u,y=0){return e(u).readFloatBE(y)}encode(u,y,E=0){return e(y).writeFloatBE(u,E),4}}N.FloatBE=X;class Q extends r{constructor(u){super(8,u)}decode(u,y=0){return e(u).readDoubleLE(y)}encode(u,y,E=0){return e(y).writeDoubleLE(u,E),8}}N.Double=Q;class it extends r{constructor(u){super(8,u)}decode(u,y=0){return e(u).readDoubleBE(y)}encode(u,y,E=0){return e(y).writeDoubleBE(u,E),8}}N.DoubleBE=it;class et extends r{constructor(u,y,E){if(!(u instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(y instanceof o&&y.isCount()||Number.isInteger(y)&&0<=y))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let L=-1;!(y instanceof o)&&0<u.span&&(L=y*u.span),super(L,E),this.elementLayout=u,this.count=y}getSpan(u,y=0){if(0<=this.span)return this.span;let E=0,L=this.count;if(L instanceof o&&(L=L.decode(u,y)),0<this.elementLayout.span)E=L*this.elementLayout.span;else{let F=0;for(;F<L;)E+=this.elementLayout.getSpan(u,y+E),++F}return E}decode(u,y=0){const E=[];let L=0,F=this.count;for(F instanceof o&&(F=F.decode(u,y));L<F;)E.push(this.elementLayout.decode(u,y)),y+=this.elementLayout.getSpan(u,y),L+=1;return E}encode(u,y,E=0){const L=this.elementLayout,F=u.reduce((Y,J)=>Y+L.encode(J,y,E+Y),0);return this.count instanceof o&&this.count.encode(u.length,y,E),F}}N.Sequence=et;class M extends r{constructor(u,y,E){if(!(Array.isArray(u)&&u.reduce((F,Y)=>F&&Y instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof y=="boolean"&&E===void 0&&(E=y,y=void 0);for(const F of u)if(0>F.span&&F.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let L=-1;try{L=u.reduce((F,Y)=>F+Y.getSpan(),0)}catch{}super(L,y),this.fields=u,this.decodePrefixes=!!E}getSpan(u,y=0){if(0<=this.span)return this.span;let E=0;try{E=this.fields.reduce((L,F)=>{const Y=F.getSpan(u,y);return y+=Y,L+Y},0)}catch{throw new RangeError("indeterminate span")}return E}decode(u,y=0){t(u);const E=this.makeDestinationObject();for(const L of this.fields)if(L.property!==void 0&&(E[L.property]=L.decode(u,y)),y+=L.getSpan(u,y),this.decodePrefixes&&u.length===y)break;return E}encode(u,y,E=0){const L=E;let F=0,Y=0;for(const J of this.fields){let dt=J.span;if(Y=0<dt?dt:0,J.property!==void 0){const pt=u[J.property];pt!==void 0&&(Y=J.encode(pt,y,E),0>dt&&(dt=J.getSpan(y,E)))}F=E,E+=dt}return F+Y-L}fromArray(u){const y=this.makeDestinationObject();for(const E of this.fields)E.property!==void 0&&0<u.length&&(y[E.property]=u.shift());return y}layoutFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const y of this.fields)if(y.property===u)return y}offsetOf(u){if(typeof u!="string")throw new TypeError("property must be string");let y=0;for(const E of this.fields){if(E.property===u)return y;0>E.span?y=-1:0<=y&&(y+=E.span)}}}N.Structure=M;class P{constructor(u){this.property=u}decode(u,y){throw new Error("UnionDiscriminator is abstract")}encode(u,y,E){throw new Error("UnionDiscriminator is abstract")}}N.UnionDiscriminator=P;class U extends P{constructor(u,y){if(!(u instanceof o&&u.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(y||u.property||"variant"),this.layout=u}decode(u,y){return this.layout.decode(u,y)}encode(u,y,E){return this.layout.encode(u,y,E)}}N.UnionLayoutDiscriminator=U;class z extends r{constructor(u,y,E){let L;if(u instanceof g||u instanceof b)L=new U(new h(u));else if(u instanceof o&&u.isCount())L=new U(u);else if(u instanceof P)L=u;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(y===void 0&&(y=null),!(y===null||y instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(y!==null){if(0>y.span)throw new Error("defaultLayout must have constant span");y.property===void 0&&(y=y.replicate("content"))}let F=-1;y&&(F=y.span,0<=F&&(u instanceof g||u instanceof b)&&(F+=L.layout.span)),super(F,E),this.discriminator=L,this.usesPrefixDiscriminator=u instanceof g||u instanceof b,this.defaultLayout=y,this.registry={};let Y=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(J){return Y(J)},this.configGetSourceVariant=function(J){Y=J.bind(this)}}getSpan(u,y=0){if(0<=this.span)return this.span;const E=this.getVariant(u,y);if(!E)throw new Error("unable to determine span for unrecognized variant");return E.getSpan(u,y)}defaultGetSourceVariant(u){if(Object.prototype.hasOwnProperty.call(u,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(u,this.defaultLayout.property))return;const y=this.registry[u[this.discriminator.property]];if(y&&(!y.layout||y.property&&Object.prototype.hasOwnProperty.call(u,y.property)))return y}else for(const y in this.registry){const E=this.registry[y];if(E.property&&Object.prototype.hasOwnProperty.call(u,E.property))return E}throw new Error("unable to infer src variant")}decode(u,y=0){let E;const L=this.discriminator,F=L.decode(u,y),Y=this.registry[F];if(Y===void 0){const J=this.defaultLayout;let dt=0;this.usesPrefixDiscriminator&&(dt=L.layout.span),E=this.makeDestinationObject(),E[L.property]=F,E[J.property]=J.decode(u,y+dt)}else E=Y.decode(u,y);return E}encode(u,y,E=0){const L=this.getSourceVariant(u);if(L===void 0){const F=this.discriminator,Y=this.defaultLayout;let J=0;return this.usesPrefixDiscriminator&&(J=F.layout.span),F.encode(u[F.property],y,E),J+Y.encode(u[Y.property],y,E+J)}return L.encode(u,y,E)}addVariant(u,y,E){const L=new p(this,u,y,E);return this.registry[u]=L,L}getVariant(u,y=0){let E;return u instanceof Uint8Array?E=this.discriminator.decode(u,y):E=u,this.registry[E]}}N.Union=z;class p extends r{constructor(u,y,E,L){if(!(u instanceof z))throw new TypeError("union must be a Union");if(!Number.isInteger(y)||0>y)throw new TypeError("variant must be a (non-negative) integer");if(typeof E=="string"&&L===void 0&&(L=E,E=null),E){if(!(E instanceof r))throw new TypeError("layout must be a Layout");if(u.defaultLayout!==null&&0<=E.span&&E.span>u.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof L!="string")throw new TypeError("variant must have a String property")}let F=u.span;0>u.span&&(F=E?E.span:0,0<=F&&u.usesPrefixDiscriminator&&(F+=u.discriminator.layout.span)),super(F,L),this.union=u,this.variant=y,this.layout=E||null}getSpan(u,y=0){if(0<=this.span)return this.span;let E=0;this.union.usesPrefixDiscriminator&&(E=this.union.discriminator.layout.span);let L=0;return this.layout&&(L=this.layout.getSpan(u,y+E)),E+L}decode(u,y=0){const E=this.makeDestinationObject();if(this!==this.union.getVariant(u,y))throw new Error("variant mismatch");let L=0;return this.union.usesPrefixDiscriminator&&(L=this.union.discriminator.layout.span),this.layout?E[this.property]=this.layout.decode(u,y+L):this.property?E[this.property]=!0:this.union.usesPrefixDiscriminator&&(E[this.union.discriminator.property]=this.variant),E}encode(u,y,E=0){let L=0;if(this.union.usesPrefixDiscriminator&&(L=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(u,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,y,E);let F=L;if(this.layout&&(this.layout.encode(u[this.property],y,E+L),F+=this.layout.getSpan(y,E+L),0<=this.union.span&&F>this.union.span))throw new Error("encoded variant overruns containing union");return F}fromArray(u){if(this.layout)return this.layout.fromArray(u)}}N.VariantLayout=p;function a(c){return 0>c&&(c+=4294967296),c}class f extends r{constructor(u,y,E){if(!(u instanceof g||u instanceof b))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof y=="string"&&E===void 0&&(E=y,y=!1),4<u.span)throw new RangeError("word cannot exceed 32 bits");super(u.span,E),this.word=u,this.msb=!!y,this.fields=[];let L=0;this._packedSetValue=function(F){return L=a(F),this},this._packedGetValue=function(){return L}}decode(u,y=0){const E=this.makeDestinationObject(),L=this.word.decode(u,y);this._packedSetValue(L);for(const F of this.fields)F.property!==void 0&&(E[F.property]=F.decode(u));return E}encode(u,y,E=0){const L=this.word.decode(y,E);this._packedSetValue(L);for(const F of this.fields)if(F.property!==void 0){const Y=u[F.property];Y!==void 0&&F.encode(Y)}return this.word.encode(this._packedGetValue(),y,E)}addField(u,y){const E=new d(this,u,y);return this.fields.push(E),E}addBoolean(u){const y=new m(this,u);return this.fields.push(y),y}fieldFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const y of this.fields)if(y.property===u)return y}}N.BitStructure=f;class d{constructor(u,y,E){if(!(u instanceof f))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(y)||0>=y)throw new TypeError("bits must be positive integer");const L=8*u.span,F=u.fields.reduce((Y,J)=>Y+J.bits,0);if(y+F>L)throw new Error("bits too long for span remainder ("+(L-F)+" of "+L+" remain)");this.container=u,this.bits=y,this.valueMask=(1<<y)-1,y===32&&(this.valueMask=4294967295),this.start=F,this.container.msb&&(this.start=L-F-y),this.wordMask=a(this.valueMask<<this.start),this.property=E}decode(u,y){const E=this.container._packedGetValue();return a(E&this.wordMask)>>>this.start}encode(u){if(typeof u!="number"||!Number.isInteger(u)||u!==a(u&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const y=this.container._packedGetValue(),E=a(u<<this.start);this.container._packedSetValue(a(y&~this.wordMask)|E)}}N.BitField=d;class m extends d{constructor(u,y){super(u,1,y)}decode(u,y){return!!super.decode(u,y)}encode(u){typeof u=="boolean"&&(u=+u),super.encode(u)}}N.Boolean=m;class k extends r{constructor(u,y){if(!(u instanceof o&&u.isCount()||Number.isInteger(u)&&0<=u))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let E=-1;u instanceof o||(E=u),super(E,y),this.length=u}getSpan(u,y){let E=this.span;return 0>E&&(E=this.length.decode(u,y)),E}decode(u,y=0){let E=this.span;return 0>E&&(E=this.length.decode(u,y)),e(u).slice(y,y+E)}encode(u,y,E){let L=this.length;if(this.length instanceof o&&(L=u.length),!(u instanceof Uint8Array&&L===u.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+L+") Uint8Array as src");if(E+L>y.length)throw new RangeError("encoding overruns Uint8Array");const F=e(u);return e(y).write(F.toString("hex"),E,L,"hex"),this.length instanceof o&&this.length.encode(L,y,E),L}}N.Blob=k;class x extends r{constructor(u){super(-1,u)}getSpan(u,y=0){t(u);let E=y;for(;E<u.length&&u[E]!==0;)E+=1;return 1+E-y}decode(u,y=0){const E=this.getSpan(u,y);return e(u).slice(y,y+E-1).toString("utf-8")}encode(u,y,E=0){typeof u!="string"&&(u=String(u));const L=n.Buffer.from(u,"utf8"),F=L.length;if(E+F>y.length)throw new RangeError("encoding overruns Buffer");const Y=e(y);return L.copy(Y,E),Y[E+F]=0,F+1}}N.CString=x;class B extends r{constructor(u,y){if(typeof u=="string"&&y===void 0&&(y=u,u=void 0),u===void 0)u=-1;else if(!Number.isInteger(u))throw new TypeError("maxSpan must be an integer");super(-1,y),this.maxSpan=u}getSpan(u,y=0){return t(u),u.length-y}decode(u,y=0){const E=this.getSpan(u,y);if(0<=this.maxSpan&&this.maxSpan<E)throw new RangeError("text length exceeds maxSpan");return e(u).slice(y,y+E).toString("utf-8")}encode(u,y,E=0){typeof u!="string"&&(u=String(u));const L=n.Buffer.from(u,"utf8"),F=L.length;if(0<=this.maxSpan&&this.maxSpan<F)throw new RangeError("text length exceeds maxSpan");if(E+F>y.length)throw new RangeError("encoding overruns Buffer");return L.copy(e(y),E),F}}N.UTF8=B;class w extends r{constructor(u,y){super(0,y),this.value=u}decode(u,y){return this.value}encode(u,y,E){return 0}}return N.Constant=w,N.greedy=((c,u)=>new l(c,u)),N.offset=((c,u,y)=>new h(c,u,y)),N.u8=(c=>new g(1,c)),N.u16=(c=>new g(2,c)),N.u24=(c=>new g(3,c)),N.u32=(c=>new g(4,c)),N.u40=(c=>new g(5,c)),N.u48=(c=>new g(6,c)),N.nu64=(c=>new T(c)),N.u16be=(c=>new b(2,c)),N.u24be=(c=>new b(3,c)),N.u32be=(c=>new b(4,c)),N.u40be=(c=>new b(5,c)),N.u48be=(c=>new b(6,c)),N.nu64be=(c=>new C(c)),N.s8=(c=>new v(1,c)),N.s16=(c=>new v(2,c)),N.s24=(c=>new v(3,c)),N.s32=(c=>new v(4,c)),N.s40=(c=>new v(5,c)),N.s48=(c=>new v(6,c)),N.ns64=(c=>new D(c)),N.s16be=(c=>new I(2,c)),N.s24be=(c=>new I(3,c)),N.s32be=(c=>new I(4,c)),N.s40be=(c=>new I(5,c)),N.s48be=(c=>new I(6,c)),N.ns64be=(c=>new K(c)),N.f32=(c=>new j(c)),N.f32be=(c=>new X(c)),N.f64=(c=>new Q(c)),N.f64be=(c=>new it(c)),N.struct=((c,u,y)=>new M(c,u,y)),N.bits=((c,u,y)=>new f(c,u,y)),N.seq=((c,u,y)=>new et(c,u,y)),N.union=((c,u,y)=>new z(c,u,y)),N.unionLayoutDiscriminator=((c,u)=>new U(c,u)),N.blob=((c,u)=>new k(c,u)),N.cstr=(c=>new x(c)),N.utf8=((c,u)=>new B(c,u)),N.constant=((c,u)=>new w(c,u)),N}var _=Al(),Bl=8078e3,Rl=8078001,Ml=8078004,Tl=8078005,Pl=8078006,Ll=8078011;function Wa(n){return Array.isArray(n)?"%5B"+n.map(Wa).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function Cl([n,t]){return`${n}=${Wa(t)}`}function Ol(n){const t=Object.entries(n).map(Cl).join("&");return btoa(t)}function Ul(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${Ol(t)}'`),`${e}\``}}var Er=class extends Error{cause=this.cause;context;constructor(...[n,t]){let e,r;if(t){const{cause:i,...o}=t;i&&(r={cause:i}),Object.keys(o).length>0&&(e=o)}const s=Ul(n,e);super(s,r),this.context={__code:n,...e},this.name="SolanaError"}};function Nl(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function zl(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(Nl(t,n));return n.write(t,e,0),e}})}function Kl(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function br(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function ql(n,t){if(br(n)!==br(t))throw new Er(Ml);if(br(n)&&br(t)&&n.fixedSize!==t.fixedSize)throw new Er(Tl,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!br(n)&&!br(t)&&n.maxSize!==t.maxSize)throw new Er(Pl,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function Fl(n,t,e=0){if(t.length-e<=0)throw new Er(Bl,{codecDescription:n})}function Dl(n,t,e,r=0){const s=e.length-r;if(s<t)throw new Er(Rl,{bytesLength:s,codecDescription:n,expected:t})}function Wl(n,t,e,r){if(r<t||r>e)throw new Er(Ll,{codecDescription:n,max:e,min:t,value:r})}function $a(n){return n?.endian!==1}function $l(n){return zl({fixedSize:n.size,write(t,e,r){n.range&&Wl(n.name,n.range[0],n.range[1],t);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),t,$a(n.config)),e.set(new Uint8Array(s),r),r+n.size}})}function Vl(n){return Kl({fixedSize:n.size,read(t,e=0){Fl(n.name,t,e),Dl(n.name,n.size,t,e);const r=new DataView(Hl(t,e,n.size));return[n.get(r,$a(n.config)),e+n.size]}})}function Hl(n,t,e){const r=n.byteOffset+(t??0),s=e??n.byteLength;return n.buffer.slice(r,r+s)}var Va=(n={})=>$l({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),jl=(n={})=>Vl({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),Gl=(n={})=>ql(Va(n),jl(n));class Zl extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...o}=t,{path:l}=t,h=l.length===0?s:`At path: ${l.join(".")} -- ${s}`;super(i??h),i!=null&&(this.cause=h),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function Yl(n){return Xr(n)&&typeof n[Symbol.iterator]=="function"}function Xr(n){return typeof n=="object"&&n!=null}function vn(n){return Xr(n)&&!Array.isArray(n)}function xe(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Xl(n){const{done:t,value:e}=n.next();return t?void 0:e}function Jl(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:l,message:h=`Expected a value of type \`${o}\`${l?` with refinement \`${l}\``:""}, but received: \`${xe(r)}\``}=n;return{value:r,type:o,refinement:l,key:s[s.length-1],path:s,branch:i,...n,message:h}}function*mo(n,t,e,r){Yl(n)||(n=[n]);for(const s of n){const i=Jl(s,t,e,r);i&&(yield i)}}function*cs(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,l={path:r,branch:s,mask:o};i&&(n=t.coercer(n,l));let h="valid";for(const g of t.validator(n,l))g.explanation=e.message,h="not_valid",yield[g,void 0];for(let[g,b,v]of t.entries(n,l)){const I=cs(b,v,{path:g===void 0?r:[...r,g],branch:g===void 0?s:[...s,b],coerce:i,mask:o,message:e.message});for(const S of I)S[0]?(h=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):i&&(b=S[1],g===void 0?n=b:n instanceof Map?n.set(g,b):n instanceof Set?n.add(b):Xr(n)&&(b!==void 0||g in n)&&(n[g]=b))}if(h!=="not_valid")for(const g of t.refiner(n,l))g.explanation=e.message,h="not_refined",yield[g,void 0];h==="valid"&&(yield[void 0,n])}let Ne=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:o=h=>h,entries:l=function*(){}}=t;this.type=e,this.schema=r,this.entries=l,this.coercer=o,s?this.validator=(h,g)=>{const b=s(h,g);return mo(b,g,this,h)}:this.validator=()=>[],i?this.refiner=(h,g)=>{const b=i(h,g);return mo(b,g,this,h)}:this.refiner=()=>[]}assert(t,e){return Ha(t,this,e)}create(t,e){return H(t,this,e)}is(t){return ja(t,this)}mask(t,e){return Ql(t,this,e)}validate(t,e={}){return Jr(t,this,e)}};function Ha(n,t,e){const r=Jr(n,t,{message:e});if(r[0])throw r[0]}function H(n,t,e){const r=Jr(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Ql(n,t,e){const r=Jr(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function ja(n,t){return!Jr(n,t)[0]}function Jr(n,t,e={}){const r=cs(n,t,e),s=Xl(r);return s[0]?[new Zl(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function dr(n,t){return new Ne({type:n,schema:null,validator:t})}function th(){return dr("any",()=>!0)}function G(n){return new Ne({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${xe(t)}`}})}function Ue(){return dr("boolean",n=>typeof n=="boolean")}function us(n){return dr("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${xe(t)}`)}function bt(n){const t=xe(n),e=typeof n;return new Ne({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${xe(r)}`}})}function eh(){return dr("never",()=>!1)}function Z(n){return new Ne({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function O(){return dr("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${xe(n)}`)}function rt(n){return new Ne({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Ga(n,t){return new Ne({type:"record",schema:null,*entries(e){if(Xr(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return vn(e)||`Expected an object, but received: ${xe(e)}`},coercer(e){return vn(e)?{...e}:e}})}function $(){return dr("string",n=>typeof n=="string"||`Expected a string, but received: ${xe(n)}`)}function ls(n){const t=eh();return new Ne({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${xe(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function W(n){const t=Object.keys(n);return new Ne({type:"type",schema:n,*entries(e){if(Xr(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return vn(e)||`Expected an object, but received: ${xe(e)}`},coercer(e){return vn(e)?{...e}:e}})}function me(n){const t=n.map(e=>e.type).join(" | ");return new Ne({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,o]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return o}return e},validator(e,r){const s=[];for(const i of n){const[...o]=cs(e,i,r),[l]=o;if(l[0])for(const[h]of o)h&&s.push(h);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${xe(e)}`,...s]}})}function Cr(){return dr("unknown",()=>!0)}function Qr(n,t,e){return new Ne({...n,coercer:(r,s)=>ja(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var an,rh=new Uint8Array(16);function Za(){if(!an&&(an=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!an))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return an(rh)}const nh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Pn(n){return typeof n=="string"&&nh.test(n)}var ue=[];for(var wi=0;wi<256;++wi)ue.push((wi+256).toString(16).substr(1));function Ln(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ue[n[t+0]]+ue[n[t+1]]+ue[n[t+2]]+ue[n[t+3]]+"-"+ue[n[t+4]]+ue[n[t+5]]+"-"+ue[n[t+6]]+ue[n[t+7]]+"-"+ue[n[t+8]]+ue[n[t+9]]+"-"+ue[n[t+10]]+ue[n[t+11]]+ue[n[t+12]]+ue[n[t+13]]+ue[n[t+14]]+ue[n[t+15]]).toLowerCase();if(!Pn(e))throw TypeError("Stringified UUID is invalid");return e}var wo,bi,ki=0,vi=0;function ih(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||wo,o=n.clockseq!==void 0?n.clockseq:bi;if(i==null||o==null){var l=n.random||(n.rng||Za)();i==null&&(i=wo=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),o==null&&(o=bi=(l[6]<<8|l[7])&16383)}var h=n.msecs!==void 0?n.msecs:Date.now(),g=n.nsecs!==void 0?n.nsecs:vi+1,b=h-ki+(g-vi)/1e4;if(b<0&&n.clockseq===void 0&&(o=o+1&16383),(b<0||h>ki)&&n.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ki=h,vi=g,bi=o,h+=122192928e5;var v=((h&268435455)*1e4+g)%4294967296;s[r++]=v>>>24&255,s[r++]=v>>>16&255,s[r++]=v>>>8&255,s[r++]=v&255;var I=h/4294967296*1e4&268435455;s[r++]=I>>>8&255,s[r++]=I&255,s[r++]=I>>>24&15|16,s[r++]=I>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var S=0;S<6;++S)s[r+S]=i[S];return t||Ln(s)}function Ya(n){if(!Pn(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function sh(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var oh="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ah="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Xa(n,t,e){function r(s,i,o,l){if(typeof s=="string"&&(s=sh(s)),typeof i=="string"&&(i=Ya(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+s.length);if(h.set(i),h.set(s,i.length),h=e(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,o){l=l||0;for(var g=0;g<16;++g)o[l+g]=h[g];return o}return Ln(h)}try{r.name=n}catch{}return r.DNS=oh,r.URL=ah,r}function ch(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return uh(lh(hh(n),n.length*8))}function uh(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function Ja(n){return(n+64>>>9<<4)+14+1}function lh(n,t){n[t>>5]|=128<<t%32,n[Ja(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var l=e,h=r,g=s,b=i;e=de(e,r,s,i,n[o],7,-680876936),i=de(i,e,r,s,n[o+1],12,-389564586),s=de(s,i,e,r,n[o+2],17,606105819),r=de(r,s,i,e,n[o+3],22,-1044525330),e=de(e,r,s,i,n[o+4],7,-176418897),i=de(i,e,r,s,n[o+5],12,1200080426),s=de(s,i,e,r,n[o+6],17,-1473231341),r=de(r,s,i,e,n[o+7],22,-45705983),e=de(e,r,s,i,n[o+8],7,1770035416),i=de(i,e,r,s,n[o+9],12,-1958414417),s=de(s,i,e,r,n[o+10],17,-42063),r=de(r,s,i,e,n[o+11],22,-1990404162),e=de(e,r,s,i,n[o+12],7,1804603682),i=de(i,e,r,s,n[o+13],12,-40341101),s=de(s,i,e,r,n[o+14],17,-1502002290),r=de(r,s,i,e,n[o+15],22,1236535329),e=pe(e,r,s,i,n[o+1],5,-165796510),i=pe(i,e,r,s,n[o+6],9,-1069501632),s=pe(s,i,e,r,n[o+11],14,643717713),r=pe(r,s,i,e,n[o],20,-373897302),e=pe(e,r,s,i,n[o+5],5,-701558691),i=pe(i,e,r,s,n[o+10],9,38016083),s=pe(s,i,e,r,n[o+15],14,-660478335),r=pe(r,s,i,e,n[o+4],20,-405537848),e=pe(e,r,s,i,n[o+9],5,568446438),i=pe(i,e,r,s,n[o+14],9,-1019803690),s=pe(s,i,e,r,n[o+3],14,-187363961),r=pe(r,s,i,e,n[o+8],20,1163531501),e=pe(e,r,s,i,n[o+13],5,-1444681467),i=pe(i,e,r,s,n[o+2],9,-51403784),s=pe(s,i,e,r,n[o+7],14,1735328473),r=pe(r,s,i,e,n[o+12],20,-1926607734),e=ge(e,r,s,i,n[o+5],4,-378558),i=ge(i,e,r,s,n[o+8],11,-2022574463),s=ge(s,i,e,r,n[o+11],16,1839030562),r=ge(r,s,i,e,n[o+14],23,-35309556),e=ge(e,r,s,i,n[o+1],4,-1530992060),i=ge(i,e,r,s,n[o+4],11,1272893353),s=ge(s,i,e,r,n[o+7],16,-155497632),r=ge(r,s,i,e,n[o+10],23,-1094730640),e=ge(e,r,s,i,n[o+13],4,681279174),i=ge(i,e,r,s,n[o],11,-358537222),s=ge(s,i,e,r,n[o+3],16,-722521979),r=ge(r,s,i,e,n[o+6],23,76029189),e=ge(e,r,s,i,n[o+9],4,-640364487),i=ge(i,e,r,s,n[o+12],11,-421815835),s=ge(s,i,e,r,n[o+15],16,530742520),r=ge(r,s,i,e,n[o+2],23,-995338651),e=ye(e,r,s,i,n[o],6,-198630844),i=ye(i,e,r,s,n[o+7],10,1126891415),s=ye(s,i,e,r,n[o+14],15,-1416354905),r=ye(r,s,i,e,n[o+5],21,-57434055),e=ye(e,r,s,i,n[o+12],6,1700485571),i=ye(i,e,r,s,n[o+3],10,-1894986606),s=ye(s,i,e,r,n[o+10],15,-1051523),r=ye(r,s,i,e,n[o+1],21,-2054922799),e=ye(e,r,s,i,n[o+8],6,1873313359),i=ye(i,e,r,s,n[o+15],10,-30611744),s=ye(s,i,e,r,n[o+6],15,-1560198380),r=ye(r,s,i,e,n[o+13],21,1309151649),e=ye(e,r,s,i,n[o+4],6,-145523070),i=ye(i,e,r,s,n[o+11],10,-1120210379),s=ye(s,i,e,r,n[o+2],15,718787259),r=ye(r,s,i,e,n[o+9],21,-343485551),e=Je(e,l),r=Je(r,h),s=Je(s,g),i=Je(i,b)}return[e,r,s,i]}function hh(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(Ja(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function Je(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function fh(n,t){return n<<t|n>>>32-t}function Cn(n,t,e,r,s,i){return Je(fh(Je(Je(t,n),Je(r,i)),s),e)}function de(n,t,e,r,s,i,o){return Cn(t&e|~t&r,n,t,s,i,o)}function pe(n,t,e,r,s,i,o){return Cn(t&r|e&~r,n,t,s,i,o)}function ge(n,t,e,r,s,i,o){return Cn(t^e^r,n,t,s,i,o)}function ye(n,t,e,r,s,i,o){return Cn(e^(t|~r),n,t,s,i,o)}var dh=Xa("v3",48,ch);function ph(n,t,e){n=n||{};var r=n.random||(n.rng||Za)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return Ln(r)}function gh(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Si(n,t){return n<<t|n>>>32-t}function yh(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),l=new Array(o),h=0;h<o;++h){for(var g=new Uint32Array(16),b=0;b<16;++b)g[b]=n[h*64+b*4]<<24|n[h*64+b*4+1]<<16|n[h*64+b*4+2]<<8|n[h*64+b*4+3];l[h]=g}l[o-1][14]=(n.length-1)*8/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=(n.length-1)*8&4294967295;for(var v=0;v<o;++v){for(var I=new Uint32Array(80),S=0;S<16;++S)I[S]=l[v][S];for(var A=16;A<80;++A)I[A]=Si(I[A-3]^I[A-8]^I[A-14]^I[A-16],1);for(var R=e[0],T=e[1],C=e[2],D=e[3],K=e[4],j=0;j<80;++j){var X=Math.floor(j/20),Q=Si(R,5)+gh(X,T,C,D)+K+t[X]+I[j]>>>0;K=D,D=C,C=Si(T,30)>>>0,T=R,R=Q}e[0]=e[0]+R>>>0,e[1]=e[1]+T>>>0,e[2]=e[2]+C>>>0,e[3]=e[3]+D>>>0,e[4]=e[4]+K>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var mh=Xa("v5",80,yh);const wh="00000000-0000-0000-0000-000000000000";function bh(n){if(!Pn(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const kh=Object.freeze(Object.defineProperty({__proto__:null,NIL:wh,parse:Ya,stringify:Ln,v1:ih,v3:dh,v4:ph,v5:mh,validate:Pn,version:bh},Symbol.toStringTag,{value:"Module"})),Qa=Mn(kh);var Ei,bo;function vh(){if(bo)return Ei;bo=1;const n=Qa.v4;return Ei=function(e,r,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const l={method:e};if(o===2&&(l.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");l.params=r}if(typeof s>"u"){const h=typeof i.generator=="function"?i.generator:function(){return n()};l.id=h(l,i)}else o===2&&s===null?i.notificationIdNull&&(l.id=null):l.id=s;return l},Ei}var Ii,ko;function Sh(){if(ko)return Ii;ko=1;const n=Qa.v4,t=vh(),e=function(r,s){if(!(this instanceof e))return new e(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return Ii=e,e.prototype.request=function(r,s,i,o){const l=this;let h=null;const g=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&g)throw new TypeError("JSON-RPC 1.0 does not support batching");if(g||!g&&r&&typeof r=="object"&&typeof s=="function")o=s,h=r;else{typeof i=="function"&&(o=i,i=void 0);const I=typeof o=="function";try{h=t(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(S){if(I){o(S);return}throw S}if(!I)return h}let v;try{v=JSON.stringify(h,this.options.replacer)}catch(I){o(I);return}return this.callServer(v,function(I,S){l._parseResponse(I,S,o)}),h},e.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s){i();return}let o;try{o=JSON.parse(s,this.options.reviver)}catch(l){i(l);return}if(i.length===3)if(Array.isArray(o)){const l=function(g){return typeof g.error<"u"},h=function(g){return!l(g)};i(null,o.filter(l),o.filter(h));return}else{i(null,o.error,o.result);return}i(null,o)},Ii}var Eh=Sh();const Ih=Rn(Eh);var xi={exports:{}},vo;function xh(){return vo||(vo=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(h,g,b){this.fn=h,this.context=g,this.once=b||!1}function i(h,g,b,v,I){if(typeof b!="function")throw new TypeError("The listener must be a function");var S=new s(b,v||h,I),A=e?e+g:g;return h._events[A]?h._events[A].fn?h._events[A]=[h._events[A],S]:h._events[A].push(S):(h._events[A]=S,h._eventsCount++),h}function o(h,g){--h._eventsCount===0?h._events=new r:delete h._events[g]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var g=[],b,v;if(this._eventsCount===0)return g;for(v in b=this._events)t.call(b,v)&&g.push(e?v.slice(1):v);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(b)):g},l.prototype.listeners=function(g){var b=e?e+g:g,v=this._events[b];if(!v)return[];if(v.fn)return[v.fn];for(var I=0,S=v.length,A=new Array(S);I<S;I++)A[I]=v[I].fn;return A},l.prototype.listenerCount=function(g){var b=e?e+g:g,v=this._events[b];return v?v.fn?1:v.length:0},l.prototype.emit=function(g,b,v,I,S,A){var R=e?e+g:g;if(!this._events[R])return!1;var T=this._events[R],C=arguments.length,D,K;if(T.fn){switch(T.once&&this.removeListener(g,T.fn,void 0,!0),C){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,b),!0;case 3:return T.fn.call(T.context,b,v),!0;case 4:return T.fn.call(T.context,b,v,I),!0;case 5:return T.fn.call(T.context,b,v,I,S),!0;case 6:return T.fn.call(T.context,b,v,I,S,A),!0}for(K=1,D=new Array(C-1);K<C;K++)D[K-1]=arguments[K];T.fn.apply(T.context,D)}else{var j=T.length,X;for(K=0;K<j;K++)switch(T[K].once&&this.removeListener(g,T[K].fn,void 0,!0),C){case 1:T[K].fn.call(T[K].context);break;case 2:T[K].fn.call(T[K].context,b);break;case 3:T[K].fn.call(T[K].context,b,v);break;case 4:T[K].fn.call(T[K].context,b,v,I);break;default:if(!D)for(X=1,D=new Array(C-1);X<C;X++)D[X-1]=arguments[X];T[K].fn.apply(T[K].context,D)}}return!0},l.prototype.on=function(g,b,v){return i(this,g,b,v,!1)},l.prototype.once=function(g,b,v){return i(this,g,b,v,!0)},l.prototype.removeListener=function(g,b,v,I){var S=e?e+g:g;if(!this._events[S])return this;if(!b)return o(this,S),this;var A=this._events[S];if(A.fn)A.fn===b&&(!I||A.once)&&(!v||A.context===v)&&o(this,S);else{for(var R=0,T=[],C=A.length;R<C;R++)(A[R].fn!==b||I&&!A[R].once||v&&A[R].context!==v)&&T.push(A[R]);T.length?this._events[S]=T.length===1?T[0]:T:o(this,S)}return this},l.prototype.removeAllListeners=function(g){var b;return g?(b=e?e+g:g,this._events[b]&&o(this,b)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,n.exports=l})(xi)),xi.exports}var _h=xh();const tc=Rn(_h);var Ah=class extends tc{socket;constructor(n,t){super(),this.socket=new window.WebSocket(n,t.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(n,t,e){const r=e||t;try{this.socket.send(n),r()}catch(s){r(s)}}close(n,t){this.socket.close(n,t)}addEventListener(n,t,e){this.socket.addEventListener(n,t,e)}};function Bh(n,t){return new Ah(n,t)}var Rh=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},Mh=class extends tc{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},l,h){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),h?this.dataPack=h:this.dataPack=new Rh,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,t,e,r){return!r&&typeof e=="object"&&(r=e,e=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(n,t),l={jsonrpc:"2.0",method:n,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(l),r,h=>{if(h)return i(h);this.queue[o]={promise:[s,i]},e&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},e))})})}async login(n){const t=await this.call("rpc.login",n);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(n,t){return new Promise((e,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:n,params:t};this.socket.send(this.dataPack.encode(s),i=>{if(i)return r(i);e()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.on",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+t[n]);return t}async unsubscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.off",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(n,t){this.socket&&this.socket.close(n||1e3,t)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(n,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=nt.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const r=[e.notification];if(e.params.constructor===Object)r.push(e.params);else for(let s=0;s<e.params.length;s++)r.push(e.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",e,r),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(n,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",e,r),1))})}};const Th=BigInt(0),zr=BigInt(1),Ph=BigInt(2),Lh=BigInt(7),Ch=BigInt(256),Oh=BigInt(113),ec=[],rc=[],nc=[];for(let n=0,t=zr,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],ec.push(2*(5*r+e)),rc.push((n+1)*(n+2)/2%64);let s=Th;for(let i=0;i<7;i++)t=(t<<zr^(t>>Lh)*Oh)%Ch,t&Ph&&(s^=zr<<(zr<<BigInt(i))-zr);nc.push(s)}const ic=wa(nc,!0),Uh=ic[0],Nh=ic[1],So=(n,t,e)=>e>32?xu(n,t,e):Eu(n,t,e),Eo=(n,t,e)=>e>32?_u(n,t,e):Iu(n,t,e);function zh(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)e[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,h=(o+2)%10,g=e[h],b=e[h+1],v=So(g,b,1)^e[l],I=Eo(g,b,1)^e[l+1];for(let S=0;S<50;S+=10)n[o+S]^=v,n[o+S+1]^=I}let s=n[2],i=n[3];for(let o=0;o<24;o++){const l=rc[o],h=So(s,i,l),g=Eo(s,i,l),b=ec[o];s=n[b],i=n[b+1],n[b]=h,n[b+1]=g}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)e[l]=n[o+l];for(let l=0;l<10;l++)n[o+l]^=~e[(l+2)%10]&e[(l+4)%10]}n[0]^=Uh[r],n[1]^=Nh[r]}tr(e)}class hs extends Qi{constructor(t,e,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=s,this.rounds=i,Fr(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=du(this.state)}clone(){return this._cloneInto()}keccak(){Zs(this.state32),zh(this.state32,this.rounds),Zs(this.state32),this.posOut=0,this.pos=0}update(t){Ar(this),t=An(t),He(t);const{blockLen:e,state:r}=this,s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let l=0;l<o;l++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:s}=this;t[r]^=e,(e&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Ar(this,!1),He(t),this.finish();const e=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Fr(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ga(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,tr(this.state)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new hs(e,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Kh=(n,t,e)=>ts(()=>new hs(t,n,e)),Io=Kh(1,136,256/8);class sc extends Qi{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,pa(t);const r=An(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),tr(i)}update(t){return Ar(this),this.iHash.update(t),this}digestInto(t){Ar(this),He(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:l}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=l,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const oc=(n,t,e)=>new sc(n,t).update(e).digest();oc.create=(n,t)=>new sc(n,t);const xo=(n,t)=>(n+(n>=0?t:-t)/ac)/t;function qh(n,t,e){const[[r,s],[i,o]]=t,l=xo(o*n,e),h=xo(-s*n,e);let g=n-l*r-h*i,b=-l*s-h*o;const v=g<Ve,I=b<Ve;v&&(g=-g),I&&(b=-b);const S=Zr(Math.ceil(Ea(e)/2))+Ir;if(g<Ve||g>=S||b<Ve||b>=S)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:v,k1:g,k2neg:I,k2:b}}function zi(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function _i(n,t){const e={};for(let r of Object.keys(t))e[r]=n[r]===void 0?t[r]:n[r];return ur(e.lowS,"lowS"),ur(e.prehash,"prehash"),e.format!==void 0&&zi(e.format),e}class Fh extends Error{constructor(t=""){super(t)}}const Fe={Err:Fh,_tlv:{encode:(n,t)=>{const{Err:e}=Fe;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=sn(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?sn(s.length/2|128):"";return sn(n)+i+s+t},decode(n,t){const{Err:e}=Fe;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const h=s&127;if(!h)throw new e("tlv.decode(long): indefinite length not supported");if(h>4)throw new e("tlv.decode(long): byte length is too big");const g=t.subarray(r,r+h);if(g.length!==h)throw new e("tlv.decode: length bytes not complete");if(g[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const b of g)o=o<<8|b;if(r+=h,o<128)throw new e("tlv.decode(long): not minimal encoding")}const l=t.subarray(r,r+o);if(l.length!==o)throw new e("tlv.decode: wrong value length");return{v:l,l:t.subarray(r+o)}}},_int:{encode(n){const{Err:t}=Fe;if(n<Ve)throw new t("integer: negative integers are not allowed");let e=sn(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=Fe;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Bn(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=Fe,s=St("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:l,l:h}=r.decode(2,i),{v:g,l:b}=r.decode(2,h);if(b.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(l),s:e.decode(g)}},hexFromSig(n){const{_tlv:t,_int:e}=Fe,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},Ve=BigInt(0),Ir=BigInt(1),ac=BigInt(2),cn=BigInt(3),Dh=BigInt(4);function kr(n,t){const{BYTES:e}=n;let r;if(typeof t=="bigint")r=t;else{let s=St("private key",t);try{r=n.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Wh(n,t={}){const e=Ka("weierstrass",n,t),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:o,n:l}=i;Yr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:h}=t;if(h&&(!r.is0(i.a)||typeof h.beta!="bigint"||!Array.isArray(h.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const g=uc(r,s);function b(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function v(z,p,a){const{x:f,y:d}=p.toAffine(),m=r.toBytes(f);if(ur(a,"isCompressed"),a){b();const k=!r.isOdd(d);return Me(cc(k),m)}else return Me(Uint8Array.of(4),m,r.toBytes(d))}function I(z){Ie(z,void 0,"Point");const{publicKey:p,publicKeyUncompressed:a}=g,f=z.length,d=z[0],m=z.subarray(1);if(f===p&&(d===2||d===3)){const k=r.fromBytes(m);if(!r.isValid(k))throw new Error("bad point: is not on curve, wrong x");const x=R(k);let B;try{B=r.sqrt(x)}catch(u){const y=u instanceof Error?": "+u.message:"";throw new Error("bad point: is not on curve, sqrt error"+y)}b();const w=r.isOdd(B);return(d&1)===1!==w&&(B=r.neg(B)),{x:k,y:B}}else if(f===a&&d===4){const k=r.BYTES,x=r.fromBytes(m.subarray(0,k)),B=r.fromBytes(m.subarray(k,k*2));if(!T(x,B))throw new Error("bad point: is not on curve");return{x,y:B}}else throw new Error(`bad point: got length ${f}, expected compressed=${p} or uncompressed=${a}`)}const S=t.toBytes||v,A=t.fromBytes||I;function R(z){const p=r.sqr(z),a=r.mul(p,z);return r.add(r.add(a,r.mul(z,i.a)),i.b)}function T(z,p){const a=r.sqr(p),f=R(z);return r.eql(a,f)}if(!T(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const C=r.mul(r.pow(i.a,cn),Dh),D=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(C,D)))throw new Error("bad curve params: a or b");function K(z,p,a=!1){if(!r.isValid(p)||a&&r.is0(p))throw new Error(`bad point coordinate ${z}`);return p}function j(z){if(!(z instanceof M))throw new Error("ProjectivePoint expected")}function X(z){if(!h||!h.basises)throw new Error("no endo");return qh(z,h.basises,s.ORDER)}const Q=gn((z,p)=>{const{X:a,Y:f,Z:d}=z;if(r.eql(d,r.ONE))return{x:a,y:f};const m=z.is0();p==null&&(p=m?r.ONE:r.inv(d));const k=r.mul(a,p),x=r.mul(f,p),B=r.mul(d,p);if(m)return{x:r.ZERO,y:r.ZERO};if(!r.eql(B,r.ONE))throw new Error("invZ was invalid");return{x:k,y:x}}),it=gn(z=>{if(z.is0()){if(t.allowInfinityPoint&&!r.is0(z.Y))return;throw new Error("bad point: ZERO")}const{x:p,y:a}=z.toAffine();if(!r.isValid(p)||!r.isValid(a))throw new Error("bad point: x or y not field elements");if(!T(p,a))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function et(z,p,a,f,d){return a=new M(r.mul(a.X,z),a.Y,a.Z),p=yn(f,p),a=yn(d,a),p.add(a)}class M{constructor(p,a,f){this.X=K("x",p),this.Y=K("y",a,!0),this.Z=K("z",f),Object.freeze(this)}static CURVE(){return i}static fromAffine(p){const{x:a,y:f}=p||{};if(!p||!r.isValid(a)||!r.isValid(f))throw new Error("invalid affine point");if(p instanceof M)throw new Error("projective point not allowed");return r.is0(a)&&r.is0(f)?M.ZERO:new M(a,f,r.ONE)}static fromBytes(p){const a=M.fromAffine(A(Ie(p,void 0,"point")));return a.assertValidity(),a}static fromHex(p){return M.fromBytes(St("pointHex",p))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(p=8,a=!0){return U.createCache(this,p),a||this.multiply(cn),this}assertValidity(){it(this)}hasEvenY(){const{y:p}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(p)}equals(p){j(p);const{X:a,Y:f,Z:d}=this,{X:m,Y:k,Z:x}=p,B=r.eql(r.mul(a,x),r.mul(m,d)),w=r.eql(r.mul(f,x),r.mul(k,d));return B&&w}negate(){return new M(this.X,r.neg(this.Y),this.Z)}double(){const{a:p,b:a}=i,f=r.mul(a,cn),{X:d,Y:m,Z:k}=this;let x=r.ZERO,B=r.ZERO,w=r.ZERO,c=r.mul(d,d),u=r.mul(m,m),y=r.mul(k,k),E=r.mul(d,m);return E=r.add(E,E),w=r.mul(d,k),w=r.add(w,w),x=r.mul(p,w),B=r.mul(f,y),B=r.add(x,B),x=r.sub(u,B),B=r.add(u,B),B=r.mul(x,B),x=r.mul(E,x),w=r.mul(f,w),y=r.mul(p,y),E=r.sub(c,y),E=r.mul(p,E),E=r.add(E,w),w=r.add(c,c),c=r.add(w,c),c=r.add(c,y),c=r.mul(c,E),B=r.add(B,c),y=r.mul(m,k),y=r.add(y,y),c=r.mul(y,E),x=r.sub(x,c),w=r.mul(y,u),w=r.add(w,w),w=r.add(w,w),new M(x,B,w)}add(p){j(p);const{X:a,Y:f,Z:d}=this,{X:m,Y:k,Z:x}=p;let B=r.ZERO,w=r.ZERO,c=r.ZERO;const u=i.a,y=r.mul(i.b,cn);let E=r.mul(a,m),L=r.mul(f,k),F=r.mul(d,x),Y=r.add(a,f),J=r.add(m,k);Y=r.mul(Y,J),J=r.add(E,L),Y=r.sub(Y,J),J=r.add(a,d);let dt=r.add(m,x);return J=r.mul(J,dt),dt=r.add(E,F),J=r.sub(J,dt),dt=r.add(f,d),B=r.add(k,x),dt=r.mul(dt,B),B=r.add(L,F),dt=r.sub(dt,B),c=r.mul(u,J),B=r.mul(y,F),c=r.add(B,c),B=r.sub(L,c),c=r.add(L,c),w=r.mul(B,c),L=r.add(E,E),L=r.add(L,E),F=r.mul(u,F),J=r.mul(y,J),L=r.add(L,F),F=r.sub(E,F),F=r.mul(u,F),J=r.add(J,F),E=r.mul(L,J),w=r.add(w,E),E=r.mul(dt,J),B=r.mul(Y,B),B=r.sub(B,E),E=r.mul(Y,L),c=r.mul(dt,c),c=r.add(c,E),new M(B,w,c)}subtract(p){return this.add(p.negate())}is0(){return this.equals(M.ZERO)}multiply(p){const{endo:a}=t;if(!s.isValidNot0(p))throw new Error("invalid scalar: out of range");let f,d;const m=k=>U.cached(this,k,x=>or(M,x));if(a){const{k1neg:k,k1:x,k2neg:B,k2:w}=X(p),{p:c,f:u}=m(x),{p:y,f:E}=m(w);d=u.add(E),f=et(a.beta,c,y,k,B)}else{const{p:k,f:x}=m(p);f=k,d=x}return or(M,[f,d])[0]}multiplyUnsafe(p){const{endo:a}=t,f=this;if(!s.isValid(p))throw new Error("invalid scalar: out of range");if(p===Ve||f.is0())return M.ZERO;if(p===Ir)return f;if(U.hasCache(this))return this.multiply(p);if(a){const{k1neg:d,k1:m,k2neg:k,k2:x}=X(p),{p1:B,p2:w}=Qu(M,f,m,x);return et(a.beta,B,w,d,k)}else return U.unsafe(f,p)}multiplyAndAddUnsafe(p,a,f){const d=this.multiplyUnsafe(a).add(p.multiplyUnsafe(f));return d.is0()?void 0:d}toAffine(p){return Q(this,p)}isTorsionFree(){const{isTorsionFree:p}=t;return o===Ir?!0:p?p(M,this):U.unsafe(this,l).is0()}clearCofactor(){const{clearCofactor:p}=t;return o===Ir?this:p?p(M,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(p=!0){return ur(p,"isCompressed"),this.assertValidity(),S(M,this,p)}toHex(p=!0){return cr(this.toBytes(p))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(p=!0){return this.toBytes(p)}_setWindowSize(p){this.precompute(p)}static normalizeZ(p){return or(M,p)}static msm(p,a){return za(M,s,p,a)}static fromPrivateKey(p){return M.BASE.multiply(kr(s,p))}}M.BASE=new M(i.Gx,i.Gy,r.ONE),M.ZERO=new M(r.ZERO,r.ONE,r.ZERO),M.Fp=r,M.Fn=s;const P=s.BITS,U=new Na(M,t.endo?Math.ceil(P/2):P);return M.BASE.precompute(8),M}function cc(n){return Uint8Array.of(n?2:3)}function uc(n,t){return{secretKey:t.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function $h(n,t={}){const{Fn:e}=n,r=t.randomBytes||es,s=Object.assign(uc(n.Fp,e),{seed:Ca(e.ORDER)});function i(S){try{return!!kr(e,S)}catch{return!1}}function o(S,A){const{publicKey:R,publicKeyUncompressed:T}=s;try{const C=S.length;return A===!0&&C!==R||A===!1&&C!==T?!1:!!n.fromBytes(S)}catch{return!1}}function l(S=r(s.seed)){return Yu(Ie(S,s.seed,"seed"),e.ORDER)}function h(S,A=!0){return n.BASE.multiply(kr(e,S)).toBytes(A)}function g(S){const A=l(S);return{secretKey:A,publicKey:h(A)}}function b(S){if(typeof S=="bigint")return!1;if(S instanceof n)return!0;const{secretKey:A,publicKey:R,publicKeyUncompressed:T}=s;if(e.allowedLengths||A===R)return;const C=St("key",S).length;return C===R||C===T}function v(S,A,R=!0){if(b(S)===!0)throw new Error("first arg must be private key");if(b(A)===!1)throw new Error("second arg must be public key");const T=kr(e,S);return n.fromHex(A).multiply(T).toBytes(R)}return Object.freeze({getPublicKey:h,getSharedSecret:v,keygen:g,Point:n,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:l,isValidPrivateKey:i,randomPrivateKey:l,normPrivateKeyToScalar:S=>kr(e,S),precompute(S=8,A=n.BASE){return A.precompute(S,!1)}},lengths:s})}function Vh(n,t,e={}){pa(t),Yr(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||es,s=e.hmac||((a,...f)=>oc(t,a,Me(...f))),{Fp:i,Fn:o}=n,{ORDER:l,BITS:h}=o,{keygen:g,getPublicKey:b,getSharedSecret:v,utils:I,lengths:S}=$h(n,e),A={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},R="compact";function T(a){const f=l>>Ir;return a>f}function C(a,f){if(!o.isValidNot0(f))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return f}function D(a,f){zi(f);const d=S.signature,m=f==="compact"?d:f==="recovered"?d+1:void 0;return Ie(a,m,`${f} signature`)}class K{constructor(f,d,m){this.r=C("r",f),this.s=C("s",d),m!=null&&(this.recovery=m),Object.freeze(this)}static fromBytes(f,d=R){D(f,d);let m;if(d==="der"){const{r:w,s:c}=Fe.toSig(Ie(f));return new K(w,c)}d==="recovered"&&(m=f[0],d="compact",f=f.subarray(1));const k=o.BYTES,x=f.subarray(0,k),B=f.subarray(k,k*2);return new K(o.fromBytes(x),o.fromBytes(B),m)}static fromHex(f,d){return this.fromBytes(pn(f),d)}addRecoveryBit(f){return new K(this.r,this.s,f)}recoverPublicKey(f){const d=i.ORDER,{r:m,s:k,recovery:x}=this;if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");if(l*ac<d&&x>1)throw new Error("recovery id is ambiguous for h>1 curve");const w=x===2||x===3?m+l:m;if(!i.isValid(w))throw new Error("recovery id 2 or 3 invalid");const c=i.toBytes(w),u=n.fromBytes(Me(cc((x&1)===0),c)),y=o.inv(w),E=X(St("msgHash",f)),L=o.create(-E*y),F=o.create(k*y),Y=n.BASE.multiplyUnsafe(L).add(u.multiplyUnsafe(F));if(Y.is0())throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return T(this.s)}toBytes(f=R){if(zi(f),f==="der")return pn(Fe.hexFromSig(this));const d=o.toBytes(this.r),m=o.toBytes(this.s);if(f==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Me(Uint8Array.of(this.recovery),d,m)}return Me(d,m)}toHex(f){return cr(this.toBytes(f))}assertValidity(){}static fromCompact(f){return K.fromBytes(St("sig",f),"compact")}static fromDER(f){return K.fromBytes(St("sig",f),"der")}normalizeS(){return this.hasHighS()?new K(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return cr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return cr(this.toBytes("compact"))}}const j=e.bits2int||function(f){if(f.length>8192)throw new Error("input is too large");const d=Bn(f),m=f.length*8-h;return m>0?d>>BigInt(m):d},X=e.bits2int_modN||function(f){return o.create(j(f))},Q=Zr(h);function it(a){return Ni("num < 2^"+h,a,Ve,Q),o.toBytes(a)}function et(a,f){return Ie(a,void 0,"message"),f?Ie(t(a),void 0,"prehashed message"):a}function M(a,f,d){if(["recovered","canonical"].some(L=>L in d))throw new Error("sign() legacy options not supported");const{lowS:m,prehash:k,extraEntropy:x}=_i(d,A);a=et(a,k);const B=X(a),w=kr(o,f),c=[it(w),it(B)];if(x!=null&&x!==!1){const L=x===!0?r(S.secretKey):x;c.push(St("extraEntropy",L))}const u=Me(...c),y=B;function E(L){const F=j(L);if(!o.isValidNot0(F))return;const Y=o.inv(F),J=n.BASE.multiply(F).toAffine(),dt=o.create(J.x);if(dt===Ve)return;const pt=o.create(Y*o.create(y+dt*w));if(pt===Ve)return;let wt=(J.x===dt?0:2)|Number(J.y&Ir),Nr=pt;return m&&T(pt)&&(Nr=o.neg(pt),wt^=1),new K(dt,Nr,wt)}return{seed:u,k2sig:E}}function P(a,f,d={}){a=St("message",a);const{seed:m,k2sig:k}=M(a,f,d);return qu(t.outputLen,o.BYTES,s)(m,k)}function U(a){let f;const d=typeof a=="string"||Gr(a),m=!d&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!d&&!m)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(m)f=new K(a.r,a.s);else if(d){try{f=K.fromBytes(St("sig",a),"der")}catch(k){if(!(k instanceof Fe.Err))throw k}if(!f)try{f=K.fromBytes(St("sig",a),"compact")}catch{return!1}}return f||!1}function z(a,f,d,m={}){const{lowS:k,prehash:x,format:B}=_i(m,A);if(d=St("publicKey",d),f=et(St("message",f),x),"strict"in m)throw new Error("options.strict was renamed to lowS");const w=B===void 0?U(a):K.fromBytes(St("sig",a),B);if(w===!1)return!1;try{const c=n.fromBytes(d);if(k&&w.hasHighS())return!1;const{r:u,s:y}=w,E=X(f),L=o.inv(y),F=o.create(E*L),Y=o.create(u*L),J=n.BASE.multiplyUnsafe(F).add(c.multiplyUnsafe(Y));return J.is0()?!1:o.create(J.x)===u}catch{return!1}}function p(a,f,d={}){const{prehash:m}=_i(d,A);return f=et(f,m),K.fromBytes(a,"recovered").recoverPublicKey(f).toBytes()}return Object.freeze({keygen:g,getPublicKey:b,getSharedSecret:v,utils:I,lengths:S,Point:n,sign:P,verify:z,recoverPublicKey:p,Signature:K,hash:t})}function Hh(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=fr(t.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:i}}function jh(n){const{CURVE:t,curveOpts:e}=Hh(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,hash:n.hash,ecdsaOpts:r}}function Gh(n,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},n,Pa(e.Fn.ORDER,e.Fn.BITS))})}function Zh(n){const{CURVE:t,curveOpts:e,hash:r,ecdsaOpts:s}=jh(n),i=Wh(t,e),o=Vh(i,r,s);return Gh(n,o)}function Yh(n,t){const e=r=>Zh({...n,hash:r});return{...e(t),create:e}}const fs={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Xh={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},_o=BigInt(2);function Jh(n){const t=fs.p,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),l=BigInt(44),h=BigInt(88),g=n*n*n%t,b=g*g*n%t,v=vt(b,e,t)*b%t,I=vt(v,e,t)*b%t,S=vt(I,_o,t)*g%t,A=vt(S,s,t)*S%t,R=vt(A,i,t)*A%t,T=vt(R,l,t)*R%t,C=vt(T,h,t)*T%t,D=vt(C,l,t)*R%t,K=vt(D,e,t)*b%t,j=vt(K,o,t)*A%t,X=vt(j,r,t)*g%t,Q=vt(X,_o,t);if(!Ki.eql(Ki.sqr(Q),n))throw new Error("Cannot find square root");return Q}const Ki=fr(fs.p,{sqrt:Jh}),ds=Yh({...fs,Fp:Ki,lowS:!0,endo:Xh},ka),Qh=Lr.utils.randomPrivateKey,Ao=()=>{const n=Lr.utils.randomPrivateKey(),t=Sn(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},Sn=Lr.getPublicKey;function Bo(n){try{return Lr.ExtendedPoint.fromHex(n),!0}catch{return!1}}const ps=(n,t)=>Lr.sign(n,t.slice(0,32)),tf=Lr.verify,ot=n=>nt.isBuffer(n)?n:n instanceof Uint8Array?nt.from(n.buffer,n.byteOffset,n.byteLength):nt.from(n);class gs{constructor(t){Object.assign(this,t)}encode(){return nt.from(mi.serialize(qr,this))}static decode(t){return mi.deserialize(qr,this,t)}static decodeUnchecked(t){return mi.deserializeUnchecked(qr,this,t)}}class ef extends gs{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const qr=new Map;var lc;const hc=32,Oe=32;function rf(n){return n._bn!==void 0}let Ro=1;class V extends gs{constructor(t){if(super({}),this._bn=void 0,rf(t))this._bn=t._bn;else{if(typeof t=="string"){const e=le.decode(t);if(e.length!=Oe)throw new Error("Invalid public key input");this._bn=new uo(e)}else this._bn=new uo(t);if(this._bn.byteLength()>Oe)throw new Error("Invalid public key input")}}static unique(){const t=new V(Ro);return Ro+=1,new V(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return le.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(nt);if(t.length===Oe)return t;const e=nt.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=nt.concat([t.toBuffer(),nt.from(e),r.toBuffer()]),i=po(s);return new V(i)}static createProgramAddressSync(t,e){let r=nt.alloc(0);t.forEach(function(i){if(i.length>hc)throw new TypeError("Max seed length exceeded");r=nt.concat([r,ot(i)])}),r=nt.concat([r,e.toBuffer(),nt.from("ProgramDerivedAddress")]);const s=po(r);if(Bo(s))throw new Error("Invalid seeds, address must fall off the curve");return new V(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(nt.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new V(t);return Bo(e.toBytes())}}lc=V;V.default=new lc("11111111111111111111111111111111");qr.set(V,{kind:"struct",fields:[["_bn","u256"]]});class nf{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=ot(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=ot(Qh()),this._publicKey=ot(Sn(this._secretKey))}get publicKey(){return new V(this._publicKey)}get secretKey(){return nt.concat([this._secretKey,this._publicKey],64)}}const sf=new V("BPFLoader1111111111111111111111111111111111"),Qe=1232,On=127,Wr=64;class ys extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ys.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ms extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ms.prototype,"name",{value:"TransactionExpiredTimeoutError"});class vr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(vr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class $r{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const at=(n="publicKey")=>_.blob(32,n),of=(n="signature")=>_.blob(64,n),ar=(n="string")=>{const t=_.struct([_.u32("length"),_.u32("lengthPadding"),_.blob(_.offset(_.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,l)=>{const h={chars:nt.from(i,"utf8")};return r(h,o,l)},s.alloc=i=>_.u32().span+_.u32().span+nt.from(i,"utf8").length,s},af=(n="authorized")=>_.struct([at("staker"),at("withdrawer")],n),cf=(n="lockup")=>_.struct([_.ns64("unixTimestamp"),_.ns64("epoch"),at("custodian")],n),uf=(n="voteInit")=>_.struct([at("nodePubkey"),at("authorizedVoter"),at("authorizedWithdrawer"),_.u8("commission")],n),lf=(n="voteAuthorizeWithSeedArgs")=>_.struct([_.u32("voteAuthorizationType"),at("currentAuthorityDerivedKeyOwnerPubkey"),ar("currentAuthorityDerivedKeySeed"),at("newAuthorized")],n);function fc(n,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return fc({layout:s},t[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=e(s)}),r}function we(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function Se(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function ut(n,t){if(!n)throw new Error(t||"Assertion failed")}class Un{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=o=>{const l=o.toBase58();let h=r.get(l);return h===void 0&&(h={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(l,h)),h},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const l of o.keys){const h=s(l.pubkey);h.isSigner||=l.isSigner,h.isWritable||=l.isWritable}}return new Un(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];ut(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,h])=>h.isSigner&&h.isWritable),r=t.filter(([,h])=>h.isSigner&&!h.isWritable),s=t.filter(([,h])=>!h.isSigner&&h.isWritable),i=t.filter(([,h])=>!h.isSigner&&!h.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{ut(e.length>0,"Expected at least one writable signer key");const[h]=e[0];ut(h===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const l=[...e.map(([h])=>new V(h)),...r.map(([h])=>new V(h)),...s.map(([h])=>new V(h)),...i.map(([h])=>new V(h))];return[o,l]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const l=new V(i),h=t.findIndex(g=>g.equals(l));h>=0&&(ut(h<256,"Max lookup table index exceeded"),r.push(h),s.push(l),this.keyMetaMap.delete(i))}return[r,s]}}const dc="Reached end of buffer unexpectedly";function Te(n){if(n.length===0)throw new Error(dc);return n.shift()}function be(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(dc);return n.splice(...t)}class _e{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new V(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:le.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new $r(this.staticAccountKeys)}static compile(t){const e=Un.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),o=new $r(s).compileInstructions(t.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:le.encode(l.data)}));return new _e({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Se(e,t);const r=this.instructions.map(v=>{const{accounts:I,programIdIndex:S}=v,A=Array.from(le.decode(v.data));let R=[];Se(R,I.length);let T=[];return Se(T,A.length),{programIdIndex:S,keyIndicesCount:nt.from(R),keyIndices:I,dataLength:nt.from(T),data:A}});let s=[];Se(s,r.length);let i=nt.alloc(Qe);nt.from(s).copy(i);let o=s.length;r.forEach(v=>{const S=_.struct([_.u8("programIdIndex"),_.blob(v.keyIndicesCount.length,"keyIndicesCount"),_.seq(_.u8("keyIndex"),v.keyIndices.length,"keyIndices"),_.blob(v.dataLength.length,"dataLength"),_.seq(_.u8("userdatum"),v.data.length,"data")]).encode(v,i,o);o+=S}),i=i.slice(0,o);const l=_.struct([_.blob(1,"numRequiredSignatures"),_.blob(1,"numReadonlySignedAccounts"),_.blob(1,"numReadonlyUnsignedAccounts"),_.blob(e.length,"keyCount"),_.seq(at("key"),t,"keys"),at("recentBlockhash")]),h={numRequiredSignatures:nt.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:nt.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:nt.from([this.header.numReadonlyUnsignedAccounts]),keyCount:nt.from(e),keys:this.accountKeys.map(v=>ot(v.toBytes())),recentBlockhash:le.decode(this.recentBlockhash)};let g=nt.alloc(2048);const b=l.encode(h,g);return i.copy(g,b),g.slice(0,b+i.length)}static from(t){let e=[...t];const r=Te(e);if(r!==(r&On))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Te(e),i=Te(e),o=we(e);let l=[];for(let I=0;I<o;I++){const S=be(e,0,Oe);l.push(new V(nt.from(S)))}const h=be(e,0,Oe),g=we(e);let b=[];for(let I=0;I<g;I++){const S=Te(e),A=we(e),R=be(e,0,A),T=we(e),C=be(e,0,T),D=le.encode(nt.from(C));b.push({programIdIndex:S,accounts:R,data:D})}const v={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:le.encode(nt.from(h)),accountKeys:l,instructions:b};return new _e(v)}}class lr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new $r(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,l)=>o+l.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=Un.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const b of i){const v=e.extractTableLookup(b);if(v!==void 0){const[I,{writable:S,readonly:A}]=v;r.push(I),s.writable.push(...S),s.readonly.push(...A)}}const[o,l]=e.getMessageComponents(),g=new $r(l,s).compileInstructions(t.instructions);return new lr({header:o,staticAccountKeys:l,recentBlockhash:t.recentBlockhash,compiledInstructions:g,addressTableLookups:r})}serialize(){const t=Array();Se(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Se(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Se(i,this.addressTableLookups.length);const o=_.struct([_.u8("prefix"),_.struct([_.u8("numRequiredSignatures"),_.u8("numReadonlySignedAccounts"),_.u8("numReadonlyUnsignedAccounts")],"header"),_.blob(t.length,"staticAccountKeysLength"),_.seq(at(),this.staticAccountKeys.length,"staticAccountKeys"),at("recentBlockhash"),_.blob(r.length,"instructionsLength"),_.blob(e.length,"serializedInstructions"),_.blob(i.length,"addressTableLookupsLength"),_.blob(s.length,"serializedAddressTableLookups")]),l=new Uint8Array(Qe),g=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(b=>b.toBytes()),recentBlockhash:le.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},l);return l.slice(0,g)}serializeInstructions(){let t=0;const e=new Uint8Array(Qe);for(const r of this.compiledInstructions){const s=Array();Se(s,r.accountKeyIndexes.length);const i=Array();Se(i,r.data.length);const o=_.struct([_.u8("programIdIndex"),_.blob(s.length,"encodedAccountKeyIndexesLength"),_.seq(_.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),_.blob(i.length,"encodedDataLength"),_.blob(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Qe);for(const r of this.addressTableLookups){const s=Array();Se(s,r.writableIndexes.length);const i=Array();Se(i,r.readonlyIndexes.length);const o=_.struct([at("accountKey"),_.blob(s.length,"encodedWritableIndexesLength"),_.seq(_.u8(),r.writableIndexes.length,"writableIndexes"),_.blob(i.length,"encodedReadonlyIndexesLength"),_.seq(_.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Te(e),s=r&On;ut(r!==s,"Expected versioned message but received legacy message");const i=s;ut(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Te(e),numReadonlySignedAccounts:Te(e),numReadonlyUnsignedAccounts:Te(e)},l=[],h=we(e);for(let A=0;A<h;A++)l.push(new V(be(e,0,Oe)));const g=le.encode(be(e,0,Oe)),b=we(e),v=[];for(let A=0;A<b;A++){const R=Te(e),T=we(e),C=be(e,0,T),D=we(e),K=new Uint8Array(be(e,0,D));v.push({programIdIndex:R,accountKeyIndexes:C,data:K})}const I=we(e),S=[];for(let A=0;A<I;A++){const R=new V(be(e,0,Oe)),T=we(e),C=be(e,0,T),D=we(e),K=be(e,0,D);S.push({accountKey:R,writableIndexes:C,readonlyIndexes:K})}return new lr({header:o,staticAccountKeys:l,recentBlockhash:g,compiledInstructions:v,addressTableLookups:S})}}const ws={deserializeMessageVersion(n){const t=n[0],e=t&On;return e===t?"legacy":e},deserialize:n=>{const t=ws.deserializeMessageVersion(n);if(t==="legacy")return _e.from(n);if(t===0)return lr.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let qe=(function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n})({});const hf=nt.alloc(Wr).fill(0);class gt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=nt.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class lt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new gt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let R=0;R<e.length;R++)if(e[R].programId===void 0)throw new Error(`Transaction instruction index ${R} has undefined program id`);const s=[],i=[];e.forEach(R=>{R.keys.forEach(C=>{i.push({...C})});const T=R.programId.toString();s.includes(T)||s.push(T)}),s.forEach(R=>{i.push({pubkey:new V(R),isSigner:!1,isWritable:!1})});const o=[];i.forEach(R=>{const T=R.pubkey.toString(),C=o.findIndex(D=>D.pubkey.toString()===T);C>-1?(o[C].isWritable=o[C].isWritable||R.isWritable,o[C].isSigner=o[C].isSigner||R.isSigner):o.push(R)}),o.sort(function(R,T){if(R.isSigner!==T.isSigner)return R.isSigner?-1:1;if(R.isWritable!==T.isWritable)return R.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return R.pubkey.toBase58().localeCompare(T.pubkey.toBase58(),"en",C)});const l=o.findIndex(R=>R.pubkey.equals(r));if(l>-1){const[R]=o.splice(l,1);R.isSigner=!0,R.isWritable=!0,o.unshift(R)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const R of this.signatures){const T=o.findIndex(C=>C.pubkey.equals(R.publicKey));if(T>-1)o[T].isSigner||(o[T].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${R.publicKey.toString()}`)}let h=0,g=0,b=0;const v=[],I=[];o.forEach(({pubkey:R,isSigner:T,isWritable:C})=>{T?(v.push(R.toString()),h+=1,C||(g+=1)):(I.push(R.toString()),C||(b+=1))});const S=v.concat(I),A=e.map(R=>{const{data:T,programId:C}=R;return{programIdIndex:S.indexOf(C.toString()),accounts:R.keys.map(D=>S.indexOf(D.pubkey.toString())),data:le.encode(T)}});return A.forEach(R=>{ut(R.programIdIndex>=0),R.accounts.forEach(T=>ut(T>=0))}),new _e({header:{numRequiredSignatures:h,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:b},accountKeys:S,recentBlockhash:t,instructions:A})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=ps(r,s.secretKey);this._addSignature(s.publicKey,ot(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){ut(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=nt.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||=[]).push(i):tf(s,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(l=>l.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(l=>l.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Se(r,e.length);const s=r.length+e.length*64+t.length,i=nt.alloc(s);return ut(e.length<256),nt.from(r).copy(i,0),e.forEach(({signature:o},l)=>{o!==null&&(ut(o.length===64,"signature has invalid length"),nt.from(o).copy(i,r.length+l*64))}),t.copy(i,r.length+e.length*64),ut(i.length<=Qe,`Transaction too large: ${i.length} > ${Qe}`),i}get keys(){return ut(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ut(this.instructions.length===1),this.instructions[0].programId}get data(){return ut(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=we(e);let s=[];for(let i=0;i<r;i++){const o=be(e,0,Wr);s.push(le.encode(nt.from(o)))}return lt.populate(_e.from(e),s)}static populate(t,e=[]){const r=new lt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==le.encode(hf)?null:le.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const l=t.accountKeys[o];return{pubkey:l,isSigner:r.signatures.some(h=>h.publicKey.toString()===l.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new gt({keys:i,programId:t.accountKeys[s.programIdIndex],data:le.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}class bs{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:h}=r,g=o-l;ut(g>0,"Message header is invalid");const b=t.staticAccountKeys.length-o-h;ut(b>=0,"Message header is invalid");const v=t.getAccountKeys(e),I=v.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const S=[];for(const A of s){const R=[];for(const C of A.accountKeyIndexes){const D=v.get(C);if(D===void 0)throw new Error(`Failed to find key for account key index ${C}`);const K=C<o;let j;K?j=C<g:C<v.staticAccountKeys.length?j=C-o<b:j=C-v.staticAccountKeys.length<v.accountKeysFromLookups.writable.length,R.push({pubkey:D,isSigner:C<r.numRequiredSignatures,isWritable:j})}const T=v.get(A.programIdIndex);if(T===void 0)throw new Error(`Failed to find program id for program id index ${A.programIdIndex}`);S.push(new gt({programId:T,data:ot(A.data),keys:R}))}return new bs({payerKey:I,instructions:S,recentBlockhash:i})}compileToLegacyMessage(){return _e.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return lr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class ks{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)ut(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let s=0;s<t.header.numRequiredSignatures;s++)r.push(new Uint8Array(Wr));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Se(e,this.signatures.length);const r=_.struct([_.blob(e.length,"encodedSignaturesLength"),_.seq(of(),this.signatures.length,"signatures"),_.blob(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const r=[],s=we(e);for(let o=0;o<s;o++)r.push(new Uint8Array(be(e,0,Wr)));const i=ws.deserialize(new Uint8Array(e));return new ks(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=r.findIndex(o=>o.equals(s.publicKey));ut(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=ps(e,s.secretKey)}}addSignature(t,e){ut(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));ut(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const ff=160,df=64,pf=ff/df,pc=1e3/pf,Be=new V("SysvarC1ock11111111111111111111111111111111"),gf=new V("SysvarEpochSchedu1e111111111111111111111111"),yf=new V("Sysvar1nstructions1111111111111111111111111"),hn=new V("SysvarRecentB1ockHashes11111111111111111111"),Mr=new V("SysvarRent111111111111111111111111111111111"),mf=new V("SysvarRewards111111111111111111111111111111"),wf=new V("SysvarS1otHashes111111111111111111111111111"),bf=new V("SysvarS1otHistory11111111111111111111111111"),fn=new V("SysvarStakeHistory1111111111111111111111111");class Vr extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let l;switch(t){case"send":l=`Transaction ${e} resulted in an error. 
${r}. `+i+o;break;case"simulate":l=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:l=`Unknown action '${(h=>h)(t)}'`}super(l),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const kf={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class tt extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function qi(n,t,e,r){const s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await n.sendTransaction(t,e,s);let o;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)o=(await n.confirmTransaction({abortSignal:r?.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:l}=t.nonceInfo,h=l.keys[0].pubkey;o=(await n.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:h,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await n.confirmTransaction(i,r&&r.commitment)).value;if(o.err)throw i!=null?new Vr({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function rr(n){return new Promise(t=>setTimeout(t,n))}function ct(n,t){const e=n.layout.span>=0?n.layout.span:fc(n,t),r=nt.alloc(e),s=Object.assign({instruction:n.index},t);return n.layout.encode(s,r),r}function ht(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const gc=_.nu64("lamportsPerSignature"),yc=_.struct([_.u32("version"),_.u32("state"),at("authorizedPubkey"),at("nonce"),_.struct([gc],"feeCalculator")]),Fi=yc.span;class Nn{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=yc.decode(ot(t),0);return new Nn({authorizedPubkey:new V(e.authorizedPubkey),nonce:new V(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function Tr(n){const t=_.blob(8,n),e=t.decode.bind(t),r=t.encode.bind(t),s=t,i=Gl();return s.decode=(o,l)=>{const h=e(o,l);return i.decode(h)},s.encode=(o,l,h)=>{const g=i.encode(o);return r(g,l,h)},s}class vf{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=_.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(mt))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:s}=ht(mt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new V(s)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=ht(mt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:s}=ht(mt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new V(s)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=ht(mt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:s,programId:i}=ht(mt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new V(e),seed:r,space:s,programId:new V(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=ht(mt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new V(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:s}=ht(mt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new V(e),seed:r,programId:new V(s)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:s,space:i,programId:o}=ht(mt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new V(e),seed:r,lamports:s,space:i,programId:new V(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=ht(mt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new V(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ht(mt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=ht(mt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=ht(mt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new V(e)}}static checkProgramId(t){if(!t.equals(ae.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const mt=Object.freeze({Create:{index:0,layout:_.struct([_.u32("instruction"),_.ns64("lamports"),_.ns64("space"),at("programId")])},Assign:{index:1,layout:_.struct([_.u32("instruction"),at("programId")])},Transfer:{index:2,layout:_.struct([_.u32("instruction"),Tr("lamports")])},CreateWithSeed:{index:3,layout:_.struct([_.u32("instruction"),at("base"),ar("seed"),_.ns64("lamports"),_.ns64("space"),at("programId")])},AdvanceNonceAccount:{index:4,layout:_.struct([_.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:_.struct([_.u32("instruction"),at("authorized")])},AuthorizeNonceAccount:{index:7,layout:_.struct([_.u32("instruction"),at("authorized")])},Allocate:{index:8,layout:_.struct([_.u32("instruction"),_.ns64("space")])},AllocateWithSeed:{index:9,layout:_.struct([_.u32("instruction"),at("base"),ar("seed"),_.ns64("space"),at("programId")])},AssignWithSeed:{index:10,layout:_.struct([_.u32("instruction"),at("base"),ar("seed"),at("programId")])},TransferWithSeed:{index:11,layout:_.struct([_.u32("instruction"),Tr("lamports"),ar("seed"),at("programId")])},UpgradeNonceAccount:{index:12,layout:_.struct([_.u32("instruction")])}});class ae{constructor(){}static createAccount(t){const e=mt.Create,r=ct(e,{lamports:t.lamports,space:t.space,programId:ot(t.programId.toBuffer())});return new gt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=mt.TransferWithSeed;e=ct(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:ot(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=mt.Transfer;e=ct(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new gt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=mt.AssignWithSeed;e=ct(s,{base:ot(t.basePubkey.toBuffer()),seed:t.seed,programId:ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=mt.Assign;e=ct(s,{programId:ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=mt.CreateWithSeed,r=ct(e,{base:ot(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:ot(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new gt({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new lt;"basePubkey"in t&&"seed"in t?e.add(ae.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Fi,programId:this.programId})):e.add(ae.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Fi,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=mt.InitializeNonceAccount,r=ct(e,{authorized:ot(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:hn,isSigner:!1,isWritable:!1},{pubkey:Mr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new gt(s)}static nonceAdvance(t){const e=mt.AdvanceNonceAccount,r=ct(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:hn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new gt(s)}static nonceWithdraw(t){const e=mt.WithdrawNonceAccount,r=ct(e,{lamports:t.lamports});return new gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:hn,isSigner:!1,isWritable:!1},{pubkey:Mr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=mt.AuthorizeNonceAccount,r=ct(e,{authorized:ot(t.newAuthorizedPubkey.toBuffer())});return new gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=mt.AllocateWithSeed;e=ct(s,{base:ot(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=mt.Allocate;e=ct(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new gt({keys:r,programId:this.programId,data:e})}}ae.programId=new V("11111111111111111111111111111111");const Sf=Qe-300;class hr{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/hr.chunkSize)+1+1)}static async load(t,e,r,s,i){{const v=await t.getMinimumBalanceForRentExemption(i.length),I=await t.getAccountInfo(r.publicKey,"confirmed");let S=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==i.length&&(S=S||new lt,S.add(ae.allocate({accountPubkey:r.publicKey,space:i.length}))),I.owner.equals(s)||(S=S||new lt,S.add(ae.assign({accountPubkey:r.publicKey,programId:s}))),I.lamports<v&&(S=S||new lt,S.add(ae.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:v-I.lamports})))}else S=new lt().add(ae.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:v>0?v:1,space:i.length,programId:s}));S!==null&&await qi(t,S,[e,r],{commitment:"confirmed"})}const o=_.struct([_.u32("instruction"),_.u32("offset"),_.u32("bytesLength"),_.u32("bytesLengthPadding"),_.seq(_.u8("byte"),_.offset(_.u32(),-8),"bytes")]),l=hr.chunkSize;let h=0,g=i,b=[];for(;g.length>0;){const v=g.slice(0,l),I=nt.alloc(l+16);o.encode({instruction:0,offset:h,bytes:v,bytesLength:0,bytesLengthPadding:0},I);const S=new lt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:I});b.push(qi(t,S,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await rr(1e3/4),h+=l,g=g.slice(l)}await Promise.all(b);{const v=_.struct([_.u32("instruction")]),I=nt.alloc(v.span);v.encode({instruction:1},I);const S=new lt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Mr,isSigner:!1,isWritable:!1}],programId:s,data:I}),A="processed",R=await t.sendTransaction(S,[e,r],{preflightCommitment:A}),{context:T,value:C}=await t.confirmTransaction({signature:R,lastValidBlockHeight:S.lastValidBlockHeight,blockhash:S.recentBlockhash},A);if(C.err)throw new Error(`Transaction ${R} failed (${JSON.stringify(C)})`);for(;;){try{if(await t.getSlot({commitment:A})>T.slot)break}catch{}await new Promise(D=>setTimeout(D,Math.round(pc/2)))}}return!0}}hr.chunkSize=Sf;const Ef=new V("BPFLoader2111111111111111111111111111111111");class If{static getMinNumSignatures(t){return hr.getMinNumSignatures(t)}static load(t,e,r,s,i){return hr.load(t,e,r,i,s)}}function xf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ai,Mo;function _f(){if(Mo)return Ai;Mo=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,o,l,h,g,b,v;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(v=n.call(r),v==="[object Array]"){for(l="[",o=r.length-1,i=0;i<o;i++)l+=e(r[i],!0)+",";return o>-1&&(l+=e(r[i],!0)),l+"]"}else if(v==="[object Object]"){for(h=t(r).sort(),o=h.length,l="",i=0;i<o;)g=h[i],b=e(r[g],!1),b!==void 0&&(l&&(l+=","),l+=JSON.stringify(g)+":"+b),i++;return"{"+l+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Ai=function(r){var s=e(r,!1);if(s!==void 0)return""+s},Ai}var Af=_f(),To=xf(Af);const Kr=32;function Bi(n){let t=0;for(;n>1;)n/=2,t++;return t}function Bf(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class mc{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Bi(Bf(t+Kr+1))-Bi(Kr)-1,r=this.getSlotsInEpoch(e),s=t-(r-Kr);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Kr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Bi(Kr)):this.slotsPerEpoch}}var Rf=globalThis.fetch;class Mf extends Mh{constructor(t,e,r){const s=i=>{const o=Bh(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Tf(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const Po=56;class Di{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Tf(Pf,t),r=t.length-Po;ut(r>=0,"lookup table is invalid"),ut(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=_.struct([_.seq(at(),s,"addresses")]).decode(t.slice(Po));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new V(e.authority[0]):void 0,addresses:i.map(o=>new V(o))}}}const Pf={index:1,layout:_.struct([_.u32("typeIndex"),Tr("deactivationSlot"),_.nu64("lastExtendedSlot"),_.u8("lastExtendedStartIndex"),_.u8(),_.seq(at(),_.offset(_.u8(),-1),"authority")])},Lf=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Cf(n){const t=n.match(Lf);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,o=n.startsWith("https:")?"wss:":"ws:",l=s==null?null:parseInt(s.slice(1),10),h=l==null?"":`:${l+1}`;return`${o}//${r}${h}${i}`}const kt=Qr(us(V),$(),n=>new V(n)),wc=ls([$(),bt("base64")]),vs=Qr(us(nt),wc,n=>nt.from(n[0],"base64")),bc=30*1e3;function Of(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function yt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function Lo(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function kc(n){return me([W({jsonrpc:bt("2.0"),id:$(),result:n}),W({jsonrpc:bt("2.0"),id:$(),error:W({code:Cr(),message:$(),data:rt(th())})})])}const Uf=kc(Cr());function st(n){return Qr(kc(n),Uf,t=>"error"in t?t:{...t,result:H(t.result,n)})}function Et(n){return st(W({context:W({slot:O()}),value:n}))}function zn(n){return W({context:W({slot:O()}),value:n})}function Ri(n,t){return n===0?new lr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new V(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:le.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new _e(t)}const Nf=W({foundation:O(),foundationTerm:O(),initial:O(),taper:O(),terminal:O()}),zf=st(G(Z(W({epoch:O(),effectiveSlot:O(),amount:O(),postBalance:O(),commission:rt(Z(O()))})))),Kf=G(W({slot:O(),prioritizationFee:O()})),qf=W({total:O(),validator:O(),foundation:O(),epoch:O()}),Ff=W({epoch:O(),slotIndex:O(),slotsInEpoch:O(),absoluteSlot:O(),blockHeight:rt(O()),transactionCount:rt(O())}),Df=W({slotsPerEpoch:O(),leaderScheduleSlotOffset:O(),warmup:Ue(),firstNormalEpoch:O(),firstNormalSlot:O()}),Wf=Ga($(),G(O())),pr=Z(me([W({}),$()])),$f=W({err:pr}),Vf=bt("receivedSignature"),Hf=W({"solana-core":$(),"feature-set":rt(O())}),jf=W({program:$(),programId:kt,parsed:Cr()}),Gf=W({programId:kt,accounts:G(kt),data:$()}),Co=Et(W({err:Z(me([W({}),$()])),logs:Z(G($())),accounts:rt(Z(G(Z(W({executable:Ue(),owner:$(),lamports:O(),data:G($()),rentEpoch:rt(O())}))))),unitsConsumed:rt(O()),returnData:rt(Z(W({programId:$(),data:ls([$(),bt("base64")])}))),innerInstructions:rt(Z(G(W({index:O(),instructions:G(me([jf,Gf]))}))))})),Zf=Et(W({byIdentity:Ga($(),G(O())),range:W({firstSlot:O(),lastSlot:O()})}));function Yf(n,t,e,r,s,i){const o=e||Rf;let l;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let h;return r&&(h=async(b,v)=>{const I=await new Promise((S,A)=>{try{r(b,v,(R,T)=>S([R,T]))}catch(R){A(R)}});return await o(...I)}),new Ih(async(b,v)=>{const I={method:"POST",body:b,agent:l,headers:Object.assign({"Content-Type":"application/json"},t||{},Yd)};try{let S=5,A,R=500;for(;h?A=await h(n,I):A=await o(n,I),!(A.status!==429||s===!0||(S-=1,S===0));)console.error(`Server responded with ${A.status} ${A.statusText}.  Retrying after ${R}ms delay...`),await rr(R),R*=2;const T=await A.text();A.ok?v(null,T):v(new Error(`${A.status} ${A.statusText}: ${T}`))}catch(S){S instanceof Error&&v(S)}},{})}function Xf(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,o)=>{if(i){s(i);return}r(o)})})}function Jf(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}e(o)})})}const Qf=st(Nf),td=st(qf),ed=st(Kf),rd=st(Ff),nd=st(Df),id=st(Wf),sd=st(O()),od=Et(W({total:O(),circulating:O(),nonCirculating:O(),nonCirculatingAccounts:G(kt)})),Wi=W({amount:$(),uiAmount:Z(O()),decimals:O(),uiAmountString:rt($())}),ad=Et(G(W({address:kt,amount:$(),uiAmount:Z(O()),decimals:O(),uiAmountString:rt($())}))),cd=Et(G(W({pubkey:kt,account:W({executable:Ue(),owner:kt,lamports:O(),data:vs,rentEpoch:O()})}))),$i=W({program:$(),parsed:Cr(),space:O()}),ud=Et(G(W({pubkey:kt,account:W({executable:Ue(),owner:kt,lamports:O(),data:$i,rentEpoch:O()})}))),ld=Et(G(W({lamports:O(),address:kt}))),Hr=W({executable:Ue(),owner:kt,lamports:O(),data:vs,rentEpoch:O()}),hd=W({pubkey:kt,account:Hr}),fd=Qr(me([us(nt),$i]),me([wc,$i]),n=>Array.isArray(n)?H(n,vs):n),Vi=W({executable:Ue(),owner:kt,lamports:O(),data:fd,rentEpoch:O()}),dd=W({pubkey:kt,account:Vi}),pd=W({state:me([bt("active"),bt("inactive"),bt("activating"),bt("deactivating")]),active:O(),inactive:O()}),gd=st(G(W({signature:$(),slot:O(),err:pr,memo:Z($()),blockTime:rt(Z(O()))}))),yd=st(G(W({signature:$(),slot:O(),err:pr,memo:Z($()),blockTime:rt(Z(O()))}))),md=W({subscription:O(),result:zn(Hr)}),wd=W({pubkey:kt,account:Hr}),bd=W({subscription:O(),result:zn(wd)}),kd=W({parent:O(),slot:O(),root:O()}),vd=W({subscription:O(),result:kd}),Sd=me([W({type:me([bt("firstShredReceived"),bt("completed"),bt("optimisticConfirmation"),bt("root")]),slot:O(),timestamp:O()}),W({type:bt("createdBank"),parent:O(),slot:O(),timestamp:O()}),W({type:bt("frozen"),slot:O(),timestamp:O(),stats:W({numTransactionEntries:O(),numSuccessfulTransactions:O(),numFailedTransactions:O(),maxTransactionsPerEntry:O()})}),W({type:bt("dead"),slot:O(),timestamp:O(),err:$()})]),Ed=W({subscription:O(),result:Sd}),Id=W({subscription:O(),result:zn(me([$f,Vf]))}),xd=W({subscription:O(),result:O()}),_d=W({pubkey:$(),gossip:Z($()),tpu:Z($()),rpc:Z($()),version:Z($())}),Oo=W({votePubkey:$(),nodePubkey:$(),activatedStake:O(),epochVoteAccount:Ue(),epochCredits:G(ls([O(),O(),O()])),commission:O(),lastVote:O(),rootSlot:Z(O())}),Ad=st(W({current:G(Oo),delinquent:G(Oo)})),Bd=me([bt("processed"),bt("confirmed"),bt("finalized")]),Rd=W({slot:O(),confirmations:Z(O()),err:pr,confirmationStatus:rt(Bd)}),Md=Et(G(Z(Rd))),Td=st(O()),vc=W({accountKey:kt,writableIndexes:G(O()),readonlyIndexes:G(O())}),Ss=W({signatures:G($()),message:W({accountKeys:G($()),header:W({numRequiredSignatures:O(),numReadonlySignedAccounts:O(),numReadonlyUnsignedAccounts:O()}),instructions:G(W({accounts:G(O()),data:$(),programIdIndex:O()})),recentBlockhash:$(),addressTableLookups:rt(G(vc))})}),Sc=W({pubkey:kt,signer:Ue(),writable:Ue(),source:rt(me([bt("transaction"),bt("lookupTable")]))}),Ec=W({accountKeys:G(Sc),signatures:G($())}),Ic=W({parsed:Cr(),program:$(),programId:kt}),xc=W({accounts:G(kt),data:$(),programId:kt}),Pd=me([xc,Ic]),Ld=me([W({parsed:Cr(),program:$(),programId:$()}),W({accounts:G($()),data:$(),programId:$()})]),_c=Qr(Pd,Ld,n=>"accounts"in n?H(n,xc):H(n,Ic)),Ac=W({signatures:G($()),message:W({accountKeys:G(Sc),instructions:G(_c),recentBlockhash:$(),addressTableLookups:rt(Z(G(vc)))})}),En=W({accountIndex:O(),mint:$(),owner:rt($()),programId:rt($()),uiTokenAmount:Wi}),Bc=W({writable:G(kt),readonly:G(kt)}),Kn=W({err:pr,fee:O(),innerInstructions:rt(Z(G(W({index:O(),instructions:G(W({accounts:G(O()),data:$(),programIdIndex:O()}))})))),preBalances:G(O()),postBalances:G(O()),logMessages:rt(Z(G($()))),preTokenBalances:rt(Z(G(En))),postTokenBalances:rt(Z(G(En))),loadedAddresses:rt(Bc),computeUnitsConsumed:rt(O()),costUnits:rt(O())}),Es=W({err:pr,fee:O(),innerInstructions:rt(Z(G(W({index:O(),instructions:G(_c)})))),preBalances:G(O()),postBalances:G(O()),logMessages:rt(Z(G($()))),preTokenBalances:rt(Z(G(En))),postTokenBalances:rt(Z(G(En))),loadedAddresses:rt(Bc),computeUnitsConsumed:rt(O()),costUnits:rt(O())}),Or=me([bt(0),bt("legacy")]),gr=W({pubkey:$(),lamports:O(),postBalance:Z(O()),rewardType:Z($()),commission:rt(Z(O()))}),Cd=st(Z(W({blockhash:$(),previousBlockhash:$(),parentSlot:O(),transactions:G(W({transaction:Ss,meta:Z(Kn),version:rt(Or)})),rewards:rt(G(gr)),blockTime:Z(O()),blockHeight:Z(O())}))),Od=st(Z(W({blockhash:$(),previousBlockhash:$(),parentSlot:O(),rewards:rt(G(gr)),blockTime:Z(O()),blockHeight:Z(O())}))),Ud=st(Z(W({blockhash:$(),previousBlockhash:$(),parentSlot:O(),transactions:G(W({transaction:Ec,meta:Z(Kn),version:rt(Or)})),rewards:rt(G(gr)),blockTime:Z(O()),blockHeight:Z(O())}))),Nd=st(Z(W({blockhash:$(),previousBlockhash:$(),parentSlot:O(),transactions:G(W({transaction:Ac,meta:Z(Es),version:rt(Or)})),rewards:rt(G(gr)),blockTime:Z(O()),blockHeight:Z(O())}))),zd=st(Z(W({blockhash:$(),previousBlockhash:$(),parentSlot:O(),transactions:G(W({transaction:Ec,meta:Z(Es),version:rt(Or)})),rewards:rt(G(gr)),blockTime:Z(O()),blockHeight:Z(O())}))),Kd=st(Z(W({blockhash:$(),previousBlockhash:$(),parentSlot:O(),rewards:rt(G(gr)),blockTime:Z(O()),blockHeight:Z(O())}))),qd=st(Z(W({blockhash:$(),previousBlockhash:$(),parentSlot:O(),transactions:G(W({transaction:Ss,meta:Z(Kn)})),rewards:rt(G(gr)),blockTime:Z(O())}))),Uo=st(Z(W({blockhash:$(),previousBlockhash:$(),parentSlot:O(),signatures:G($()),blockTime:Z(O())}))),Mi=st(Z(W({slot:O(),meta:Z(Kn),blockTime:rt(Z(O())),transaction:Ss,version:rt(Or)}))),un=st(Z(W({slot:O(),transaction:Ac,meta:Z(Es),blockTime:rt(Z(O())),version:rt(Or)}))),Fd=Et(W({blockhash:$(),lastValidBlockHeight:O()})),Dd=Et(Ue()),Wd=W({slot:O(),numTransactions:O(),numSlots:O(),samplePeriodSecs:O()}),$d=st(G(Wd)),Vd=Et(Z(W({feeCalculator:W({lamportsPerSignature:O()})}))),Hd=st($()),jd=st($()),Gd=W({err:pr,logs:G($()),signature:$()}),Zd=W({result:zn(Gd),subscription:O()}),Yd={"solana-client":"js/1.0.0-maintenance"};class Xd{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const g={};return async b=>{const{commitment:v,config:I}=yt(b),S=this._buildArgs([],v,void 0,I),A=To(S);return g[A]=g[A]??(async()=>{try{const R=await this._rpcRequest("getBlockHeight",S),T=H(R,st(O()));if("error"in T)throw new tt(T.error,"failed to get block height information");return T.result}finally{delete g[A]}})(),await g[A]}})();let r,s,i,o,l,h;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,l=e.disableRetryOnRateLimit,h=e.httpAgent),this._rpcEndpoint=Of(t),this._rpcWsEndpoint=r||Cf(t),this._rpcClient=Yf(t,s,i,o,l,h),this._rpcRequest=Xf(this._rpcClient),this._rpcBatchRequest=Jf(this._rpcClient),this._rpcWebSocket=new Mf(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=yt(e),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),l=H(o,Et(O()));if("error"in l)throw new tt(l.error,`failed to get balance for ${t.toBase58()}`);return l.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=H(e,st(Z(O())));if("error"in r)throw new tt(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=H(t,st(O()));if("error"in e)throw new tt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=H(t,sd);if("error"in e)throw new tt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=H(r,od);if("error"in s)throw new tt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=H(s,Et(Wi));if("error"in i)throw new tt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=H(s,Et(Wi));if("error"in i)throw new tt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=yt(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const l=this._buildArgs(o,s,"base64",i),h=await this._rpcRequest("getTokenAccountsByOwner",l),g=H(h,cd);if("error"in g)throw new tt(g.error,`failed to get token accounts owned by account ${t.toBase58()}`);return g.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),l=H(o,ud);if("error"in l)throw new tt(l.error,`failed to get token accounts owned by account ${t.toBase58()}`);return l.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=H(s,ld);if("error"in i)throw new tt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=H(s,ad);if("error"in i)throw new tt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=yt(e),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),l=H(o,Et(Z(Hr)));if("error"in l)throw new tt(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=yt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),l=H(o,Et(Z(Vi)));if("error"in l)throw new tt(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=yt(e),i=t.map(g=>g.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),l=await this._rpcRequest("getMultipleAccounts",o),h=H(l,Et(G(Z(Vi))));if("error"in h)throw new tt(h.error,`failed to get info for accounts ${i}`);return h.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=yt(e),i=t.map(g=>g.toBase58()),o=this._buildArgs([i],r,"base64",s),l=await this._rpcRequest("getMultipleAccounts",o),h=H(l,Et(G(Z(Hr))));if("error"in h)throw new tt(h.error,`failed to get info for accounts ${i}`);return h.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=yt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),l=await this._rpcRequest("getStakeActivation",o),h=H(l,st(pd));if("error"in h)throw new tt(h.error,`failed to get Stake Activation ${t.toBase58()}`);return h.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=yt(e),{encoding:i,...o}=s||{},l=this._buildArgs([t.toBase58()],r,i||"base64",{...o,...o.filters?{filters:Lo(o.filters)}:null}),h=await this._rpcRequest("getProgramAccounts",l),g=G(hd),b=o.withContext===!0?H(h,Et(g)):H(h,st(g));if("error"in b)throw new tt(b.error,`failed to get accounts owned by program ${t.toBase58()}`);return b.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=yt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),l=H(o,st(G(dd)));if("error"in l)throw new tt(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=le.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return ut(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const o=new Promise((h,g)=>{try{r=this.onSignature(e,(v,I)=>{r=void 0;const S={context:I,value:v};h({__type:qe.PROCESSED,response:S})},t);const b=new Promise(v=>{r==null?v():s=this._onSubscriptionStateChange(r,I=>{I==="subscribed"&&v()})});(async()=>{if(await b,i)return;const v=await this.getSignatureStatus(e);if(i||v==null)return;const{context:I,value:S}=v;if(S!=null)if(S?.err)g(S.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(S.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(S.confirmationStatus==="processed"||S.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,h({__type:qe.PROCESSED,response:{context:I,value:S}})}})()}catch(b){g(b)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(v=>{const I=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let S=await I();if(!i){for(;S<=r;)if(await rr(1e3),i||(S=await I(),i))return;v({__type:qe.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),g=this.getCancellationPromise(e);let b;try{const v=await Promise.race([g,h,o]);if(v.__type===qe.PROCESSED)b=v.response;else throw new ys(s)}finally{i=!0,l()}return b}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let l=!1;const h=new Promise(S=>{let A=i,R=null;const T=async()=>{try{const{context:C,value:D}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return R=C.slot,D?.nonce}catch{return A}};(async()=>{if(A=await T(),!l)for(;;){if(i!==A){S({__type:qe.NONCE_INVALID,slotInWhichNonceDidAdvance:R});return}if(await rr(2e3),l||(A=await T(),l))return}})()}),{abortConfirmation:g,confirmationPromise:b}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),v=this.getCancellationPromise(e);let I;try{const S=await Promise.race([v,b,h]);if(S.__type===qe.PROCESSED)I=S.response;else{let A;for(;;){const R=await this.getSignatureStatus(o);if(R==null)break;if(R.context.slot<(S.slotInWhichNonceDidAdvance??r)){await rr(400);continue}A=R;break}if(A?.value){const R=t||"finalized",{confirmationStatus:T}=A.value;switch(R){case"processed":case"recent":if(T!=="processed"&&T!=="confirmed"&&T!=="finalized")throw new vr(o);break;case"confirmed":case"single":case"singleGossip":if(T!=="confirmed"&&T!=="finalized")throw new vr(o);break;case"finalized":case"max":case"root":if(T!=="finalized")throw new vr(o);break;default:}I={context:A.context,value:{err:A.value.err}}}else throw new vr(o)}}finally{l=!0,g()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(h=>{let g=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{g=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>h({__type:qe.TIMED_OUT,timeoutMs:g}),g)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let l;try{const h=await Promise.race([o,s]);if(h.__type===qe.PROCESSED)l=h.response;else throw new ms(e,h.timeoutMs/1e3)}finally{clearTimeout(r),i()}return l}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=H(t,st(G(_d)));if("error"in e)throw new tt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=H(r,Ad);if("error"in s)throw new tt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=yt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),o=H(i,st(O()));if("error"in o)throw new tt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=yt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=H(i,st($()));if("error"in o)throw new tt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=H(s,st(G(kt)));if("error"in i)throw new tt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);ut(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=H(s,Md);if("error"in i)throw new tt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=yt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=H(i,st(O()));if("error"in o)throw new tt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=H(r,Qf);if("error"in s)throw new tt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=yt(r),o=this._buildArgs([t.map(g=>g.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),l=await this._rpcRequest("getInflationReward",o),h=H(l,zf);if("error"in h)throw new tt(h.error,"failed to get inflation reward");return h.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=H(t,td);if("error"in e)throw new tt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=yt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=H(i,rd);if("error"in o)throw new tt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=H(t,nd);if("error"in e)throw new tt(e.error,"failed to get epoch schedule");const r=e.result;return new mc(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=H(t,id);if("error"in e)throw new tt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=H(s,Td);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=H(e,$d);if("error"in r)throw new tt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=H(s,Vd);if("error"in i)throw new tt(i.error,"failed to get fee calculator");const{context:o,value:l}=i.result;return{context:o,value:l!==null?l.feeCalculator:null}}async getFeeForMessage(t,e){const r=ot(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),o=H(i,Et(Z(O())));if("error"in o)throw new tt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),r=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=H(s,ed);if("error"in i)throw new tt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=yt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=H(i,Fd);if("error"in o)throw new tt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=yt(e),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),l=H(o,Dd);if("error"in l)throw new tt(l.error,"failed to determine if the blockhash `"+t+"`is valid");return l.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=H(t,st(Hf));if("error"in e)throw new tt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=H(t,st($()));if("error"in e)throw new tt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=yt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const l=H(o,Ud);if("error"in l)throw l.error;return l.result}case"none":{const l=H(o,Od);if("error"in l)throw l.error;return l.result}default:{const l=H(o,Cd);if("error"in l)throw l.error;const{result:h}=l;return h?{...h,transactions:h.transactions.map(({transaction:g,meta:b,version:v})=>({meta:b,transaction:{...g,message:Ri(v,g.message)},version:v}))}:null}}}catch(l){throw new tt(l,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=yt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const l=H(o,zd);if("error"in l)throw l.error;return l.result}case"none":{const l=H(o,Kd);if("error"in l)throw l.error;return l.result}default:{const l=H(o,Nd);if("error"in l)throw l.error;return l.result}}}catch(l){throw new tt(l,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:l,...h}=t;r=l,e=h}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=H(i,Zf);if("error"in o)throw new tt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:s}=yt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),l=H(o,Mi);if("error"in l)throw new tt(l.error,"failed to get transaction");const h=l.result;return h&&{...h,transaction:{...h.transaction,message:Ri(h.version,h.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=yt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),l=H(o,un);if("error"in l)throw new tt(l.error,"failed to get transaction");return l.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=yt(e),i=t.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(h=>{const g=H(h,un);if("error"in g)throw new tt(g.error,"failed to get transactions");return g.result})}async getTransactions(t,e){const{commitment:r,config:s}=yt(e),i=t.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(h=>{const g=H(h,Mi);if("error"in g)throw new tt(g.error,"failed to get transactions");const b=g.result;return b&&{...b,transaction:{...b.transaction,message:Ri(b.version,b.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=H(s,qd);if("error"in i)throw new tt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const l={...o,transactions:o.transactions.map(({transaction:h,meta:g})=>{const b=new _e(h.message);return{meta:g,transaction:{...h,message:b}}})};return{...l,transactions:l.transactions.map(({transaction:h,meta:g})=>({meta:g,transaction:lt.populate(h.message,h.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),o=H(i,st(G(O())));if("error"in o)throw new tt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=H(s,Uo);if("error"in i)throw new tt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=H(s,Uo);if("error"in i)throw new tt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=H(s,Mi);if("error"in i)throw new tt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const l=new _e(o.transaction.message),h=o.transaction.signatures;return{...o,transaction:lt.populate(l,h)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=H(s,un);if("error"in i)throw new tt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const l=H(o,un);if("error"in l)throw new tt(l.error,"failed to get confirmed transactions");return l.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const h=await this.getConfirmedBlockSignatures(e,"finalized");h.signatures.length>0&&(s.until=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const h=await this.getConfirmedBlockSignatures(r);h.signatures.length>0&&(s.before=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(h=>h.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=H(i,gd);if("error"in o)throw new tt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=H(i,yd);if("error"in o)throw new tt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Di({key:t,state:Di.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Nn.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=H(r,Hd);if("error"in s)throw new tt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await rr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=bc;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await rr(pc/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=yt(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=H(i,Et(O()));if("error"in o)throw new tt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const R=t.serialize(),T=nt.from(R).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const C=e||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(C.innerInstructions=e.innerInstructions);const D=[T,C],K=await this._rpcRequest("simulateTransaction",D),j=H(K,Co);if("error"in j)throw new Error("failed to simulate transaction: "+j.error.message);return j.result}let s;if(t instanceof lt){let A=t;s=new lt,s.feePayer=A.feePayer,s.instructions=t.instructions,s.nonceInfo=A.nonceInfo,s.signatures=A.signatures}else s=lt.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let A=this._disableBlockhashCaching;for(;;){const R=await this._blockhashWithExpiryBlockHeight(A);if(s.lastValidBlockHeight=R.lastValidBlockHeight,s.recentBlockhash=R.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const T=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(T)&&!this._blockhashInfo.transactionSignatures.includes(T)){this._blockhashInfo.simulatedSignatures.push(T);break}else A=!0}}const o=s._compile(),l=o.serialize(),g=s._serialize(l).toString("base64"),b={encoding:"base64",commitment:this.commitment};if(r){const A=(Array.isArray(r)?r:o.nonProgramIds()).map(R=>R.toBase58());b.accounts={encoding:"base64",addresses:A}}i&&(b.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(b.innerInstructions=e.innerInstructions);const v=[g,b],I=await this._rpcRequest("simulateTransaction",v),S=H(I,Co);if("error"in S){let A;if("data"in S.error&&(A=S.error.data.logs,A&&Array.isArray(A))){const R=`
    `,T=R+A.join(R);console.error(S.error.message,T)}throw new Vr({action:"simulate",signature:"",transactionMessage:S.error.message,logs:A})}return S.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const l=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=l.lastValidBlockHeight,t.recentBlockhash=l.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const h=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(h))o=!0;else{this._blockhashInfo.transactionSignatures.push(h);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=ot(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],l=await this._rpcRequest("sendTransaction",o),h=H(l,jd);if("error"in h){let g;throw"data"in h.error&&(g=h.error.data.logs),new Vr({action:s?"send":"simulate",signature:"",transactionMessage:h.error.message,logs:g})}return h.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const l=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:l,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[l]=s.callbacks,await this._updateSubscriptions()}catch(l){if(console.error(`Received ${l instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:l}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(l){if(l instanceof Error&&console.error(`${o} error:`,l.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=H(t,md);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=To([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];ut(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=yt(r),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=H(t,bd);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:o}=yt(r),l=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Lo(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},l)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=H(t,Zd);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=H(t,vd);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=H(t,Ed);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=H(t,Id);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,l)=>{if(o.type==="status"){e(o.result,l);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),l=this._makeSubscription({callback:(h,g)=>{e(h,g);try{this.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return l}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=H(t,xd);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class xr{constructor(t){this._keypair=void 0,this._keypair=t??Ao()}static generate(){return new xr(Ao())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=Sn(s);for(let o=0;o<32;o++)if(r[o]!==i[o])throw new Error("provided secretKey is invalid")}return new xr({publicKey:r,secretKey:t})}static fromSeed(t){const e=Sn(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new xr({publicKey:e,secretKey:r})}get publicKey(){return new V(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const We=Object.freeze({CreateLookupTable:{index:0,layout:_.struct([_.u32("instruction"),Tr("recentSlot"),_.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:_.struct([_.u32("instruction")])},ExtendLookupTable:{index:2,layout:_.struct([_.u32("instruction"),Tr(),_.seq(at(),_.offset(_.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:_.struct([_.u32("instruction")])},CloseLookupTable:{index:4,layout:_.struct([_.u32("instruction")])}});class Jd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=_.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(We))if(o.index==r){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=ht(We.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=ht(We.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new V(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Is.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class Is{constructor(){}static createLookupTable(t){const[e,r]=V.findProgramAddressSync([t.authority.toBuffer(),Va().encode(t.recentSlot)],this.programId),s=We.CreateLookupTable,i=ct(s,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:ae.programId,isSigner:!1,isWritable:!1}];return[new gt({programId:this.programId,keys:o,data:i}),e]}static freezeLookupTable(t){const e=We.FreezeLookupTable,r=ct(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new gt({programId:this.programId,keys:s,data:r})}static extendLookupTable(t){const e=We.ExtendLookupTable,r=ct(e,{addresses:t.addresses.map(i=>i.toBytes())}),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&s.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:ae.programId,isSigner:!1,isWritable:!1}),new gt({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(t){const e=We.DeactivateLookupTable,r=ct(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new gt({programId:this.programId,keys:s,data:r})}static closeLookupTable(t){const e=We.CloseLookupTable,r=ct(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new gt({programId:this.programId,keys:s,data:r})}}Is.programId=new V("AddressLookupTab1e1111111111111111111111111");class Qd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=_.u8("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Pe))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=ht(Pe.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=ht(Pe.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=ht(Pe.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=ht(Pe.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(xs.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Pe=Object.freeze({RequestUnits:{index:0,layout:_.struct([_.u8("instruction"),_.u32("units"),_.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:_.struct([_.u8("instruction"),_.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:_.struct([_.u8("instruction"),_.u32("units")])},SetComputeUnitPrice:{index:3,layout:_.struct([_.u8("instruction"),Tr("microLamports")])}});class xs{constructor(){}static requestUnits(t){const e=Pe.RequestUnits,r=ct(e,t);return new gt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=Pe.RequestHeapFrame,r=ct(e,t);return new gt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=Pe.SetComputeUnitLimit,r=ct(e,t);return new gt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=Pe.SetComputeUnitPrice,r=ct(e,{microLamports:BigInt(t.microLamports)});return new gt({keys:[],programId:this.programId,data:r})}}xs.programId=new V("ComputeBudget111111111111111111111111111111");const No=64,zo=32,Ko=64,qo=_.struct([_.u8("numSignatures"),_.u8("padding"),_.u16("signatureOffset"),_.u16("signatureInstructionIndex"),_.u16("publicKeyOffset"),_.u16("publicKeyInstructionIndex"),_.u16("messageDataOffset"),_.u16("messageDataSize"),_.u16("messageInstructionIndex")]);class qn{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,instructionIndex:i}=t;ut(e.length===zo,`Public Key must be ${zo} bytes but received ${e.length} bytes`),ut(s.length===Ko,`Signature must be ${Ko} bytes but received ${s.length} bytes`);const o=qo.span,l=o+e.length,h=l+s.length,g=1,b=nt.alloc(h+r.length),v=i??65535;return qo.encode({numSignatures:g,padding:0,signatureOffset:l,signatureInstructionIndex:v,publicKeyOffset:o,publicKeyInstructionIndex:v,messageDataOffset:h,messageDataSize:r.length,messageInstructionIndex:v},b),b.fill(e,o),b.fill(s,l),b.fill(r,h),new gt({keys:[],programId:qn.programId,data:b})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;ut(e.length===No,`Private key must be ${No} bytes but received ${e.length} bytes`);try{const i=xr.fromSecretKey(e),o=i.publicKey.toBytes(),l=ps(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:l,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}qn.programId=new V("Ed25519SigVerify111111111111111111111111111");const t0=(n,t)=>{const e=ds.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};ds.utils.isValidPrivateKey;const e0=ds.getPublicKey,Fo=32,Ti=20,Do=64,r0=11,Pi=_.struct([_.u8("numSignatures"),_.u16("signatureOffset"),_.u8("signatureInstructionIndex"),_.u16("ethAddressOffset"),_.u8("ethAddressInstructionIndex"),_.u16("messageDataOffset"),_.u16("messageDataSize"),_.u8("messageInstructionIndex"),_.blob(20,"ethAddress"),_.blob(64,"signature"),_.u8("recoveryId")]);class _r{constructor(){}static publicKeyToEthAddress(t){ut(t.length===Do,`Public key must be ${Do} bytes but received ${t.length} bytes`);try{return nt.from(Io(ot(t))).slice(-Ti)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,recoveryId:i,instructionIndex:o}=t;return _r.createInstructionWithEthAddress({ethAddress:_r.publicKeyToEthAddress(e),message:r,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:s,recoveryId:i,instructionIndex:o=0}=t;let l;typeof e=="string"?e.startsWith("0x")?l=nt.from(e.substr(2),"hex"):l=nt.from(e,"hex"):l=e,ut(l.length===Ti,`Address must be ${Ti} bytes but received ${l.length} bytes`);const h=1+r0,g=h,b=h+l.length,v=b+s.length+1,I=1,S=nt.alloc(Pi.span+r.length);return Pi.encode({numSignatures:I,signatureOffset:b,signatureInstructionIndex:o,ethAddressOffset:g,ethAddressInstructionIndex:o,messageDataOffset:v,messageDataSize:r.length,messageInstructionIndex:o,signature:ot(s),ethAddress:ot(l),recoveryId:i},S),S.fill(ot(r),Pi.span),new gt({keys:[],programId:_r.programId,data:S})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;ut(e.length===Fo,`Private key must be ${Fo} bytes but received ${e.length} bytes`);try{const i=ot(e),o=e0(i,!1).slice(1),l=nt.from(Io(ot(r))),[h,g]=t0(l,i);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:h,recoveryId:g,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}_r.programId=new V("KeccakSecp256k11111111111111111111111111111");var Rc;const Mc=new V("StakeConfig11111111111111111111111111111111");class Tc{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class tn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Rc=tn;tn.default=new Rc(0,0,V.default);class n0{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=_.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(oe))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=ht(oe.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Tc(new V(e.staker),new V(e.withdrawer)),lockup:new tn(r.unixTimestamp,r.epoch,new V(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),ht(oe.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=ht(oe.Authorize,t.data),s={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new V(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:s,authorityOwner:i}=ht(oe.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:s,authorityOwner:new V(i),newAuthorizedPubkey:new V(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=ht(oe.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ht(oe.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=ht(oe.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ht(oe.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Fn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const oe=Object.freeze({Initialize:{index:0,layout:_.struct([_.u32("instruction"),af(),cf()])},Authorize:{index:1,layout:_.struct([_.u32("instruction"),at("newAuthorized"),_.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:_.struct([_.u32("instruction")])},Split:{index:3,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},Withdraw:{index:4,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},Deactivate:{index:5,layout:_.struct([_.u32("instruction")])},Merge:{index:7,layout:_.struct([_.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:_.struct([_.u32("instruction"),at("newAuthorized"),_.u32("stakeAuthorizationType"),ar("authoritySeed"),at("authorityOwner")])}}),i0=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Fn{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:s}=t,i=s||tn.default,o=oe.Initialize,l=ct(o,{authorized:{staker:ot(r.staker.toBuffer()),withdrawer:ot(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:ot(i.custodian.toBuffer())}}),h={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Mr,isSigner:!1,isWritable:!1}],programId:this.programId,data:l};return new gt(h)}static createAccountWithSeed(t){const e=new lt;e.add(ae.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static createAccount(t){const e=new lt;e.add(ae.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:s}=t,i=oe.Delegate,o=ct(i);return new lt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:fn,isSigner:!1,isWritable:!1},{pubkey:Mc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=t,l=oe.Authorize,h=ct(l,{newAuthorized:ot(s.toBuffer()),stakeAuthorizationType:i.index}),g=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&g.push({pubkey:o,isSigner:!0,isWritable:!1}),new lt().add({keys:g,programId:this.programId,data:h})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:l,custodianPubkey:h}=t,g=oe.AuthorizeWithSeed,b=ct(g,{newAuthorized:ot(o.toBuffer()),stakeAuthorizationType:l.index,authoritySeed:s,authorityOwner:ot(i.toBuffer())}),v=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Be,isSigner:!1,isWritable:!1}];return h&&v.push({pubkey:h,isSigner:!0,isWritable:!1}),new lt().add({keys:v,programId:this.programId,data:b})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:s,lamports:i}=t,o=oe.Split,l=ct(o,{lamports:i});return new gt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:l})}static split(t,e){const r=new lt;return r.add(ae.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:l,lamports:h}=t,g=new lt;return g.add(ae.allocate({accountPubkey:i,basePubkey:o,seed:l,space:this.space,programId:this.programId})),e&&e>0&&g.add(ae.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),g.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,lamports:h}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:s}=t,i=oe.Merge,o=ct(i);return new lt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:fn,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:s,lamports:i,custodianPubkey:o}=t,l=oe.Withdraw,h=ct(l,{lamports:i}),g=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:fn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&g.push({pubkey:o,isSigner:!0,isWritable:!1}),new lt().add({keys:g,programId:this.programId,data:h})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,s=oe.Deactivate,i=ct(s);return new lt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Fn.programId=new V("Stake11111111111111111111111111111111111111");Fn.space=200;class Pc{constructor(t,e,r,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=s}}class s0{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=_.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Le))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=ht(Le.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Pc(new V(e.nodePubkey),new V(e.authorizedVoter),new V(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=ht(Le.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new V(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:s,voteAuthorizationType:i}}=ht(Le.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new V(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new V(s),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=ht(Le.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Ur.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Le=Object.freeze({InitializeAccount:{index:0,layout:_.struct([_.u32("instruction"),uf()])},Authorize:{index:1,layout:_.struct([_.u32("instruction"),at("newAuthorized"),_.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:_.struct([_.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:_.struct([_.u32("instruction"),lf()])}}),o0=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Ur{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:s}=t,i=Le.InitializeAccount,o=ct(i,{voteInit:{nodePubkey:ot(s.nodePubkey.toBuffer()),authorizedVoter:ot(s.authorizedVoter.toBuffer()),authorizedWithdrawer:ot(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),l={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Mr,isSigner:!1,isWritable:!1},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new gt(l)}static createAccount(t){const e=new lt;return e.add(ae.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:i}=t,o=Le.Authorize,l=ct(o,{newAuthorized:ot(s.toBuffer()),voteAuthorizationType:i.index}),h=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new lt().add({keys:h,programId:this.programId,data:l})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:l}=t,h=Le.AuthorizeWithSeed,g=ct(h,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:ot(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:ot(i.toBuffer()),voteAuthorizationType:o.index}}),b=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new lt().add({keys:b,programId:this.programId,data:g})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:i}=t,o=Le.Withdraw,l=ct(o,{lamports:s}),h=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new lt().add({keys:h,programId:this.programId,data:l})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Ur.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:s}=t,i=Le.UpdateValidatorIdentity,o=ct(i),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new lt().add({keys:l,programId:this.programId,data:o})}}Ur.programId=new V("Vote111111111111111111111111111111111111111");Ur.space=3762;const Lc=new V("Va1idator1nfo111111111111111111111111111111"),a0=W({name:$(),website:rt($()),details:rt($()),iconUrl:rt($()),keybaseUsername:rt($())});class _s{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(we(e)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new V(be(e,0,Oe)),l=Te(e)===1;s.push({publicKey:o,isSigner:l})}if(s[0].publicKey.equals(Lc)&&s[1].isSigner){const i=ar().decode(nt.from(e)),o=JSON.parse(i);return Ha(o,a0),new _s(s[1].publicKey,o)}return null}}const c0=new V("Vote111111111111111111111111111111111111111"),u0=_.struct([at("nodePubkey"),at("authorizedWithdrawer"),_.u8("commission"),_.nu64(),_.seq(_.struct([_.nu64("slot"),_.u32("confirmationCount")]),_.offset(_.u32(),-8),"votes"),_.u8("rootSlotValid"),_.nu64("rootSlot"),_.nu64(),_.seq(_.struct([_.nu64("epoch"),at("authorizedVoter")]),_.offset(_.u32(),-8),"authorizedVoters"),_.struct([_.seq(_.struct([at("authorizedPubkey"),_.nu64("epochOfLastAuthorizedSwitch"),_.nu64("targetEpoch")]),32,"buf"),_.nu64("idx"),_.u8("isEmpty")],"priorVoters"),_.nu64(),_.seq(_.struct([_.nu64("epoch"),_.nu64("credits"),_.nu64("prevCredits")]),_.offset(_.u32(),-8),"epochCredits"),_.struct([_.nu64("slot"),_.nu64("timestamp")],"lastTimestamp")]);class As{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=u0.decode(ot(t),4);let s=r.rootSlot;return r.rootSlotValid||(s=null),new As({nodePubkey:new V(r.nodePubkey),authorizedWithdrawer:new V(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:s,authorizedVoters:r.authorizedVoters.map(l0),priorVoters:h0(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function l0({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new V(n)}}function Wo({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new V(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function h0({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(Wo),...n.slice(0,t).map(Wo)]}const $o={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function f0(n,t){const e=t===!1?"http":"https";if(!n)return $o[e].devnet;const r=$o[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}async function d0(n,t,e,r){let s,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(s=e,i=r):i=e;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},l=await n.sendRawTransaction(t,o),h=i&&i.commitment,b=(await(s?n.confirmTransaction(s,h):n.confirmTransaction(l,h))).value;if(b.err)throw l!=null?new Vr({action:o?.skipPreflight?"send":"simulate",signature:l,transactionMessage:`Status: (${JSON.stringify(b)})`}):new Error(`Raw transaction ${l} failed (${JSON.stringify(b)})`);return l}const p0=1e9,g0=Object.freeze(Object.defineProperty({__proto__:null,Account:nf,AddressLookupTableAccount:Di,AddressLookupTableInstruction:Jd,AddressLookupTableProgram:Is,Authorized:Tc,BLOCKHASH_CACHE_TIMEOUT_MS:bc,BPF_LOADER_DEPRECATED_PROGRAM_ID:sf,BPF_LOADER_PROGRAM_ID:Ef,BpfLoader:If,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Pe,ComputeBudgetInstruction:Qd,ComputeBudgetProgram:xs,Connection:Xd,Ed25519Program:qn,Enum:ef,EpochSchedule:mc,FeeCalculatorLayout:gc,Keypair:xr,LAMPORTS_PER_SOL:p0,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:We,Loader:hr,Lockup:tn,MAX_SEED_LENGTH:hc,Message:_e,MessageAccountKeys:$r,MessageV0:lr,NONCE_ACCOUNT_LENGTH:Fi,NonceAccount:Nn,PACKET_DATA_SIZE:Qe,PUBLIC_KEY_LENGTH:Oe,PublicKey:V,SIGNATURE_LENGTH_IN_BYTES:Wr,SOLANA_SCHEMA:qr,STAKE_CONFIG_ID:Mc,STAKE_INSTRUCTION_LAYOUTS:oe,SYSTEM_INSTRUCTION_LAYOUTS:mt,SYSVAR_CLOCK_PUBKEY:Be,SYSVAR_EPOCH_SCHEDULE_PUBKEY:gf,SYSVAR_INSTRUCTIONS_PUBKEY:yf,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:hn,SYSVAR_RENT_PUBKEY:Mr,SYSVAR_REWARDS_PUBKEY:mf,SYSVAR_SLOT_HASHES_PUBKEY:wf,SYSVAR_SLOT_HISTORY_PUBKEY:bf,SYSVAR_STAKE_HISTORY_PUBKEY:fn,Secp256k1Program:_r,SendTransactionError:Vr,SolanaJSONRPCError:tt,SolanaJSONRPCErrorCode:kf,StakeAuthorizationLayout:i0,StakeInstruction:n0,StakeProgram:Fn,Struct:gs,SystemInstruction:vf,SystemProgram:ae,Transaction:lt,TransactionExpiredBlockheightExceededError:ys,TransactionExpiredNonceInvalidError:vr,TransactionExpiredTimeoutError:ms,TransactionInstruction:gt,TransactionMessage:bs,TransactionStatus:qe,VALIDATOR_INFO_KEY:Lc,VERSION_PREFIX_MASK:On,VOTE_PROGRAM_ID:c0,ValidatorInfo:_s,VersionedMessage:ws,VersionedTransaction:ks,VoteAccount:As,VoteAuthorizationLayout:o0,VoteInit:Pc,VoteInstruction:s0,VoteProgram:Ur,clusterApiUrl:f0,sendAndConfirmRawTransaction:d0,sendAndConfirmTransaction:qi},Symbol.toStringTag,{value:"Module"})),b0=Mn(g0);export{nt as B,Xd as C,_ as L,V as P,ae as S,gt as T,b0 as a,Vr as b,le as c,lt as d,uo as e,Be as f,Rn as g,Mr as h,g0 as i,Fa as r,po as s};
