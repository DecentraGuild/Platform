import{g as Sn,r as pr,a as wr,b as ft,c as Se,P as W,B as ne,s as In,S as xn,T as yr,d as gr,e as Ln,f as mr,h as vr}from"./DG6ESaol.js";var Ue={exports:{}},Ct;function br(){if(Ct)return Ue.exports;Ct=1;const r=/[\p{Lu}]/u,t=/[\p{Ll}]/u,e=/^[\p{Lu}](?![\p{Lu}])/gu,n=/([\p{Alpha}\p{N}_]|$)/u,o=/[_.\- ]+/,i=new RegExp("^"+o.source),u=new RegExp(o.source+n.source,"gu"),c=new RegExp("\\d+"+n.source,"gu"),w=(y,p,m)=>{let x=!1,_=!1,A=!1;for(let O=0;O<y.length;O++){const S=y[O];x&&r.test(S)?(y=y.slice(0,O)+"-"+y.slice(O),x=!1,A=_,_=!0,O++):_&&A&&t.test(S)?(y=y.slice(0,O-1)+"-"+y.slice(O-1),A=_,_=!1,x=!0):(x=p(S)===S&&m(S)!==S,A=_,_=m(S)===S&&p(S)!==S)}return y},l=(y,p)=>(e.lastIndex=0,y.replace(e,m=>p(m))),d=(y,p)=>(u.lastIndex=0,c.lastIndex=0,y.replace(u,(m,x)=>p(x)).replace(c,m=>p(m))),b=(y,p)=>{if(!(typeof y=="string"||Array.isArray(y)))throw new TypeError("Expected the input to be `string | string[]`");if(p={pascalCase:!1,preserveConsecutiveUppercase:!1,...p},Array.isArray(y)?y=y.map(A=>A.trim()).filter(A=>A.length).join("-"):y=y.trim(),y.length===0)return"";const m=p.locale===!1?A=>A.toLowerCase():A=>A.toLocaleLowerCase(p.locale),x=p.locale===!1?A=>A.toUpperCase():A=>A.toLocaleUpperCase(p.locale);return y.length===1?p.pascalCase?x(y):m(y):(y!==m(y)&&(y=w(y,m,x)),y=y.replace(i,""),p.preserveConsecutiveUppercase?y=l(y,m):y=m(y),p.pascalCase&&(y=x(y.charAt(0))+y.slice(1)),d(y,x))};return Ue.exports=b,Ue.exports.default=b,Ue.exports}var _r=br();const K=Sn(_r);var Ee={},L={},Rt;function Ot(){if(Rt)return L;Rt=1;class r{constructor(s,a){if(!Number.isInteger(s))throw new TypeError("span must be an integer");this.span=s,this.property=a}makeDestinationObject(){return{}}decode(s,a){throw new Error("Layout is abstract")}encode(s,a,h){throw new Error("Layout is abstract")}getSpan(s,a){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(s){const a=Object.create(this.constructor.prototype);return Object.assign(a,this),a.property=s,a}fromArray(s){}}L.Layout=r;function t(g,s){return s.property?g+"["+s.property+"]":g}L.nameWithProperty=t;function e(g,s){if(typeof g!="function")throw new TypeError("Class must be constructor");if(g.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(s&&s instanceof r))throw new TypeError("layout must be a Layout");if(s.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");g.layout_=s,s.boundConstructor_=g,s.makeDestinationObject=(()=>new g),Object.defineProperty(g.prototype,"encode",{value:function(a,h){return s.encode(this,a,h)},writable:!0}),Object.defineProperty(g,"decode",{value:function(a,h){return s.decode(a,h)},writable:!0})}L.bindConstructorLayout=e;class n extends r{isCount(){throw new Error("ExternalLayout is abstract")}}class o extends n{constructor(s,a){if(s===void 0&&(s=1),!Number.isInteger(s)||0>=s)throw new TypeError("elementSpan must be a (positive) integer");super(-1,a),this.elementSpan=s}isCount(){return!0}decode(s,a){a===void 0&&(a=0);const h=s.length-a;return Math.floor(h/this.elementSpan)}encode(s,a,h){return 0}}class i extends n{constructor(s,a,h){if(!(s instanceof r))throw new TypeError("layout must be a Layout");if(a===void 0)a=0;else if(!Number.isInteger(a))throw new TypeError("offset must be integer or undefined");super(s.span,h||s.property),this.layout=s,this.offset=a}isCount(){return this.layout instanceof u||this.layout instanceof c}decode(s,a){return a===void 0&&(a=0),this.layout.decode(s,a+this.offset)}encode(s,a,h){return h===void 0&&(h=0),this.layout.encode(s,a,h+this.offset)}}class u extends r{constructor(s,a){if(super(s,a),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(s,a){return a===void 0&&(a=0),s.readUIntLE(a,this.span)}encode(s,a,h){return h===void 0&&(h=0),a.writeUIntLE(s,h,this.span),this.span}}class c extends r{constructor(s,a){if(super(s,a),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(s,a){return a===void 0&&(a=0),s.readUIntBE(a,this.span)}encode(s,a,h){return h===void 0&&(h=0),a.writeUIntBE(s,h,this.span),this.span}}class w extends r{constructor(s,a){if(super(s,a),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(s,a){return a===void 0&&(a=0),s.readIntLE(a,this.span)}encode(s,a,h){return h===void 0&&(h=0),a.writeIntLE(s,h,this.span),this.span}}class l extends r{constructor(s,a){if(super(s,a),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(s,a){return a===void 0&&(a=0),s.readIntBE(a,this.span)}encode(s,a,h){return h===void 0&&(h=0),a.writeIntBE(s,h,this.span),this.span}}const d=Math.pow(2,32);function b(g){const s=Math.floor(g/d),a=g-s*d;return{hi32:s,lo32:a}}function y(g,s){return g*d+s}class p extends r{constructor(s){super(8,s)}decode(s,a){a===void 0&&(a=0);const h=s.readUInt32LE(a),E=s.readUInt32LE(a+4);return y(E,h)}encode(s,a,h){h===void 0&&(h=0);const E=b(s);return a.writeUInt32LE(E.lo32,h),a.writeUInt32LE(E.hi32,h+4),8}}class m extends r{constructor(s){super(8,s)}decode(s,a){a===void 0&&(a=0);const h=s.readUInt32BE(a),E=s.readUInt32BE(a+4);return y(h,E)}encode(s,a,h){h===void 0&&(h=0);const E=b(s);return a.writeUInt32BE(E.hi32,h),a.writeUInt32BE(E.lo32,h+4),8}}class x extends r{constructor(s){super(8,s)}decode(s,a){a===void 0&&(a=0);const h=s.readUInt32LE(a),E=s.readInt32LE(a+4);return y(E,h)}encode(s,a,h){h===void 0&&(h=0);const E=b(s);return a.writeUInt32LE(E.lo32,h),a.writeInt32LE(E.hi32,h+4),8}}class _ extends r{constructor(s){super(8,s)}decode(s,a){a===void 0&&(a=0);const h=s.readInt32BE(a),E=s.readUInt32BE(a+4);return y(h,E)}encode(s,a,h){h===void 0&&(h=0);const E=b(s);return a.writeInt32BE(E.hi32,h),a.writeUInt32BE(E.lo32,h+4),8}}class A extends r{constructor(s){super(4,s)}decode(s,a){return a===void 0&&(a=0),s.readFloatLE(a)}encode(s,a,h){return h===void 0&&(h=0),a.writeFloatLE(s,h),4}}class O extends r{constructor(s){super(4,s)}decode(s,a){return a===void 0&&(a=0),s.readFloatBE(a)}encode(s,a,h){return h===void 0&&(h=0),a.writeFloatBE(s,h),4}}class S extends r{constructor(s){super(8,s)}decode(s,a){return a===void 0&&(a=0),s.readDoubleLE(a)}encode(s,a,h){return h===void 0&&(h=0),a.writeDoubleLE(s,h),8}}class k extends r{constructor(s){super(8,s)}decode(s,a){return a===void 0&&(a=0),s.readDoubleBE(a)}encode(s,a,h){return h===void 0&&(h=0),a.writeDoubleBE(s,h),8}}class U extends r{constructor(s,a,h){if(!(s instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(a instanceof n&&a.isCount()||Number.isInteger(a)&&0<=a))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let E=-1;!(a instanceof n)&&0<s.span&&(E=a*s.span),super(E,h),this.elementLayout=s,this.count=a}getSpan(s,a){if(0<=this.span)return this.span;a===void 0&&(a=0);let h=0,E=this.count;if(E instanceof n&&(E=E.decode(s,a)),0<this.elementLayout.span)h=E*this.elementLayout.span;else{let T=0;for(;T<E;)h+=this.elementLayout.getSpan(s,a+h),++T}return h}decode(s,a){a===void 0&&(a=0);const h=[];let E=0,T=this.count;for(T instanceof n&&(T=T.decode(s,a));E<T;)h.push(this.elementLayout.decode(s,a)),a+=this.elementLayout.getSpan(s,a),E+=1;return h}encode(s,a,h){h===void 0&&(h=0);const E=this.elementLayout,T=s.reduce((z,$)=>z+E.encode($,a,h+z),0);return this.count instanceof n&&this.count.encode(s.length,a,h),T}}class q extends r{constructor(s,a,h){if(!(Array.isArray(s)&&s.reduce((T,z)=>T&&z instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof a=="boolean"&&h===void 0&&(h=a,a=void 0);for(const T of s)if(0>T.span&&T.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let E=-1;try{E=s.reduce((T,z)=>T+z.getSpan(),0)}catch{}super(E,a),this.fields=s,this.decodePrefixes=!!h}getSpan(s,a){if(0<=this.span)return this.span;a===void 0&&(a=0);let h=0;try{h=this.fields.reduce((E,T)=>{const z=T.getSpan(s,a);return a+=z,E+z},0)}catch{throw new RangeError("indeterminate span")}return h}decode(s,a){a===void 0&&(a=0);const h=this.makeDestinationObject();for(const E of this.fields)if(E.property!==void 0&&(h[E.property]=E.decode(s,a)),a+=E.getSpan(s,a),this.decodePrefixes&&s.length===a)break;return h}encode(s,a,h){h===void 0&&(h=0);const E=h;let T=0,z=0;for(const $ of this.fields){let _e=$.span;if(z=0<_e?_e:0,$.property!==void 0){const Tt=s[$.property];Tt!==void 0&&(z=$.encode(Tt,a,h),0>_e&&(_e=$.getSpan(a,h)))}T=h,h+=_e}return T+z-E}fromArray(s){const a=this.makeDestinationObject();for(const h of this.fields)h.property!==void 0&&0<s.length&&(a[h.property]=s.shift());return a}layoutFor(s){if(typeof s!="string")throw new TypeError("property must be string");for(const a of this.fields)if(a.property===s)return a}offsetOf(s){if(typeof s!="string")throw new TypeError("property must be string");let a=0;for(const h of this.fields){if(h.property===s)return a;0>h.span?a=-1:0<=a&&(a+=h.span)}}}class P{constructor(s){this.property=s}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class M extends P{constructor(s,a){if(!(s instanceof n&&s.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(a||s.property||"variant"),this.layout=s}decode(s,a){return this.layout.decode(s,a)}encode(s,a,h){return this.layout.encode(s,a,h)}}class V extends r{constructor(s,a,h){const E=s instanceof u||s instanceof c;if(E)s=new M(new i(s));else if(s instanceof n&&s.isCount())s=new M(s);else if(!(s instanceof P))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(a===void 0&&(a=null),!(a===null||a instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(a!==null){if(0>a.span)throw new Error("defaultLayout must have constant span");a.property===void 0&&(a=a.replicate("content"))}let T=-1;a&&(T=a.span,0<=T&&E&&(T+=s.layout.span)),super(T,h),this.discriminator=s,this.usesPrefixDiscriminator=E,this.defaultLayout=a,this.registry={};let z=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function($){return z($)},this.configGetSourceVariant=function($){z=$.bind(this)}}getSpan(s,a){if(0<=this.span)return this.span;a===void 0&&(a=0);const h=this.getVariant(s,a);if(!h)throw new Error("unable to determine span for unrecognized variant");return h.getSpan(s,a)}defaultGetSourceVariant(s){if(s.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&s.hasOwnProperty(this.defaultLayout.property))return;const a=this.registry[s[this.discriminator.property]];if(a&&(!a.layout||s.hasOwnProperty(a.property)))return a}else for(const a in this.registry){const h=this.registry[a];if(s.hasOwnProperty(h.property))return h}throw new Error("unable to infer src variant")}decode(s,a){a===void 0&&(a=0);let h;const E=this.discriminator,T=E.decode(s,a);let z=this.registry[T];if(z===void 0){let $=0;z=this.defaultLayout,this.usesPrefixDiscriminator&&($=E.layout.span),h=this.makeDestinationObject(),h[E.property]=T,h[z.property]=this.defaultLayout.decode(s,a+$)}else h=z.decode(s,a);return h}encode(s,a,h){h===void 0&&(h=0);const E=this.getSourceVariant(s);if(E===void 0){const T=this.discriminator,z=this.defaultLayout;let $=0;return this.usesPrefixDiscriminator&&($=T.layout.span),T.encode(s[T.property],a,h),$+z.encode(s[z.property],a,h+$)}return E.encode(s,a,h)}addVariant(s,a,h){const E=new N(this,s,a,h);return this.registry[s]=E,E}getVariant(s,a){let h=s;return Buffer.isBuffer(s)&&(a===void 0&&(a=0),h=this.discriminator.decode(s,a)),this.registry[h]}}class N extends r{constructor(s,a,h,E){if(!(s instanceof V))throw new TypeError("union must be a Union");if(!Number.isInteger(a)||0>a)throw new TypeError("variant must be a (non-negative) integer");if(typeof h=="string"&&E===void 0&&(E=h,h=null),h){if(!(h instanceof r))throw new TypeError("layout must be a Layout");if(s.defaultLayout!==null&&0<=h.span&&h.span>s.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof E!="string")throw new TypeError("variant must have a String property")}let T=s.span;0>s.span&&(T=h?h.span:0,0<=T&&s.usesPrefixDiscriminator&&(T+=s.discriminator.layout.span)),super(T,E),this.union=s,this.variant=a,this.layout=h||null}getSpan(s,a){if(0<=this.span)return this.span;a===void 0&&(a=0);let h=0;return this.union.usesPrefixDiscriminator&&(h=this.union.discriminator.layout.span),h+this.layout.getSpan(s,a+h)}decode(s,a){const h=this.makeDestinationObject();if(a===void 0&&(a=0),this!==this.union.getVariant(s,a))throw new Error("variant mismatch");let E=0;return this.union.usesPrefixDiscriminator&&(E=this.union.discriminator.layout.span),this.layout?h[this.property]=this.layout.decode(s,a+E):this.property?h[this.property]=!0:this.union.usesPrefixDiscriminator&&(h[this.union.discriminator.property]=this.variant),h}encode(s,a,h){h===void 0&&(h=0);let E=0;if(this.union.usesPrefixDiscriminator&&(E=this.union.discriminator.layout.span),this.layout&&!s.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,a,h);let T=E;if(this.layout&&(this.layout.encode(s[this.property],a,h+E),T+=this.layout.getSpan(a,h+E),0<=this.union.span&&T>this.union.span))throw new Error("encoded variant overruns containing union");return T}fromArray(s){if(this.layout)return this.layout.fromArray(s)}}function D(g){return 0>g&&(g+=4294967296),g}class R extends r{constructor(s,a,h){if(!(s instanceof u||s instanceof c))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof a=="string"&&h===void 0&&(h=a,a=void 0),4<s.span)throw new RangeError("word cannot exceed 32 bits");super(s.span,h),this.word=s,this.msb=!!a,this.fields=[];let E=0;this._packedSetValue=function(T){return E=D(T),this},this._packedGetValue=function(){return E}}decode(s,a){const h=this.makeDestinationObject();a===void 0&&(a=0);const E=this.word.decode(s,a);this._packedSetValue(E);for(const T of this.fields)T.property!==void 0&&(h[T.property]=T.decode(E));return h}encode(s,a,h){h===void 0&&(h=0);const E=this.word.decode(a,h);this._packedSetValue(E);for(const T of this.fields)if(T.property!==void 0){const z=s[T.property];z!==void 0&&T.encode(z)}return this.word.encode(this._packedGetValue(),a,h)}addField(s,a){const h=new I(this,s,a);return this.fields.push(h),h}addBoolean(s){const a=new f(this,s);return this.fields.push(a),a}fieldFor(s){if(typeof s!="string")throw new TypeError("property must be string");for(const a of this.fields)if(a.property===s)return a}}class I{constructor(s,a,h){if(!(s instanceof R))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(a)||0>=a)throw new TypeError("bits must be positive integer");const E=8*s.span,T=s.fields.reduce((z,$)=>z+$.bits,0);if(a+T>E)throw new Error("bits too long for span remainder ("+(E-T)+" of "+E+" remain)");this.container=s,this.bits=a,this.valueMask=(1<<a)-1,a===32&&(this.valueMask=4294967295),this.start=T,this.container.msb&&(this.start=E-T-a),this.wordMask=D(this.valueMask<<this.start),this.property=h}decode(){const s=this.container._packedGetValue();return D(s&this.wordMask)>>>this.start}encode(s){if(!Number.isInteger(s)||s!==D(s&this.valueMask))throw new TypeError(t("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const a=this.container._packedGetValue(),h=D(s<<this.start);this.container._packedSetValue(D(a&~this.wordMask)|h)}}class f extends I{constructor(s,a){super(s,1,a)}decode(s,a){return!!I.prototype.decode.call(this,s,a)}encode(s){return typeof s=="boolean"&&(s=+s),I.prototype.encode.call(this,s)}}class v extends r{constructor(s,a){if(!(s instanceof n&&s.isCount()||Number.isInteger(s)&&0<=s))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let h=-1;s instanceof n||(h=s),super(h,a),this.length=s}getSpan(s,a){let h=this.span;return 0>h&&(h=this.length.decode(s,a)),h}decode(s,a){a===void 0&&(a=0);let h=this.span;return 0>h&&(h=this.length.decode(s,a)),s.slice(a,a+h)}encode(s,a,h){let E=this.length;if(this.length instanceof n&&(E=s.length),!(Buffer.isBuffer(s)&&E===s.length))throw new TypeError(t("Blob.encode",this)+" requires (length "+E+") Buffer as src");if(h+E>a.length)throw new RangeError("encoding overruns Buffer");return a.write(s.toString("hex"),h,E,"hex"),this.length instanceof n&&this.length.encode(E,a,h),E}}class C extends r{constructor(s){super(-1,s)}getSpan(s,a){if(!Buffer.isBuffer(s))throw new TypeError("b must be a Buffer");a===void 0&&(a=0);let h=a;for(;h<s.length&&s[h]!==0;)h+=1;return 1+h-a}decode(s,a,h){a===void 0&&(a=0);let E=this.getSpan(s,a);return s.slice(a,a+E-1).toString("utf-8")}encode(s,a,h){h===void 0&&(h=0),typeof s!="string"&&(s=s.toString());const E=new Buffer(s,"utf8"),T=E.length;if(h+T>a.length)throw new RangeError("encoding overruns Buffer");return E.copy(a,h),a[h+T]=0,T+1}}class F extends r{constructor(s,a){if(typeof s=="string"&&a===void 0&&(a=s,s=void 0),s===void 0)s=-1;else if(!Number.isInteger(s))throw new TypeError("maxSpan must be an integer");super(-1,a),this.maxSpan=s}getSpan(s,a){if(!Buffer.isBuffer(s))throw new TypeError("b must be a Buffer");return a===void 0&&(a=0),s.length-a}decode(s,a,h){a===void 0&&(a=0);let E=this.getSpan(s,a);if(0<=this.maxSpan&&this.maxSpan<E)throw new RangeError("text length exceeds maxSpan");return s.slice(a,a+E).toString("utf-8")}encode(s,a,h){h===void 0&&(h=0),typeof s!="string"&&(s=s.toString());const E=new Buffer(s,"utf8"),T=E.length;if(0<=this.maxSpan&&this.maxSpan<T)throw new RangeError("text length exceeds maxSpan");if(h+T>a.length)throw new RangeError("encoding overruns Buffer");return E.copy(a,h),T}}class Z extends r{constructor(s,a){super(0,a),this.value=s}decode(s,a,h){return this.value}encode(s,a,h){return 0}}return L.ExternalLayout=n,L.GreedyCount=o,L.OffsetLayout=i,L.UInt=u,L.UIntBE=c,L.Int=w,L.IntBE=l,L.Float=A,L.FloatBE=O,L.Double=S,L.DoubleBE=k,L.Sequence=U,L.Structure=q,L.UnionDiscriminator=P,L.UnionLayoutDiscriminator=M,L.Union=V,L.VariantLayout=N,L.BitStructure=R,L.BitField=I,L.Boolean=f,L.Blob=v,L.CString=C,L.UTF8=F,L.Constant=Z,L.greedy=((g,s)=>new o(g,s)),L.offset=((g,s,a)=>new i(g,s,a)),L.u8=(g=>new u(1,g)),L.u16=(g=>new u(2,g)),L.u24=(g=>new u(3,g)),L.u32=(g=>new u(4,g)),L.u40=(g=>new u(5,g)),L.u48=(g=>new u(6,g)),L.nu64=(g=>new p(g)),L.u16be=(g=>new c(2,g)),L.u24be=(g=>new c(3,g)),L.u32be=(g=>new c(4,g)),L.u40be=(g=>new c(5,g)),L.u48be=(g=>new c(6,g)),L.nu64be=(g=>new m(g)),L.s8=(g=>new w(1,g)),L.s16=(g=>new w(2,g)),L.s24=(g=>new w(3,g)),L.s32=(g=>new w(4,g)),L.s40=(g=>new w(5,g)),L.s48=(g=>new w(6,g)),L.ns64=(g=>new x(g)),L.s16be=(g=>new l(2,g)),L.s24be=(g=>new l(3,g)),L.s32be=(g=>new l(4,g)),L.s40be=(g=>new l(5,g)),L.s48be=(g=>new l(6,g)),L.ns64be=(g=>new _(g)),L.f32=(g=>new A(g)),L.f32be=(g=>new O(g)),L.f64=(g=>new S(g)),L.f64be=(g=>new k(g)),L.struct=((g,s,a)=>new q(g,s,a)),L.bits=((g,s,a)=>new R(g,s,a)),L.seq=((g,s,a)=>new U(g,s,a)),L.union=((g,s,a)=>new V(g,s,a)),L.unionLayoutDiscriminator=((g,s)=>new M(g,s)),L.blob=((g,s)=>new v(g,s)),L.cstr=(g=>new C(g)),L.utf8=((g,s)=>new F(g,s)),L.const=((g,s)=>new Z(g,s)),L}var Pt;function Er(){return Pt||(Pt=1,(function(r){var t=Ee&&Ee.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.array=r.rustEnum=r.str=r.vecU8=r.tagged=r.vec=r.bool=r.option=r.publicKey=r.i256=r.u256=r.i128=r.u128=r.i64=r.u64=r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0;const e=Ot(),n=wr,o=t(pr());var i=Ot();Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return i.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return i.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return i.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return i.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return i.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return i.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return i.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return i.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return i.struct}});class u extends e.Layout{constructor(I,f,v){super(I,v),this.blob=(0,e.blob)(I),this.signed=f}decode(I,f=0){const v=new o.default(this.blob.decode(I,f),10,"le");return this.signed?v.fromTwos(this.span*8).clone():v}encode(I,f,v=0){return this.signed&&(I=I.toTwos(this.span*8)),this.blob.encode(I.toArrayLike(Buffer,"le",this.span),f,v)}}function c(R){return new u(8,!1,R)}r.u64=c;function w(R){return new u(8,!0,R)}r.i64=w;function l(R){return new u(16,!1,R)}r.u128=l;function d(R){return new u(16,!0,R)}r.i128=d;function b(R){return new u(32,!1,R)}r.u256=b;function y(R){return new u(32,!0,R)}r.i256=y;class p extends e.Layout{constructor(I,f,v,C){super(I.span,C),this.layout=I,this.decoder=f,this.encoder=v}decode(I,f){return this.decoder(this.layout.decode(I,f))}encode(I,f,v){return this.layout.encode(this.encoder(I),f,v)}getSpan(I,f){return this.layout.getSpan(I,f)}}function m(R){return new p((0,e.blob)(32),I=>new n.PublicKey(I),I=>I.toBuffer(),R)}r.publicKey=m;class x extends e.Layout{constructor(I,f){super(-1,f),this.layout=I,this.discriminator=(0,e.u8)()}encode(I,f,v=0){return I==null?this.discriminator.encode(0,f,v):(this.discriminator.encode(1,f,v),this.layout.encode(I,f,v+1)+1)}decode(I,f=0){const v=this.discriminator.decode(I,f);if(v===0)return null;if(v===1)return this.layout.decode(I,f+1);throw new Error("Invalid option "+this.property)}getSpan(I,f=0){const v=this.discriminator.decode(I,f);if(v===0)return 1;if(v===1)return this.layout.getSpan(I,f+1)+1;throw new Error("Invalid option "+this.property)}}function _(R,I){return new x(R,I)}r.option=_;function A(R){return new p((0,e.u8)(),O,S,R)}r.bool=A;function O(R){if(R===0)return!1;if(R===1)return!0;throw new Error("Invalid bool: "+R)}function S(R){return R?1:0}function k(R,I){const f=(0,e.u32)("length"),v=(0,e.struct)([f,(0,e.seq)(R,(0,e.offset)(f,-f.span),"values")]);return new p(v,({values:C})=>C,C=>({values:C}),I)}r.vec=k;function U(R,I,f){const v=(0,e.struct)([c("tag"),I.replicate("data")]);function C({tag:F,data:Z}){if(!F.eq(R))throw new Error("Invalid tag, expected: "+R.toString("hex")+", got: "+F.toString("hex"));return Z}return new p(v,C,F=>({tag:R,data:F}),f)}r.tagged=U;function q(R){const I=(0,e.u32)("length"),f=(0,e.struct)([I,(0,e.blob)((0,e.offset)(I,-I.span),"data")]);return new p(f,({data:v})=>v,v=>({data:v}),R)}r.vecU8=q;function P(R){return new p(q(),I=>I.toString("utf-8"),I=>Buffer.from(I,"utf-8"),R)}r.str=P;function M(R,I,f){const v=(0,e.union)(f??(0,e.u8)(),I);return R.forEach((C,F)=>v.addVariant(F,C,C.property)),v}r.rustEnum=M;function V(R,I,f){const v=(0,e.struct)([(0,e.seq)(R,I,"values")]);return new p(v,({values:C})=>C,C=>({values:C}),f)}r.array=V;class N extends e.Layout{constructor(I,f,v){super(I.span+f.span,v),this.keyLayout=I,this.valueLayout=f}decode(I,f){f=f||0;const v=this.keyLayout.decode(I,f),C=this.valueLayout.decode(I,f+this.keyLayout.getSpan(I,f));return[v,C]}encode(I,f,v){v=v||0;const C=this.keyLayout.encode(I[0],f,v),F=this.valueLayout.encode(I[1],f,v+C);return C+F}getSpan(I,f){return this.keyLayout.getSpan(I,f)+this.valueLayout.getSpan(I,f)}}function D(R,I,f){const v=(0,e.u32)("length"),C=(0,e.struct)([v,(0,e.seq)(new N(R,I),(0,e.offset)(v,-v.span),"values")]);return new p(C,({values:F})=>new Map(F),F=>({values:Array.from(F.entries())}),f)}r.map=D})(Ee)),Ee}var j=Er();function be(r){let t=r.length;for(;--t>=0;)r[t]=0}const Ar=3,kr=258,Tn=29,Sr=256,Ir=Sr+1+Tn,Cn=30,xr=512,Lr=new Array((Ir+2)*2);be(Lr);const Tr=new Array(Cn*2);be(Tr);const Cr=new Array(xr);be(Cr);const Rr=new Array(kr-Ar+1);be(Rr);const Or=new Array(Tn);be(Or);const Pr=new Array(Cn);be(Pr);const Dr=(r,t,e,n)=>{let o=r&65535|0,i=r>>>16&65535|0,u=0;for(;e!==0;){u=e>2e3?2e3:e,e-=u;do o=o+t[n++]|0,i=i+o|0;while(--u);o%=65521,i%=65521}return o|i<<16|0};var pt=Dr;const Br=()=>{let r,t=[];for(var e=0;e<256;e++){r=e;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t},Ur=new Uint32Array(Br()),Nr=(r,t,e,n)=>{const o=Ur,i=n+e;r^=-1;for(let u=n;u<i;u++)r=r>>>8^o[(r^t[u])&255];return r^-1};var re=Nr,wt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Rn={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Mr=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var Vr=function(r){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const n in e)Mr(e,n)&&(r[n]=e[n])}}return r},jr=r=>{let t=0;for(let n=0,o=r.length;n<o;n++)t+=r[n].length;const e=new Uint8Array(t);for(let n=0,o=0,i=r.length;n<i;n++){let u=r[n];e.set(u,o),o+=u.length}return e},On={assign:Vr,flattenChunks:jr};let Pn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Pn=!1}const Le=new Uint8Array(256);for(let r=0;r<256;r++)Le[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Le[254]=Le[254]=1;var Fr=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,e,n,o,i,u=r.length,c=0;for(o=0;o<u;o++)e=r.charCodeAt(o),(e&64512)===55296&&o+1<u&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),o++)),c+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(c),i=0,o=0;i<c;o++)e=r.charCodeAt(o),(e&64512)===55296&&o+1<u&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),o++)),e<128?t[i++]=e:e<2048?(t[i++]=192|e>>>6,t[i++]=128|e&63):e<65536?(t[i++]=224|e>>>12,t[i++]=128|e>>>6&63,t[i++]=128|e&63):(t[i++]=240|e>>>18,t[i++]=128|e>>>12&63,t[i++]=128|e>>>6&63,t[i++]=128|e&63);return t};const zr=(r,t)=>{if(t<65534&&r.subarray&&Pn)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let e="";for(let n=0;n<t;n++)e+=String.fromCharCode(r[n]);return e};var qr=(r,t)=>{const e=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let n,o;const i=new Array(e*2);for(o=0,n=0;n<e;){let u=r[n++];if(u<128){i[o++]=u;continue}let c=Le[u];if(c>4){i[o++]=65533,n+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&n<e;)u=u<<6|r[n++]&63,c--;if(c>1){i[o++]=65533;continue}u<65536?i[o++]=u:(u-=65536,i[o++]=55296|u>>10&1023,i[o++]=56320|u&1023)}return zr(i,o)},Gr=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let e=t-1;for(;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?t:e+Le[r[e]]>t?e:t},yt={string2buf:Fr,buf2string:qr,utf8border:Gr};function Kr(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Zr=Kr;const Ne=16209,$r=16191;var Hr=function(t,e){let n,o,i,u,c,w,l,d,b,y,p,m,x,_,A,O,S,k,U,q,P,M,V,N;const D=t.state;n=t.next_in,V=t.input,o=n+(t.avail_in-5),i=t.next_out,N=t.output,u=i-(e-t.avail_out),c=i+(t.avail_out-257),w=D.dmax,l=D.wsize,d=D.whave,b=D.wnext,y=D.window,p=D.hold,m=D.bits,x=D.lencode,_=D.distcode,A=(1<<D.lenbits)-1,O=(1<<D.distbits)-1;e:do{m<15&&(p+=V[n++]<<m,m+=8,p+=V[n++]<<m,m+=8),S=x[p&A];t:for(;;){if(k=S>>>24,p>>>=k,m-=k,k=S>>>16&255,k===0)N[i++]=S&65535;else if(k&16){U=S&65535,k&=15,k&&(m<k&&(p+=V[n++]<<m,m+=8),U+=p&(1<<k)-1,p>>>=k,m-=k),m<15&&(p+=V[n++]<<m,m+=8,p+=V[n++]<<m,m+=8),S=_[p&O];n:for(;;){if(k=S>>>24,p>>>=k,m-=k,k=S>>>16&255,k&16){if(q=S&65535,k&=15,m<k&&(p+=V[n++]<<m,m+=8,m<k&&(p+=V[n++]<<m,m+=8)),q+=p&(1<<k)-1,q>w){t.msg="invalid distance too far back",D.mode=Ne;break e}if(p>>>=k,m-=k,k=i-u,q>k){if(k=q-k,k>d&&D.sane){t.msg="invalid distance too far back",D.mode=Ne;break e}if(P=0,M=y,b===0){if(P+=l-k,k<U){U-=k;do N[i++]=y[P++];while(--k);P=i-q,M=N}}else if(b<k){if(P+=l+b-k,k-=b,k<U){U-=k;do N[i++]=y[P++];while(--k);if(P=0,b<U){k=b,U-=k;do N[i++]=y[P++];while(--k);P=i-q,M=N}}}else if(P+=b-k,k<U){U-=k;do N[i++]=y[P++];while(--k);P=i-q,M=N}for(;U>2;)N[i++]=M[P++],N[i++]=M[P++],N[i++]=M[P++],U-=3;U&&(N[i++]=M[P++],U>1&&(N[i++]=M[P++]))}else{P=i-q;do N[i++]=N[P++],N[i++]=N[P++],N[i++]=N[P++],U-=3;while(U>2);U&&(N[i++]=N[P++],U>1&&(N[i++]=N[P++]))}}else if((k&64)===0){S=_[(S&65535)+(p&(1<<k)-1)];continue n}else{t.msg="invalid distance code",D.mode=Ne;break e}break}}else if((k&64)===0){S=x[(S&65535)+(p&(1<<k)-1)];continue t}else if(k&32){D.mode=$r;break e}else{t.msg="invalid literal/length code",D.mode=Ne;break e}break}}while(n<o&&i<c);U=m>>3,n-=U,m-=U<<3,p&=(1<<m)-1,t.next_in=n,t.next_out=i,t.avail_in=n<o?5+(o-n):5-(n-o),t.avail_out=i<c?257+(c-i):257-(i-c),D.hold=p,D.bits=m};const ge=15,Dt=852,Bt=592,Ut=0,tt=1,Nt=2,Wr=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Xr=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Yr=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Jr=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Qr=(r,t,e,n,o,i,u,c)=>{const w=c.bits;let l=0,d=0,b=0,y=0,p=0,m=0,x=0,_=0,A=0,O=0,S,k,U,q,P,M=null,V;const N=new Uint16Array(ge+1),D=new Uint16Array(ge+1);let R=null,I,f,v;for(l=0;l<=ge;l++)N[l]=0;for(d=0;d<n;d++)N[t[e+d]]++;for(p=w,y=ge;y>=1&&N[y]===0;y--);if(p>y&&(p=y),y===0)return o[i++]=1<<24|64<<16|0,o[i++]=1<<24|64<<16|0,c.bits=1,0;for(b=1;b<y&&N[b]===0;b++);for(p<b&&(p=b),_=1,l=1;l<=ge;l++)if(_<<=1,_-=N[l],_<0)return-1;if(_>0&&(r===Ut||y!==1))return-1;for(D[1]=0,l=1;l<ge;l++)D[l+1]=D[l]+N[l];for(d=0;d<n;d++)t[e+d]!==0&&(u[D[t[e+d]]++]=d);if(r===Ut?(M=R=u,V=20):r===tt?(M=Wr,R=Xr,V=257):(M=Yr,R=Jr,V=0),O=0,d=0,l=b,P=i,m=p,x=0,U=-1,A=1<<p,q=A-1,r===tt&&A>Dt||r===Nt&&A>Bt)return 1;for(;;){I=l-x,u[d]+1<V?(f=0,v=u[d]):u[d]>=V?(f=R[u[d]-V],v=M[u[d]-V]):(f=96,v=0),S=1<<l-x,k=1<<m,b=k;do k-=S,o[P+(O>>x)+k]=I<<24|f<<16|v|0;while(k!==0);for(S=1<<l-1;O&S;)S>>=1;if(S!==0?(O&=S-1,O+=S):O=0,d++,--N[l]===0){if(l===y)break;l=t[e+u[d]]}if(l>p&&(O&q)!==U){for(x===0&&(x=p),P+=b,m=l-x,_=1<<m;m+x<y&&(_-=N[m+x],!(_<=0));)m++,_<<=1;if(A+=1<<m,r===tt&&A>Dt||r===Nt&&A>Bt)return 1;U=O&q,o[U]=p<<24|m<<16|P-i|0}}return O!==0&&(o[P+O]=l-x<<24|64<<16|0),c.bits=p,0};var Ie=Qr;const ei=0,Dn=1,Bn=2,{Z_FINISH:Mt,Z_BLOCK:ti,Z_TREES:Me,Z_OK:we,Z_STREAM_END:ni,Z_NEED_DICT:ri,Z_STREAM_ERROR:ee,Z_DATA_ERROR:Un,Z_MEM_ERROR:Nn,Z_BUF_ERROR:ii,Z_DEFLATED:Vt}=Rn,We=16180,jt=16181,Ft=16182,zt=16183,qt=16184,Gt=16185,Kt=16186,Zt=16187,$t=16188,Ht=16189,Ke=16190,oe=16191,nt=16192,Wt=16193,rt=16194,Xt=16195,Yt=16196,Jt=16197,Qt=16198,Ve=16199,je=16200,en=16201,tn=16202,nn=16203,rn=16204,on=16205,it=16206,sn=16207,an=16208,G=16209,Mn=16210,Vn=16211,oi=852,si=592,ai=15,ci=ai,cn=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function ui(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ye=r=>{if(!r)return 1;const t=r.state;return!t||t.strm!==r||t.mode<We||t.mode>Vn?1:0},jn=r=>{if(ye(r))return ee;const t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=We,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(oi),t.distcode=t.distdyn=new Int32Array(si),t.sane=1,t.back=-1,we},Fn=r=>{if(ye(r))return ee;const t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,jn(r)},zn=(r,t)=>{let e;if(ye(r))return ee;const n=r.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ee:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,Fn(r))},qn=(r,t)=>{if(!r)return ee;const e=new ui;r.state=e,e.strm=r,e.window=null,e.mode=We;const n=zn(r,t);return n!==we&&(r.state=null),n},li=r=>qn(r,ci);let un=!0,ot,st;const di=r=>{if(un){ot=new Int32Array(512),st=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Ie(Dn,r.lens,0,288,ot,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Ie(Bn,r.lens,0,32,st,0,r.work,{bits:5}),un=!1}r.lencode=ot,r.lenbits=9,r.distcode=st,r.distbits=5},Gn=(r,t,e,n)=>{let o;const i=r.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(e-i.wsize,e),0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>n&&(o=n),i.window.set(t.subarray(e-n,e-n+o),i.wnext),n-=o,n?(i.window.set(t.subarray(e-n,e),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0},hi=(r,t)=>{let e,n,o,i,u,c,w,l,d,b,y,p,m,x,_=0,A,O,S,k,U,q,P,M;const V=new Uint8Array(4);let N,D;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ye(r)||!r.output||!r.input&&r.avail_in!==0)return ee;e=r.state,e.mode===oe&&(e.mode=nt),u=r.next_out,o=r.output,w=r.avail_out,i=r.next_in,n=r.input,c=r.avail_in,l=e.hold,d=e.bits,b=c,y=w,M=we;e:for(;;)switch(e.mode){case We:if(e.wrap===0){e.mode=nt;break}for(;d<16;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}if(e.wrap&2&&l===35615){e.wbits===0&&(e.wbits=15),e.check=0,V[0]=l&255,V[1]=l>>>8&255,e.check=re(e.check,V,2,0),l=0,d=0,e.mode=jt;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((l&255)<<8)+(l>>8))%31){r.msg="incorrect header check",e.mode=G;break}if((l&15)!==Vt){r.msg="unknown compression method",e.mode=G;break}if(l>>>=4,d-=4,P=(l&15)+8,e.wbits===0&&(e.wbits=P),P>15||P>e.wbits){r.msg="invalid window size",e.mode=G;break}e.dmax=1<<e.wbits,e.flags=0,r.adler=e.check=1,e.mode=l&512?Ht:oe,l=0,d=0;break;case jt:for(;d<16;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}if(e.flags=l,(e.flags&255)!==Vt){r.msg="unknown compression method",e.mode=G;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=G;break}e.head&&(e.head.text=l>>8&1),e.flags&512&&e.wrap&4&&(V[0]=l&255,V[1]=l>>>8&255,e.check=re(e.check,V,2,0)),l=0,d=0,e.mode=Ft;case Ft:for(;d<32;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}e.head&&(e.head.time=l),e.flags&512&&e.wrap&4&&(V[0]=l&255,V[1]=l>>>8&255,V[2]=l>>>16&255,V[3]=l>>>24&255,e.check=re(e.check,V,4,0)),l=0,d=0,e.mode=zt;case zt:for(;d<16;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}e.head&&(e.head.xflags=l&255,e.head.os=l>>8),e.flags&512&&e.wrap&4&&(V[0]=l&255,V[1]=l>>>8&255,e.check=re(e.check,V,2,0)),l=0,d=0,e.mode=qt;case qt:if(e.flags&1024){for(;d<16;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}e.length=l,e.head&&(e.head.extra_len=l),e.flags&512&&e.wrap&4&&(V[0]=l&255,V[1]=l>>>8&255,e.check=re(e.check,V,2,0)),l=0,d=0}else e.head&&(e.head.extra=null);e.mode=Gt;case Gt:if(e.flags&1024&&(p=e.length,p>c&&(p=c),p&&(e.head&&(P=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(i,i+p),P)),e.flags&512&&e.wrap&4&&(e.check=re(e.check,n,p,i)),c-=p,i+=p,e.length-=p),e.length))break e;e.length=0,e.mode=Kt;case Kt:if(e.flags&2048){if(c===0)break e;p=0;do P=n[i+p++],e.head&&P&&e.length<65536&&(e.head.name+=String.fromCharCode(P));while(P&&p<c);if(e.flags&512&&e.wrap&4&&(e.check=re(e.check,n,p,i)),c-=p,i+=p,P)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=Zt;case Zt:if(e.flags&4096){if(c===0)break e;p=0;do P=n[i+p++],e.head&&P&&e.length<65536&&(e.head.comment+=String.fromCharCode(P));while(P&&p<c);if(e.flags&512&&e.wrap&4&&(e.check=re(e.check,n,p,i)),c-=p,i+=p,P)break e}else e.head&&(e.head.comment=null);e.mode=$t;case $t:if(e.flags&512){for(;d<16;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}if(e.wrap&4&&l!==(e.check&65535)){r.msg="header crc mismatch",e.mode=G;break}l=0,d=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=oe;break;case Ht:for(;d<32;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}r.adler=e.check=cn(l),l=0,d=0,e.mode=Ke;case Ke:if(e.havedict===0)return r.next_out=u,r.avail_out=w,r.next_in=i,r.avail_in=c,e.hold=l,e.bits=d,ri;r.adler=e.check=1,e.mode=oe;case oe:if(t===ti||t===Me)break e;case nt:if(e.last){l>>>=d&7,d-=d&7,e.mode=it;break}for(;d<3;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}switch(e.last=l&1,l>>>=1,d-=1,l&3){case 0:e.mode=Wt;break;case 1:if(di(e),e.mode=Ve,t===Me){l>>>=2,d-=2;break e}break;case 2:e.mode=Yt;break;case 3:r.msg="invalid block type",e.mode=G}l>>>=2,d-=2;break;case Wt:for(l>>>=d&7,d-=d&7;d<32;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}if((l&65535)!==(l>>>16^65535)){r.msg="invalid stored block lengths",e.mode=G;break}if(e.length=l&65535,l=0,d=0,e.mode=rt,t===Me)break e;case rt:e.mode=Xt;case Xt:if(p=e.length,p){if(p>c&&(p=c),p>w&&(p=w),p===0)break e;o.set(n.subarray(i,i+p),u),c-=p,i+=p,w-=p,u+=p,e.length-=p;break}e.mode=oe;break;case Yt:for(;d<14;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}if(e.nlen=(l&31)+257,l>>>=5,d-=5,e.ndist=(l&31)+1,l>>>=5,d-=5,e.ncode=(l&15)+4,l>>>=4,d-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=G;break}e.have=0,e.mode=Jt;case Jt:for(;e.have<e.ncode;){for(;d<3;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}e.lens[R[e.have++]]=l&7,l>>>=3,d-=3}for(;e.have<19;)e.lens[R[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,N={bits:e.lenbits},M=Ie(ei,e.lens,0,19,e.lencode,0,e.work,N),e.lenbits=N.bits,M){r.msg="invalid code lengths set",e.mode=G;break}e.have=0,e.mode=Qt;case Qt:for(;e.have<e.nlen+e.ndist;){for(;_=e.lencode[l&(1<<e.lenbits)-1],A=_>>>24,O=_>>>16&255,S=_&65535,!(A<=d);){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}if(S<16)l>>>=A,d-=A,e.lens[e.have++]=S;else{if(S===16){for(D=A+2;d<D;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}if(l>>>=A,d-=A,e.have===0){r.msg="invalid bit length repeat",e.mode=G;break}P=e.lens[e.have-1],p=3+(l&3),l>>>=2,d-=2}else if(S===17){for(D=A+3;d<D;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}l>>>=A,d-=A,P=0,p=3+(l&7),l>>>=3,d-=3}else{for(D=A+7;d<D;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}l>>>=A,d-=A,P=0,p=11+(l&127),l>>>=7,d-=7}if(e.have+p>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=G;break}for(;p--;)e.lens[e.have++]=P}}if(e.mode===G)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=G;break}if(e.lenbits=9,N={bits:e.lenbits},M=Ie(Dn,e.lens,0,e.nlen,e.lencode,0,e.work,N),e.lenbits=N.bits,M){r.msg="invalid literal/lengths set",e.mode=G;break}if(e.distbits=6,e.distcode=e.distdyn,N={bits:e.distbits},M=Ie(Bn,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,N),e.distbits=N.bits,M){r.msg="invalid distances set",e.mode=G;break}if(e.mode=Ve,t===Me)break e;case Ve:e.mode=je;case je:if(c>=6&&w>=258){r.next_out=u,r.avail_out=w,r.next_in=i,r.avail_in=c,e.hold=l,e.bits=d,Hr(r,y),u=r.next_out,o=r.output,w=r.avail_out,i=r.next_in,n=r.input,c=r.avail_in,l=e.hold,d=e.bits,e.mode===oe&&(e.back=-1);break}for(e.back=0;_=e.lencode[l&(1<<e.lenbits)-1],A=_>>>24,O=_>>>16&255,S=_&65535,!(A<=d);){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}if(O&&(O&240)===0){for(k=A,U=O,q=S;_=e.lencode[q+((l&(1<<k+U)-1)>>k)],A=_>>>24,O=_>>>16&255,S=_&65535,!(k+A<=d);){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}l>>>=k,d-=k,e.back+=k}if(l>>>=A,d-=A,e.back+=A,e.length=S,O===0){e.mode=on;break}if(O&32){e.back=-1,e.mode=oe;break}if(O&64){r.msg="invalid literal/length code",e.mode=G;break}e.extra=O&15,e.mode=en;case en:if(e.extra){for(D=e.extra;d<D;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}e.length+=l&(1<<e.extra)-1,l>>>=e.extra,d-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=tn;case tn:for(;_=e.distcode[l&(1<<e.distbits)-1],A=_>>>24,O=_>>>16&255,S=_&65535,!(A<=d);){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}if((O&240)===0){for(k=A,U=O,q=S;_=e.distcode[q+((l&(1<<k+U)-1)>>k)],A=_>>>24,O=_>>>16&255,S=_&65535,!(k+A<=d);){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}l>>>=k,d-=k,e.back+=k}if(l>>>=A,d-=A,e.back+=A,O&64){r.msg="invalid distance code",e.mode=G;break}e.offset=S,e.extra=O&15,e.mode=nn;case nn:if(e.extra){for(D=e.extra;d<D;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}e.offset+=l&(1<<e.extra)-1,l>>>=e.extra,d-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=G;break}e.mode=rn;case rn:if(w===0)break e;if(p=y-w,e.offset>p){if(p=e.offset-p,p>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=G;break}p>e.wnext?(p-=e.wnext,m=e.wsize-p):m=e.wnext-p,p>e.length&&(p=e.length),x=e.window}else x=o,m=u-e.offset,p=e.length;p>w&&(p=w),w-=p,e.length-=p;do o[u++]=x[m++];while(--p);e.length===0&&(e.mode=je);break;case on:if(w===0)break e;o[u++]=e.length,w--,e.mode=je;break;case it:if(e.wrap){for(;d<32;){if(c===0)break e;c--,l|=n[i++]<<d,d+=8}if(y-=w,r.total_out+=y,e.total+=y,e.wrap&4&&y&&(r.adler=e.check=e.flags?re(e.check,o,y,u-y):pt(e.check,o,y,u-y)),y=w,e.wrap&4&&(e.flags?l:cn(l))!==e.check){r.msg="incorrect data check",e.mode=G;break}l=0,d=0}e.mode=sn;case sn:if(e.wrap&&e.flags){for(;d<32;){if(c===0)break e;c--,l+=n[i++]<<d,d+=8}if(e.wrap&4&&l!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=G;break}l=0,d=0}e.mode=an;case an:M=ni;break e;case G:M=Un;break e;case Mn:return Nn;case Vn:default:return ee}return r.next_out=u,r.avail_out=w,r.next_in=i,r.avail_in=c,e.hold=l,e.bits=d,(e.wsize||y!==r.avail_out&&e.mode<G&&(e.mode<it||t!==Mt))&&Gn(r,r.output,r.next_out,y-r.avail_out),b-=r.avail_in,y-=r.avail_out,r.total_in+=b,r.total_out+=y,e.total+=y,e.wrap&4&&y&&(r.adler=e.check=e.flags?re(e.check,o,y,r.next_out-y):pt(e.check,o,y,r.next_out-y)),r.data_type=e.bits+(e.last?64:0)+(e.mode===oe?128:0)+(e.mode===Ve||e.mode===rt?256:0),(b===0&&y===0||t===Mt)&&M===we&&(M=ii),M},fi=r=>{if(ye(r))return ee;let t=r.state;return t.window&&(t.window=null),r.state=null,we},pi=(r,t)=>{if(ye(r))return ee;const e=r.state;return(e.wrap&2)===0?ee:(e.head=t,t.done=!1,we)},wi=(r,t)=>{const e=t.length;let n,o,i;return ye(r)||(n=r.state,n.wrap!==0&&n.mode!==Ke)?ee:n.mode===Ke&&(o=1,o=pt(o,t,e,0),o!==n.check)?Un:(i=Gn(r,t,e,e),i?(n.mode=Mn,Nn):(n.havedict=1,we))};var yi=Fn,gi=zn,mi=jn,vi=li,bi=qn,_i=hi,Ei=fi,Ai=pi,ki=wi,Si="pako inflate (from Nodeca project)",se={inflateReset:yi,inflateReset2:gi,inflateResetKeep:mi,inflateInit:vi,inflateInit2:bi,inflate:_i,inflateEnd:Ei,inflateGetHeader:Ai,inflateSetDictionary:ki,inflateInfo:Si};function Ii(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var xi=Ii;const Kn=Object.prototype.toString,{Z_NO_FLUSH:Li,Z_FINISH:Ti,Z_OK:Te,Z_STREAM_END:at,Z_NEED_DICT:ct,Z_STREAM_ERROR:Ci,Z_DATA_ERROR:ln,Z_MEM_ERROR:Ri}=Rn;function Xe(r){this.options=On.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zr,this.strm.avail_out=0;let e=se.inflateInit2(this.strm,t.windowBits);if(e!==Te)throw new Error(wt[e]);if(this.header=new xi,se.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=yt.string2buf(t.dictionary):Kn.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=se.inflateSetDictionary(this.strm,t.dictionary),e!==Te)))throw new Error(wt[e])}Xe.prototype.push=function(r,t){const e=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let i,u,c;if(this.ended)return!1;for(t===~~t?u=t:u=t===!0?Ti:Li,Kn.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),i=se.inflate(e,u),i===ct&&o&&(i=se.inflateSetDictionary(e,o),i===Te?i=se.inflate(e,u):i===ln&&(i=ct));e.avail_in>0&&i===at&&e.state.wrap>0&&r[e.next_in]!==0;)se.inflateReset(e),i=se.inflate(e,u);switch(i){case Ci:case ln:case ct:case Ri:return this.onEnd(i),this.ended=!0,!1}if(c=e.avail_out,e.next_out&&(e.avail_out===0||i===at))if(this.options.to==="string"){let w=yt.utf8border(e.output,e.next_out),l=e.next_out-w,d=yt.buf2string(e.output,w);e.next_out=l,e.avail_out=n-l,l&&e.output.set(e.output.subarray(w,w+l),0),this.onData(d)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(i===Te&&c===0)){if(i===at)return i=se.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Xe.prototype.onData=function(r){this.chunks.push(r)};Xe.prototype.onEnd=function(r){r===Te&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=On.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function Oi(r,t){const e=new Xe(t);if(e.push(r),e.err)throw e.msg||wt[e.err];return e.result}var Pi=Oi,Di={inflate:Pi};const{inflate:Bi}=Di;var Ui=Bi,ut={exports:{}},dn;function Ni(){return dn||(dn=1,(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function o(w,l,d){this.fn=w,this.context=l,this.once=d||!1}function i(w,l,d,b,y){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new o(d,b||w,y),m=e?e+l:l;return w._events[m]?w._events[m].fn?w._events[m]=[w._events[m],p]:w._events[m].push(p):(w._events[m]=p,w._eventsCount++),w}function u(w,l){--w._eventsCount===0?w._events=new n:delete w._events[l]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var l=[],d,b;if(this._eventsCount===0)return l;for(b in d=this._events)t.call(d,b)&&l.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(d)):l},c.prototype.listeners=function(l){var d=e?e+l:l,b=this._events[d];if(!b)return[];if(b.fn)return[b.fn];for(var y=0,p=b.length,m=new Array(p);y<p;y++)m[y]=b[y].fn;return m},c.prototype.listenerCount=function(l){var d=e?e+l:l,b=this._events[d];return b?b.fn?1:b.length:0},c.prototype.emit=function(l,d,b,y,p,m){var x=e?e+l:l;if(!this._events[x])return!1;var _=this._events[x],A=arguments.length,O,S;if(_.fn){switch(_.once&&this.removeListener(l,_.fn,void 0,!0),A){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,b),!0;case 4:return _.fn.call(_.context,d,b,y),!0;case 5:return _.fn.call(_.context,d,b,y,p),!0;case 6:return _.fn.call(_.context,d,b,y,p,m),!0}for(S=1,O=new Array(A-1);S<A;S++)O[S-1]=arguments[S];_.fn.apply(_.context,O)}else{var k=_.length,U;for(S=0;S<k;S++)switch(_[S].once&&this.removeListener(l,_[S].fn,void 0,!0),A){case 1:_[S].fn.call(_[S].context);break;case 2:_[S].fn.call(_[S].context,d);break;case 3:_[S].fn.call(_[S].context,d,b);break;case 4:_[S].fn.call(_[S].context,d,b,y);break;default:if(!O)for(U=1,O=new Array(A-1);U<A;U++)O[U-1]=arguments[U];_[S].fn.apply(_[S].context,O)}}return!0},c.prototype.on=function(l,d,b){return i(this,l,d,b,!1)},c.prototype.once=function(l,d,b){return i(this,l,d,b,!0)},c.prototype.removeListener=function(l,d,b,y){var p=e?e+l:l;if(!this._events[p])return this;if(!d)return u(this,p),this;var m=this._events[p];if(m.fn)m.fn===d&&(!y||m.once)&&(!b||m.context===b)&&u(this,p);else{for(var x=0,_=[],A=m.length;x<A;x++)(m[x].fn!==d||y&&!m[x].once||b&&m[x].context!==b)&&_.push(m[x]);_.length?this._events[p]=_.length===1?_[0]:_:u(this,p)}return this},c.prototype.removeAllListeners=function(l){var d;return l?(d=e?e+l:l,this._events[d]&&u(this,d)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,r.exports=c})(ut)),ut.exports}var Mi=Ni();const Vi=Sn(Mi);function ji(r,t){return Array.apply(0,new Array(Math.ceil(r.length/t))).map((e,n)=>r.slice(n*t,(n+1)*t))}const Ae=r=>"version"in r;function Fi(r){return new TextDecoder("utf-8").decode(r)}function zi(r){return new TextEncoder().encode(r)}function hn(r){return Se.encode(r)}function fn(r){return r.toString("base64")}function Zn(r){return ne.from(r,"base64")}function qi(r){const t=new Map;return r.errors&&r.errors.forEach(e=>{var n;let o=(n=e.msg)!==null&&n!==void 0?n:e.name;t.set(e.code,o)}),t}function Gi(r,...t){if(r.args.length!=t.length)throw new Error("Invalid argument length");const e={};let n=0;return r.args.forEach(o=>{e[o.name]=t[n],n+=1}),e}function $n(r,t={}){r.forEach(e=>{if("accounts"in e)$n(e.accounts,t[e.name]);else if(t[e.name]===void 0)throw new Error(`Invalid arguments: ${e.name} not provided.`)})}function Q(r){return r instanceof W?r:new W(r)}class Ki extends TypeError{constructor(t,e){let n;const{message:o,...i}=t,{path:u}=t,c=u.length===0?o:"At path: "+u.join(".")+" -- "+o;super(c),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var w;return(w=n)!=null?w:n=[t,...e()]}}}function Zi(r){return ve(r)&&typeof r[Symbol.iterator]=="function"}function ve(r){return typeof r=="object"&&r!=null}function le(r){return typeof r=="string"?JSON.stringify(r):""+r}function $i(r){const{done:t,value:e}=r.next();return t?void 0:e}function Hi(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:o,branch:i}=t,{type:u}=e,{refinement:c,message:w="Expected a value of type `"+u+"`"+(c?" with refinement `"+c+"`":"")+", but received: `"+le(n)+"`"}=r;return{value:n,type:u,refinement:c,key:o[o.length-1],path:o,branch:i,...r,message:w}}function*pn(r,t,e,n){Zi(r)||(r=[r]);for(const o of r){const i=Hi(o,t,e,n);i&&(yield i)}}function*kt(r,t,e){e===void 0&&(e={});const{path:n=[],branch:o=[r],coerce:i=!1,mask:u=!1}=e,c={path:n,branch:o};if(i&&(r=t.coercer(r,c),u&&t.type!=="type"&&ve(t.schema)&&ve(r)&&!Array.isArray(r)))for(const l in r)t.schema[l]===void 0&&delete r[l];let w=!0;for(const l of t.validator(r,c))w=!1,yield[l,void 0];for(let[l,d,b]of t.entries(r,c)){const y=kt(d,b,{path:l===void 0?n:[...n,l],branch:l===void 0?o:[...o,d],coerce:i,mask:u});for(const p of y)p[0]?(w=!1,yield[p[0],void 0]):i&&(d=p[1],l===void 0?r=d:r instanceof Map?r.set(l,d):r instanceof Set?r.add(d):ve(r)&&(r[l]=d))}if(w)for(const l of t.refiner(r,c))w=!1,yield[l,void 0];w&&(yield[void 0,r])}class de{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:n,validator:o,refiner:i,coercer:u=w=>w,entries:c=function*(){}}=t;this.type=e,this.schema=n,this.entries=c,this.coercer=u,o?this.validator=(w,l)=>{const d=o(w,l);return pn(d,l,this,w)}:this.validator=()=>[],i?this.refiner=(w,l)=>{const d=i(w,l);return pn(d,l,this,w)}:this.refiner=()=>[]}assert(t){return Wi(t,this)}create(t){return St(t,this)}is(t){return Hn(t,this)}mask(t){return Xi(t,this)}validate(t,e){return e===void 0&&(e={}),Oe(t,this,e)}}function Wi(r,t){const e=Oe(r,t);if(e[0])throw e[0]}function St(r,t){const e=Oe(r,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function Xi(r,t){const e=Oe(r,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Hn(r,t){return!Oe(r,t)[0]}function Oe(r,t,e){e===void 0&&(e={});const n=kt(r,t,e),o=$i(n);return o[0]?[new Ki(o[0],function*(){for(const u of n)u[0]&&(yield u[0])}),void 0]:[void 0,o[1]]}function Pe(r,t){return new de({type:r,schema:null,validator:t})}function Yi(){return Pe("any",()=>!0)}function lt(r){return new de({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+le(t)}})}function Ji(){return Pe("boolean",r=>typeof r=="boolean")}function wn(r){const t=le(r);return new de({type:"literal",schema:r,validator(e){return e===r||"Expected the literal `"+t+"`, but received: "+le(e)}})}function Fe(r){return new de({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function qe(){return Pe("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+le(r))}function Ge(r){return new de({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function he(){return Pe("string",r=>typeof r=="string"||"Expected a string, but received: "+le(r))}function ue(r){const t=Object.keys(r);return new de({type:"type",schema:r,*entries(e){if(ve(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return ve(e)||"Expected an object, but received: "+le(e)}})}function Wn(r){const t=r.map(e=>e.type).join(" | ");return new de({type:"union",schema:null,coercer(e,n){return(r.find(i=>{const[u]=i.validate(e,{coerce:!0});return!u})||It()).coercer(e,n)},validator(e,n){const o=[];for(const i of r){const[...u]=kt(e,i,n),[c]=u;if(c[0])for(const[w]of u)w&&o.push(w);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+le(e),...o]}})}function It(){return Pe("unknown",()=>!0)}function Qi(r,t,e){return new de({...r,coercer:(n,o)=>Hn(n,t)?r.coercer(e(n,o),o):r.coercer(n,o)})}const yn=99;async function eo(r,t,e){if(t.length<=yn)return await gn(r,t,e);{const n=ji(t,yn);return(await Promise.all(n.map(i=>gn(r,i,e)))).flat()}}async function gn(r,t,e){const n=e??r.commitment,{value:o,context:i}=await r.getMultipleAccountsInfoAndContext(t,n);return o.map((c,w)=>c===null?null:{publicKey:t[w],account:c,context:i})}async function to(r,t,e,n,o){var i;e&&e.length>0&&t.sign(...e);const u=t._compile(),c=u.serialize(),l=t._serialize(c).toString("base64"),d={encoding:"base64",commitment:n??r.commitment};if(o){const m=(Array.isArray(o)?o:u.nonProgramIds()).map(x=>x.toBase58());d.accounts={encoding:"base64",addresses:m}}e&&(d.sigVerify=!0);const b=[l,d],y=await r._rpcRequest("simulateTransaction",b),p=St(y,oo);if("error"in p){let m;if("data"in p.error&&(m=(i=p.error.data)===null||i===void 0?void 0:i.logs,m&&Array.isArray(m))){const x=`
    `,_=x+m.join(x);console.error(p.error.message,_)}throw new ft("failed to simulate transaction: "+p.error.message,m)}return p.result}function no(r){return Qi(Xn(r),ro,t=>"error"in t?t:{...t,result:St(t.result,r)})}const ro=Xn(It());function Xn(r){return Wn([ue({jsonrpc:wn("2.0"),id:he(),result:r}),ue({jsonrpc:wn("2.0"),id:he(),error:ue({code:It(),message:he(),data:Ge(Yi())})})])}function io(r){return no(ue({context:ue({slot:qe()}),value:r}))}const oo=io(ue({err:Fe(Wn([ue({}),he()])),logs:Fe(lt(he())),accounts:Ge(Fe(lt(Fe(ue({executable:Ji(),owner:he(),lamports:qe(),data:lt(he()),rentEpoch:Ge(qe())}))))),unitsConsumed:Ge(qe())}));class so{constructor(t,e,n){this.connection=t,this.wallet=e,this.opts=n,this.publicKey=e?.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(t,e){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(t,e,n){var o,i,u,c;if(n===void 0&&(n=this.opts),Ae(t))e&&t.sign(e);else if(t.feePayer=(o=t.feePayer)!==null&&o!==void 0?o:this.wallet.publicKey,t.recentBlockhash=(await this.connection.getLatestBlockhash(n.preflightCommitment)).blockhash,e)for(const l of e)t.partialSign(l);t=await this.wallet.signTransaction(t);const w=t.serialize();try{return await mn(this.connection,w,n)}catch(l){if(l instanceof gt){const d=hn(Ae(t)?((i=t.signatures)===null||i===void 0?void 0:i[0])||new Uint8Array:(u=t.signature)!==null&&u!==void 0?u:new Uint8Array),b=await this.connection.getTransaction(d,{commitment:"confirmed"});if(b){const y=(c=b.meta)===null||c===void 0?void 0:c.logMessages;throw y?new ft(l.message,y):l}else throw l}else throw l}}async sendAll(t,e){var n,o,i;e===void 0&&(e=this.opts);const u=(await this.connection.getLatestBlockhash(e.preflightCommitment)).blockhash;let c=t.map(d=>{var b,y;if(Ae(d.tx)){let p=d.tx;return d.signers&&p.sign(d.signers),p}else{let p=d.tx,m=(b=d.signers)!==null&&b!==void 0?b:[];return p.feePayer=(y=p.feePayer)!==null&&y!==void 0?y:this.wallet.publicKey,p.recentBlockhash=u,m.forEach(x=>{p.partialSign(x)}),p}});const w=await this.wallet.signAllTransactions(c),l=[];for(let d=0;d<c.length;d+=1){const b=w[d],y=b.serialize();try{l.push(await mn(this.connection,y,e))}catch(p){if(p instanceof gt){const m=hn(Ae(b)?((n=b.signatures)===null||n===void 0?void 0:n[0])||new Uint8Array:(o=b.signature)!==null&&o!==void 0?o:new Uint8Array),x=await this.connection.getTransaction(m,{commitment:"confirmed"});if(x){const _=(i=x.meta)===null||i===void 0?void 0:i.logMessages;throw _?new ft(p.message,_):p}else throw p}else throw p}}return l}async simulate(t,e,n,o){let i=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,u;if(Ae(t)?(e&&(t.sign(e),t=await this.wallet.signTransaction(t)),u=await this.connection.simulateTransaction(t,{commitment:n})):(t.feePayer=t.feePayer||this.wallet.publicKey,t.recentBlockhash=i,e&&(t=await this.wallet.signTransaction(t)),u=await to(this.connection,t,e,n,o)),u.value.err)throw new ao(u.value);return u.value}}class ao extends Error{constructor(t,e){super(e),this.simulationResponse=t}}async function mn(r,t,e){const n=e&&{skipPreflight:e.skipPreflight,preflightCommitment:e.preflightCommitment||e.commitment},o=await r.sendRawTransaction(t,n),i=(await r.confirmTransaction(o,e&&e.commitment)).value;if(i.err)throw new gt(`Raw transaction ${o} failed (${JSON.stringify(i)})`);return o}class gt extends Error{constructor(t){super(t)}}function mt(){return so.local()}const co=new Map;function Yn(r){return co.get(r)!==void 0}class Ze extends Error{constructor(t){super(t),this.name="IdlError"}}class De{constructor(t){this.stack=t}static parse(t){var e;const n=/^Program (\w*) invoke/,o=/^Program \w* success/,i=[];for(let u=0;u<t.length;u++){if(o.exec(t[u])){i.pop();continue}const c=(e=n.exec(t[u]))===null||e===void 0?void 0:e[1];c&&i.push(new W(c))}return new De(i)}}class xe extends Error{constructor(t,e,n,o,i,u){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=o,this.error={errorCode:t,errorMessage:e,comparedValues:u,origin:i},this._programErrorStack=De.parse(o)}static parse(t){if(!t)return null;const e=t.findIndex(y=>y.startsWith("Program log: AnchorError"));if(e===-1)return null;const n=t[e],o=[n];let i;if(e+1<t.length){if(t[e+1]==="Program log: Left:"){const y=/^Program log: (.*)$/,p=y.exec(t[e+2])[1],m=y.exec(t[e+4])[1];i=[new W(p),new W(m)],o.push(...t.slice(e+1,e+5))}else if(t[e+1].startsWith("Program log: Left:")){const y=/^Program log: (Left|Right): (.*)$/,p=y.exec(t[e+1])[2],m=y.exec(t[e+2])[2];o.push(...t.slice(e+1,e+3)),i=[p,m]}}const c=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),l=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),b=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(c){const[y,p,m]=c.slice(1,4),x={code:y,number:parseInt(p)};return new xe(x,m,o,t,void 0,i)}else if(l){const[y,p,m,x,_]=l.slice(1,6),A={code:m,number:parseInt(x)},O={file:y,line:parseInt(p)};return new xe(A,_,o,t,O,i)}else if(b){const[y,p,m,x]=b.slice(1,5),_=y,A={code:p,number:parseInt(m)};return new xe(A,x,o,t,_,i)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class $e extends Error{constructor(t,e,n){super(),this.code=t,this.msg=e,this.logs=n,n&&(this._programErrorStack=De.parse(n))}static parse(t,e){const n=t.toString();let o;if(n.includes("custom program error:")){let c=n.split("custom program error: ");if(c.length!==2)return null;o=c[1]}else{const c=n.match(/"Custom":([0-9]+)}/g);if(!c||c.length>1)return null;o=c[0].match(/([0-9]+)/g)[0]}let i;try{i=parseInt(o)}catch{return null}let u=e.get(i);return u!==void 0?new $e(i,u,t.logs):(u=uo.get(i),u!==void 0?new $e(i,u,t.logs):null)}get program(){var t;return(t=this._programErrorStack)===null||t===void 0?void 0:t.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var t;return(t=this._programErrorStack)===null||t===void 0?void 0:t.stack}toString(){return this.msg}}function Jn(r,t){Yn("debug-logs")&&console.log("Translating error:",r);const e=xe.parse(r.logs);if(e)return e;const n=$e.parse(r,t);if(n)return n;if(r.logs){const o={get:function(i,u){return u==="programErrorStack"?i.programErrorStack.stack:u==="program"?i.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=De.parse(r.logs),new Proxy(r,o)}return r}const B={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,ConstraintAccountIsNone:2020,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,AccountReallocExceedsLimit:3016,AccountDuplicateReallocs:3017,DeclaredProgramIdMismatch:4100,Deprecated:5e3},uo=new Map([[B.InstructionMissing,"8 byte instruction identifier not provided"],[B.InstructionFallbackNotFound,"Fallback functions are not supported"],[B.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[B.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[B.IdlInstructionStub,"The program was compiled without idl instructions"],[B.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[B.ConstraintMut,"A mut constraint was violated"],[B.ConstraintHasOne,"A has one constraint was violated"],[B.ConstraintSigner,"A signer constraint was violated"],[B.ConstraintRaw,"A raw constraint was violated"],[B.ConstraintOwner,"An owner constraint was violated"],[B.ConstraintRentExempt,"A rent exemption constraint was violated"],[B.ConstraintSeeds,"A seeds constraint was violated"],[B.ConstraintExecutable,"An executable constraint was violated"],[B.ConstraintState,"Deprecated Error, feel free to replace with something else"],[B.ConstraintAssociated,"An associated constraint was violated"],[B.ConstraintAssociatedInit,"An associated init constraint was violated"],[B.ConstraintClose,"A close constraint was violated"],[B.ConstraintAddress,"An address constraint was violated"],[B.ConstraintZero,"Expected zero account discriminant"],[B.ConstraintTokenMint,"A token mint constraint was violated"],[B.ConstraintTokenOwner,"A token owner constraint was violated"],[B.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[B.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[B.ConstraintMintDecimals,"A mint decimals constraint was violated"],[B.ConstraintSpace,"A space constraint was violated"],[B.ConstraintAccountIsNone,"A required account for the constraint is None"],[B.RequireViolated,"A require expression was violated"],[B.RequireEqViolated,"A require_eq expression was violated"],[B.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[B.RequireNeqViolated,"A require_neq expression was violated"],[B.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[B.RequireGtViolated,"A require_gt expression was violated"],[B.RequireGteViolated,"A require_gte expression was violated"],[B.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[B.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[B.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[B.AccountDidNotDeserialize,"Failed to deserialize the account"],[B.AccountDidNotSerialize,"Failed to serialize the account"],[B.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[B.AccountNotMutable,"The given account is not mutable"],[B.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[B.InvalidProgramId,"Program ID was not as expected"],[B.InvalidProgramExecutable,"Program account is not executable"],[B.AccountNotSigner,"The given account did not sign"],[B.AccountNotSystemOwned,"The given account is not owned by the system program"],[B.AccountNotInitialized,"The program expected this account to be already initialized"],[B.AccountNotProgramData,"The given account is not a program data account"],[B.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[B.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[B.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[B.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[B.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[B.Deprecated,"The API being used is deprecated and should no longer be used"]]);var vt=function(){return vt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vt.apply(this,arguments)},bt=function(){return bt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},bt.apply(this,arguments)};function lo(r){return r.toLowerCase()}var ho=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],fo=/[^A-Z0-9]+/gi;function po(r,t){t===void 0&&(t={});for(var e=t.splitRegexp,n=e===void 0?ho:e,o=t.stripRegexp,i=o===void 0?fo:o,u=t.transform,c=u===void 0?lo:u,w=t.delimiter,l=w===void 0?" ":w,d=vn(vn(r,n,"$1\0$2"),i,"\0"),b=0,y=d.length;d.charAt(b)==="\0";)b++;for(;d.charAt(y-1)==="\0";)y--;return d.slice(b,y).split("\0").map(c).join(l)}function vn(r,t,e){return t instanceof RegExp?r.replace(t,e):t.reduce(function(n,o){return n.replace(o,e)},r)}function wo(r,t){return t===void 0&&(t={}),po(r,bt({delimiter:"."},t))}function yo(r,t){return t===void 0&&(t={}),wo(r,vt({delimiter:"_"},t))}class X{static fieldLayout(t,e){const n=t.name!==void 0?K(t.name):void 0;switch(t.type){case"bool":return j.bool(n);case"u8":return j.u8(n);case"i8":return j.i8(n);case"u16":return j.u16(n);case"i16":return j.i16(n);case"u32":return j.u32(n);case"i32":return j.i32(n);case"f32":return j.f32(n);case"u64":return j.u64(n);case"i64":return j.i64(n);case"f64":return j.f64(n);case"u128":return j.u128(n);case"i128":return j.i128(n);case"u256":return j.u256(n);case"i256":return j.i256(n);case"bytes":return j.vecU8(n);case"string":return j.str(n);case"publicKey":return j.publicKey(n);default:{if("vec"in t.type)return j.vec(X.fieldLayout({name:void 0,type:t.type.vec},e),n);if("option"in t.type)return j.option(X.fieldLayout({name:void 0,type:t.type.option},e),n);if("defined"in t.type){if(!e)throw new Ze("User defined types not provided");const o=t.type.defined,i=e.filter(u=>u.name===o);if(i.length!==1)throw new Ze(`Type not found: ${JSON.stringify(t)}`);return X.typeDefLayout(i[0],e,n)}else if("array"in t.type){let o=t.type.array[0],i=t.type.array[1],u=X.fieldLayout({name:void 0,type:o},e);return j.array(u,i,n)}else throw new Error(`Not yet implemented: ${t}`)}}}static typeDefLayout(t,e=[],n){switch(t.type.kind){case"struct":{const o=t.type.fields.map(i=>X.fieldLayout(i,e));return j.struct(o,n)}case"enum":{let o=t.type.variants.map(i=>{const u=K(i.name);if(!i.fields)return j.struct([],u);const c=i.fields.map((w,l)=>w?.name?X.fieldLayout(w,e):X.fieldLayout({type:w,name:l.toString()},e));return j.struct(c,u)});return n!==void 0?j.rustEnum(o).replicate(n):j.rustEnum(o,n)}case"alias":return X.fieldLayout({type:t.type.value,name:t.name},e)}}}const bn="global";class xt{constructor(t){this.idl=t,this.ixLayout=xt.parseIxLayout(t);const e=new Map;t.instructions.forEach(n=>{const o=_n(bn,n.name);e.set(Se.encode(o),{layout:this.ixLayout.get(n.name),name:n.name})}),this.sighashLayouts=e}encode(t,e){return this._encode(bn,t,e)}_encode(t,e,n){const o=ne.alloc(1e3),i=K(e),u=this.ixLayout.get(i);if(!u)throw new Error(`Unknown method: ${i}`);const c=u.encode(n,o),w=o.slice(0,c);return ne.concat([_n(t,e),w])}static parseIxLayout(t){const e=t.instructions.map(n=>{let o=n.args.map(u=>{var c,w;return X.fieldLayout(u,Array.from([...(c=t.accounts)!==null&&c!==void 0?c:[],...(w=t.types)!==null&&w!==void 0?w:[]]))});const i=K(n.name);return[i,j.struct(o,i)]});return new Map(e)}decode(t,e="hex"){typeof t=="string"&&(t=e==="hex"?ne.from(t,"hex"):Se.decode(t));let n=Se.encode(t.slice(0,8)),o=t.slice(8);const i=this.sighashLayouts.get(n);return i?{data:i.layout.decode(o),name:i.name}:null}format(t,e){return ie.format(t,e,this.idl)}}class ie{static format(t,e,n){const o=n.instructions.filter(w=>t.name===w.name)[0];if(o===void 0)return console.error("Invalid instruction given"),null;const i=o.args.map(w=>({name:w.name,type:ie.formatIdlType(w.type),data:ie.formatIdlData(w,t.data[w.name],n.types)})),u=ie.flattenIdlAccounts(o.accounts),c=e.map((w,l)=>l<u.length?{name:u[l].name,...w}:{name:void 0,...w});return{args:i,accounts:c}}static formatIdlType(t){if(typeof t=="string")return t;if("vec"in t)return`Vec<${this.formatIdlType(t.vec)}>`;if("option"in t)return`Option<${this.formatIdlType(t.option)}>`;if("defined"in t)return t.defined;if("array"in t)return`Array<${t.array[0]}; ${t.array[1]}>`;throw new Error(`Unknown IDL type: ${t}`)}static formatIdlData(t,e,n){if(typeof t.type=="string")return e.toString();if(t.type.hasOwnProperty("vec"))return"["+e.map(o=>this.formatIdlData({name:"",type:t.type.vec},o)).join(", ")+"]";if(t.type.hasOwnProperty("option"))return e===null?"null":this.formatIdlData({name:"",type:t.type.option},e,n);if(t.type.hasOwnProperty("defined")){if(n===void 0)throw new Error("User defined types not provided");const o=n.filter(i=>i.name===t.type.defined);if(o.length!==1)throw new Error(`Type not found: ${t.type.defined}`);return ie.formatIdlDataDefined(o[0],e,n)}return"unknown"}static formatIdlDataDefined(t,e,n){switch(t.type.kind){case"struct":{const o=t.type;return"{ "+Object.keys(e).map(u=>{const c=o.fields.find(w=>w.name===u);if(!c)throw new Error("Unable to find type");return u+": "+ie.formatIdlData(c,e[u],n)}).join(", ")+" }"}case"enum":{if(t.type.variants.length===0)return"{}";if(t.type.variants[0].name){const o=t.type.variants,i=Object.keys(e)[0],u=e[i],c=Object.keys(u).map(l=>{var d;const b=u[l],y=(d=o[i])===null||d===void 0?void 0:d.find(p=>p.name===l);if(!y)throw new Error("Unable to find variant");return l+": "+ie.formatIdlData(y,b,n)}).join(", "),w=K(i,{pascalCase:!0});return c.length===0?w:`${w} { ${c} }`}else return"Tuple formatting not yet implemented"}case"alias":return ie.formatIdlType(t.type.value)}}static flattenIdlAccounts(t,e){return t.map(n=>{const o=go(n.name);if(n.hasOwnProperty("accounts")){const i=e?`${e} > ${o}`:o;return ie.flattenIdlAccounts(n.accounts,i)}else return{...n,name:e?`${e} > ${o}`:o}}).flat()}}function go(r){const t=r.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}function _n(r,t){let e=yo(t),n=`${r}:${e}`;return ne.from(In(n).slice(0,8))}function Qn(r,t){switch(t.type.kind){case"struct":return t.type.fields.map(e=>fe(r,e.type)).reduce((e,n)=>e+n,0);case"enum":{const e=t.type.variants.map(n=>n.fields?n.fields.map(o=>typeof o=="object"&&"name"in o?fe(r,o.type):fe(r,o)).reduce((o,i)=>o+i,0):0);return Math.max(...e)+1}case"alias":return fe(r,t.type.value)}}function fe(r,t){var e,n;switch(t){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"publicKey":return 32;default:if("vec"in t)return 1;if("option"in t)return 1+fe(r,t.option);if("coption"in t)return 4+fe(r,t.coption);if("defined"in t){const o=(n=(e=r.types)===null||e===void 0?void 0:e.filter(u=>u.name===t.defined))!==null&&n!==void 0?n:[];if(o.length!==1)throw new Ze(`Type not found: ${JSON.stringify(t)}`);let i=o[0];return Qn(r,i)}if("array"in t){let o=t.array[0],i=t.array[1];return fe(r,o)*i}throw new Error(`Invalid type ${JSON.stringify(t)}`)}}const _t=8;function er(r){return Buffer.from(In(r).slice(0,_t))}class me{constructor(t){if(t.accounts===void 0){this.accountLayouts=new Map;return}const e=t.accounts.map(n=>[n.name,X.typeDefLayout(n,t.types)]);this.accountLayouts=new Map(e),this.idl=t}async encode(t,e){const n=ne.alloc(1e3),o=this.accountLayouts.get(t);if(!o)throw new Error(`Unknown account: ${t}`);const i=o.encode(e,n);let u=n.slice(0,i),c=me.accountDiscriminator(t);return ne.concat([c,u])}decode(t,e){if(me.accountDiscriminator(t).compare(e.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(t,e)}decodeAny(t){const e=t.slice(0,8),n=Array.from(this.accountLayouts.keys()).find(o=>me.accountDiscriminator(o).equals(e));if(!n)throw new Error("Account descriminator not found");return this.decodeUnchecked(n,t)}decodeUnchecked(t,e){const n=e.subarray(_t),o=this.accountLayouts.get(t);if(!o)throw new Error(`Unknown account: ${t}`);return o.decode(n)}memcmp(t,e){const n=me.accountDiscriminator(t);return{offset:0,bytes:Se.encode(e?ne.concat([n,e]):n)}}size(t){var e;return _t+((e=Qn(this.idl,t))!==null&&e!==void 0?e:0)}static accountDiscriminator(t){const e=`account:${K(t,{pascalCase:!0,preserveConsecutiveUppercase:!0})}`;return er(e)}}class mo{constructor(t){if(t.events===void 0){this.layouts=new Map;return}const e=t.events.map(n=>{let o={name:n.name,type:{kind:"struct",fields:n.fields.map(i=>({name:i.name,type:i.type}))}};return[n.name,X.typeDefLayout(o,t.types)]});this.layouts=new Map(e),this.discriminators=new Map(t.events===void 0?[]:t.events.map(n=>[fn(vo(n.name)),n.name]))}decode(t){let e;try{e=Zn(t)}catch{return null}const n=fn(e.slice(0,8)),o=this.discriminators.get(n);if(o===void 0)return null;const i=this.layouts.get(o);if(!i)throw new Error(`Unknown event: ${o}`);return{data:i.decode(e.slice(8)),name:o}}}function vo(r){return er(`event:${r}`)}class bo{constructor(t){if(t.types===void 0){this.typeLayouts=new Map;return}const e=t.types.map(n=>[n.name,X.typeDefLayout(n,t.types)]);this.typeLayouts=new Map(e),this.idl=t}encode(t,e){const n=ne.alloc(1e3),o=this.typeLayouts.get(t);if(!o)throw new Error(`Unknown type: ${t}`);const i=o.encode(e,n);return n.slice(0,i)}decode(t,e){const n=this.typeLayouts.get(t);if(!n)throw new Error(`Unknown type: ${t}`);return n.decode(e)}}class tr{constructor(t){this.instruction=new xt(t),this.accounts=new me(t),this.events=new mo(t),this.types=new bo(t)}}var _o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};class Y{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,n){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var Ye=Y;function Eo(r,t){return t.property?r+"["+t.property+"]":r}class pe extends Y{isCount(){throw new Error("ExternalLayout is abstract")}}class nr extends pe{constructor(t,e,n){if(!(t instanceof Y))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Je||this.layout instanceof rr}decode(t,e){return e===void 0&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,n){return n===void 0&&(n=0),this.layout.encode(t,e,n+this.offset)}}class Je extends Y{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,n){return n===void 0&&(n=0),e.writeUIntLE(t,n,this.span),this.span}}class rr extends Y{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,n){return n===void 0&&(n=0),e.writeUIntBE(t,n,this.span),this.span}}const Et=Math.pow(2,32);function ir(r){const t=Math.floor(r/Et),e=r-t*Et;return{hi32:t,lo32:e}}function or(r,t){return r*Et+t}class Ao extends Y{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const n=t.readUInt32LE(e),o=t.readUInt32LE(e+4);return or(o,n)}encode(t,e,n){n===void 0&&(n=0);const o=ir(t);return e.writeUInt32LE(o.lo32,n),e.writeUInt32LE(o.hi32,n+4),8}}class ko extends Y{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const n=t.readUInt32LE(e),o=t.readInt32LE(e+4);return or(o,n)}encode(t,e,n){n===void 0&&(n=0);const o=ir(t);return e.writeUInt32LE(o.lo32,n),e.writeInt32LE(o.hi32,n+4),8}}class So extends Y{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((i,u)=>i&&u instanceof Y,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let o=-1;try{o=t.reduce((i,u)=>i+u.getSpan(),0)}catch{}super(o,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let n=0;try{n=this.fields.reduce((o,i)=>{const u=i.getSpan(t,e);return e+=u,o+u},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e){e===void 0&&(e=0);const n=this.makeDestinationObject();for(const o of this.fields)if(o.property!==void 0&&(n[o.property]=o.decode(t,e)),e+=o.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n){n===void 0&&(n=0);const o=n;let i=0,u=0;for(const c of this.fields){let w=c.span;if(u=0<w?w:0,c.property!==void 0){const l=t[c.property];l!==void 0&&(u=c.encode(l,e,n),0>w&&(w=c.getSpan(e,n)))}i=n,n+=w}return i+u-o}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}class sr{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class En extends sr{constructor(t,e){if(!(t instanceof pe&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}class ar extends Y{constructor(t,e,n){const o=t instanceof Je||t instanceof rr;if(o)t=new En(new nr(t));else if(t instanceof pe&&t.isCount())t=new En(t);else if(!(t instanceof sr))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Y))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&o&&(i+=t.layout.span)),super(i,n),this.discriminator=t,this.usesPrefixDiscriminator=o,this.defaultLayout=e,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return u(c)},this.configGetSourceVariant=function(c){u=c.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(t.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(t,e){e===void 0&&(e=0);let n;const o=this.discriminator,i=o.decode(t,e);let u=this.registry[i];if(u===void 0){let c=0;u=this.defaultLayout,this.usesPrefixDiscriminator&&(c=o.layout.span),n=this.makeDestinationObject(),n[o.property]=i,n[u.property]=this.defaultLayout.decode(t,e+c)}else n=u.decode(t,e);return n}encode(t,e,n){n===void 0&&(n=0);const o=this.getSourceVariant(t);if(o===void 0){const i=this.discriminator,u=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(t[i.property],e,n),c+u.encode(t[u.property],e,n+c)}return o.encode(t,e,n)}addVariant(t,e,n){const o=new Io(this,t,e,n);return this.registry[t]=o,o}getVariant(t,e){let n=t;return Buffer.isBuffer(t)&&(e===void 0&&(e=0),n=this.discriminator.decode(t,e)),this.registry[n]}}class Io extends Y{constructor(t,e,n,o){if(!(t instanceof ar))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&o===void 0&&(o=n,n=null),n){if(!(n instanceof Y))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof o!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,o),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(t,e+n)}decode(t,e){const n=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+o):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n){n===void 0&&(n=0);let o=0;if(this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=o;if(this.layout&&(this.layout.encode(t[this.property],e,n+o),i+=this.layout.getSpan(e,n+o),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class xo extends Y{constructor(t,e){if(!(t instanceof pe&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof pe||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e){e===void 0&&(e=0);let n=this.span;return 0>n&&(n=this.length.decode(t,e)),t.slice(e,e+n)}encode(t,e,n){let o=this.length;if(this.length instanceof pe&&(o=t.length),!(Buffer.isBuffer(t)&&o===t.length))throw new TypeError(Eo("Blob.encode",this)+" requires (length "+o+") Buffer as src");if(n+o>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),n,o,"hex"),this.length instanceof pe&&this.length.encode(o,e,n),o}}var Lo=((r,t,e)=>new nr(r,t,e)),To=(r=>new Je(1,r)),ae=(r=>new Je(4,r)),Co=(r=>new Ao(r)),ce=(r=>new ko(r)),H=((r,t,e)=>new So(r,t,e)),cr=((r,t,e)=>new ar(r,t,e)),Be=((r,t)=>new xo(r,t));class Ro extends Ye{constructor(t){super(-1,t),this.property=t,this.layout=H([ae("length"),ae("lengthPadding"),Be(Lo(ae(),-8),"chars")],this.property)}encode(t,e,n=0){if(t==null)return this.layout.span;const o={chars:Buffer.from(t,"utf8")};return this.layout.encode(o,e,n)}decode(t,e=0){return this.layout.decode(t,e).chars.toString()}getSpan(t,e=0){return ae().span+ae().span+new Ln(new Uint8Array(t).slice(e,e+4),10,"le").toNumber()}}function Qe(r){return new Ro(r)}function te(r){return Be(32,r)}const J=cr(ae("instruction"));J.addVariant(0,H([ce("lamports"),ce("space"),te("owner")]),"createAccount");J.addVariant(1,H([te("owner")]),"assign");J.addVariant(2,H([ce("lamports")]),"transfer");J.addVariant(3,H([te("base"),Qe("seed"),ce("lamports"),ce("space"),te("owner")]),"createAccountWithSeed");J.addVariant(4,H([te("authorized")]),"advanceNonceAccount");J.addVariant(5,H([ce("lamports")]),"withdrawNonceAccount");J.addVariant(6,H([te("authorized")]),"initializeNonceAccount");J.addVariant(7,H([te("authorized")]),"authorizeNonceAccount");J.addVariant(8,H([ce("space")]),"allocate");J.addVariant(9,H([te("base"),Qe("seed"),ce("space"),te("owner")]),"allocateWithSeed");J.addVariant(10,H([te("base"),Qe("seed"),te("owner")]),"assignWithSeed");J.addVariant(11,H([ce("lamports"),Qe("seed"),te("owner")]),"transferWithSeed");Math.max(...Object.values(J.registry).map(r=>r.span));class Oo extends Ye{constructor(t,e,n,o){super(t.span,o),this.layout=t,this.decoder=e,this.encoder=n}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,n){return this.layout.encode(this.encoder(t),e,n)}getSpan(t,e){return this.layout.getSpan(t,e)}}function An(r){return new Oo(Be(32),t=>new W(t),t=>t.toBuffer(),r)}H([ae("version"),ae("state"),An("authorizedPubkey"),An("nonce"),H([Co("lamportsPerSignature")],"feeCalculator")]);function Po(r,...t){let e=[ne.from([97,110,99,104,111,114])];t.forEach(o=>{e.push(o instanceof ne?o:Q(o).toBuffer())});const[n]=W.findProgramAddressSync(e,Q(r));return n}const Do=new W("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Bo=new W("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var kn={exports:{}};(function(r,t){var e=typeof self<"u"?self:_o,n=(function(){function i(){this.fetch=!1,this.DOMException=e.DOMException}return i.prototype=e,new i})();(function(i){(function(u){var c={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function w(f){return f&&DataView.prototype.isPrototypeOf(f)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(f){return f&&l.indexOf(Object.prototype.toString.call(f))>-1};function b(f){if(typeof f!="string"&&(f=String(f)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(f))throw new TypeError("Invalid character in header field name");return f.toLowerCase()}function y(f){return typeof f!="string"&&(f=String(f)),f}function p(f){var v={next:function(){var C=f.shift();return{done:C===void 0,value:C}}};return c.iterable&&(v[Symbol.iterator]=function(){return v}),v}function m(f){this.map={},f instanceof m?f.forEach(function(v,C){this.append(C,v)},this):Array.isArray(f)?f.forEach(function(v){this.append(v[0],v[1])},this):f&&Object.getOwnPropertyNames(f).forEach(function(v){this.append(v,f[v])},this)}m.prototype.append=function(f,v){f=b(f),v=y(v);var C=this.map[f];this.map[f]=C?C+", "+v:v},m.prototype.delete=function(f){delete this.map[b(f)]},m.prototype.get=function(f){return f=b(f),this.has(f)?this.map[f]:null},m.prototype.has=function(f){return this.map.hasOwnProperty(b(f))},m.prototype.set=function(f,v){this.map[b(f)]=y(v)},m.prototype.forEach=function(f,v){for(var C in this.map)this.map.hasOwnProperty(C)&&f.call(v,this.map[C],C,this)},m.prototype.keys=function(){var f=[];return this.forEach(function(v,C){f.push(C)}),p(f)},m.prototype.values=function(){var f=[];return this.forEach(function(v){f.push(v)}),p(f)},m.prototype.entries=function(){var f=[];return this.forEach(function(v,C){f.push([C,v])}),p(f)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function x(f){if(f.bodyUsed)return Promise.reject(new TypeError("Already read"));f.bodyUsed=!0}function _(f){return new Promise(function(v,C){f.onload=function(){v(f.result)},f.onerror=function(){C(f.error)}})}function A(f){var v=new FileReader,C=_(v);return v.readAsArrayBuffer(f),C}function O(f){var v=new FileReader,C=_(v);return v.readAsText(f),C}function S(f){for(var v=new Uint8Array(f),C=new Array(v.length),F=0;F<v.length;F++)C[F]=String.fromCharCode(v[F]);return C.join("")}function k(f){if(f.slice)return f.slice(0);var v=new Uint8Array(f.byteLength);return v.set(new Uint8Array(f)),v.buffer}function U(){return this.bodyUsed=!1,this._initBody=function(f){this._bodyInit=f,f?typeof f=="string"?this._bodyText=f:c.blob&&Blob.prototype.isPrototypeOf(f)?this._bodyBlob=f:c.formData&&FormData.prototype.isPrototypeOf(f)?this._bodyFormData=f:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)?this._bodyText=f.toString():c.arrayBuffer&&c.blob&&w(f)?(this._bodyArrayBuffer=k(f.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(f)||d(f))?this._bodyArrayBuffer=k(f):this._bodyText=f=Object.prototype.toString.call(f):this._bodyText="",this.headers.get("content-type")||(typeof f=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var f=x(this);if(f)return f;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?x(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(A)}),this.text=function(){var f=x(this);if(f)return f;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(S(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(V)}),this.json=function(){return this.text().then(JSON.parse)},this}var q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function P(f){var v=f.toUpperCase();return q.indexOf(v)>-1?v:f}function M(f,v){v=v||{};var C=v.body;if(f instanceof M){if(f.bodyUsed)throw new TypeError("Already read");this.url=f.url,this.credentials=f.credentials,v.headers||(this.headers=new m(f.headers)),this.method=f.method,this.mode=f.mode,this.signal=f.signal,!C&&f._bodyInit!=null&&(C=f._bodyInit,f.bodyUsed=!0)}else this.url=String(f);if(this.credentials=v.credentials||this.credentials||"same-origin",(v.headers||!this.headers)&&(this.headers=new m(v.headers)),this.method=P(v.method||this.method||"GET"),this.mode=v.mode||this.mode||null,this.signal=v.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&C)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(C)}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function V(f){var v=new FormData;return f.trim().split("&").forEach(function(C){if(C){var F=C.split("="),Z=F.shift().replace(/\+/g," "),g=F.join("=").replace(/\+/g," ");v.append(decodeURIComponent(Z),decodeURIComponent(g))}}),v}function N(f){var v=new m,C=f.replace(/\r?\n[\t ]+/g," ");return C.split(/\r?\n/).forEach(function(F){var Z=F.split(":"),g=Z.shift().trim();if(g){var s=Z.join(":").trim();v.append(g,s)}}),v}U.call(M.prototype);function D(f,v){v||(v={}),this.type="default",this.status=v.status===void 0?200:v.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in v?v.statusText:"OK",this.headers=new m(v.headers),this.url=v.url||"",this._initBody(f)}U.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},D.error=function(){var f=new D(null,{status:0,statusText:""});return f.type="error",f};var R=[301,302,303,307,308];D.redirect=function(f,v){if(R.indexOf(v)===-1)throw new RangeError("Invalid status code");return new D(null,{status:v,headers:{location:f}})},u.DOMException=i.DOMException;try{new u.DOMException}catch{u.DOMException=function(v,C){this.message=v,this.name=C;var F=Error(v);this.stack=F.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function I(f,v){return new Promise(function(C,F){var Z=new M(f,v);if(Z.signal&&Z.signal.aborted)return F(new u.DOMException("Aborted","AbortError"));var g=new XMLHttpRequest;function s(){g.abort()}g.onload=function(){var a={status:g.status,statusText:g.statusText,headers:N(g.getAllResponseHeaders()||"")};a.url="responseURL"in g?g.responseURL:a.headers.get("X-Request-URL");var h="response"in g?g.response:g.responseText;C(new D(h,a))},g.onerror=function(){F(new TypeError("Network request failed"))},g.ontimeout=function(){F(new TypeError("Network request failed"))},g.onabort=function(){F(new u.DOMException("Aborted","AbortError"))},g.open(Z.method,Z.url,!0),Z.credentials==="include"?g.withCredentials=!0:Z.credentials==="omit"&&(g.withCredentials=!1),"responseType"in g&&c.blob&&(g.responseType="blob"),Z.headers.forEach(function(a,h){g.setRequestHeader(h,a)}),Z.signal&&(Z.signal.addEventListener("abort",s),g.onreadystatechange=function(){g.readyState===4&&Z.signal.removeEventListener("abort",s)}),g.send(typeof Z._bodyInit>"u"?null:Z._bodyInit)})}return I.polyfill=!0,i.fetch||(i.fetch=I,i.Headers=m,i.Request=M,i.Response=D),u.Headers=m,u.Request=M,u.Response=D,u.fetch=I,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;t=o.fetch,t.default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,r.exports=t})(kn,kn.exports);j.rustEnum([j.struct([],"uninitialized"),j.struct([j.option(j.publicKey(),"authorityAddress")],"buffer"),j.struct([j.publicKey("programdataAddress")],"program"),j.struct([j.u64("slot"),j.option(j.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,j.u32());function Uo(r){return"accounts"in r}async function No(r){const t=(await W.findProgramAddress([],r))[0];return await W.createWithSeed(t,Mo(),r)}function Mo(){return"anchor:idl"}const Vo=j.struct([j.publicKey("authority"),j.vecU8("data")]);function jo(r){return Vo.decode(r)}function et(r,t){var e,n;let o={};const i=r.args?r.args.length:0;if(t.length>i){if(t.length!==i+1)throw new Error(`provided too many arguments ${t} to instruction ${r?.name} expecting: ${(n=(e=r.args)===null||e===void 0?void 0:e.map(u=>u.name))!==null&&n!==void 0?n:[]}`);o=t.pop()}return[t,o]}class He{static build(t,e,n){if(t.name==="_inner")throw new Ze("the _inner name is reserved");const o=(...i)=>{const[u,c]=et(t,[...i]);$n(t.accounts,c.accounts),Fo(t,...i);const w=o.accounts(c.accounts);return c.remainingAccounts!==void 0&&w.push(...c.remainingAccounts),Yn("debug-logs")&&console.log("Outgoing account metas:",w),new yr({keys:w,programId:n,data:e(t.name,Gi(t,...u))})};return o.accounts=i=>He.accountsArray(i,t.accounts,n,t.name),o}static accountsArray(t,e,n,o){return t?e.map(i=>{if(("accounts"in i?i.accounts:void 0)!==void 0){const c=t[i.name];return He.accountsArray(c,i.accounts,n,o).flat()}else{const c=i;let w;try{w=Q(t[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${o!==void 0?' for instruction "'+o+'"':""}. Expected PublicKey or string.`)}const l=c.isOptional&&w.equals(n),d=c.isMut&&!l,b=c.isSigner&&!l;return{pubkey:w,isWritable:d,isSigner:b}}}).flat():[]}}function Fo(r,...t){}class zo{static build(t,e){return(...o)=>{var i,u,c;const[,w]=et(t,[...o]),l=new gr;if(w.preInstructions&&w.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=w.preInstructions)===null||i===void 0||i.forEach(d=>l.add(d)),(u=w.instructions)===null||u===void 0||u.forEach(d=>l.add(d)),l.add(e(...o)),(c=w.postInstructions)===null||c===void 0||c.forEach(d=>l.add(d)),l}}}class qo{static build(t,e,n,o){return async(...u)=>{var c;const w=e(...u),[,l]=et(t,[...u]);if(o.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await o.sendAndConfirm(w,(c=l.signers)!==null&&c!==void 0?c:[],l.options)}catch(d){throw Jn(d,n)}}}}class Go{static build(t,e,n,o){var i;const u={};return(i=t.accounts)===null||i===void 0||i.forEach(c=>{const w=K(c.name);u[w]=new Ko(t,c,n,o,e)}),u}}class Ko{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}get idlAccount(){return this._idlAccount}constructor(t,e,n,o,i){this._idlAccount=e,this._programId=n,this._provider=o??mt(),this._coder=i??new tr(t),this._size=this._coder.accounts.size(e)}async fetchNullable(t,e){const{data:n}=await this.fetchNullableAndContext(t,e);return n}async fetchNullableAndContext(t,e){const n=await this.getAccountInfoAndContext(t,e),{value:o,context:i}=n;return{data:o&&o.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,o.data):null,context:i}}async fetch(t,e){const{data:n}=await this.fetchNullableAndContext(t,e);if(n===null)throw new Error(`Account does not exist or has no data ${t.toString()}`);return n}async fetchAndContext(t,e){const{data:n,context:o}=await this.fetchNullableAndContext(t,e);if(n===null)throw new Error(`Account does not exist ${t.toString()}`);return{data:n,context:o}}async fetchMultiple(t,e){return(await this.fetchMultipleAndContext(t,e)).map(o=>o?o.data:null)}async fetchMultipleAndContext(t,e){return(await eo(this._provider.connection,t.map(o=>Q(o)),e)).map(o=>{if(o==null)return null;const{account:i,context:u}=o;return{data:this._coder.accounts.decode(this._idlAccount.name,i.data),context:u}})}async all(t){const e=this.coder.accounts.memcmp(this._idlAccount.name,t instanceof Buffer?t:void 0),n=[];return e?.offset!=null&&e?.bytes!=null&&n.push({memcmp:{offset:e.offset,bytes:e.bytes}}),e?.dataSize!=null&&n.push({dataSize:e.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...n,...Array.isArray(t)?t:[]]})).map(({pubkey:i,account:u})=>({publicKey:i,account:this._coder.accounts.decode(this._idlAccount.name,u.data)}))}subscribe(t,e){const n=ke.get(t.toString());if(n)return n.ee;const o=new Vi;t=Q(t);const i=this._provider.connection.onAccountChange(t,u=>{const c=this._coder.accounts.decode(this._idlAccount.name,u.data);o.emit("change",c)},e);return ke.set(t.toString(),{ee:o,listener:i}),o}async unsubscribe(t){let e=ke.get(t.toString());if(!e){console.warn("Address is not subscribed");return}ke&&await this._provider.connection.removeAccountChangeListener(e.listener).then(()=>{ke.delete(t.toString())}).catch(console.error)}async createInstruction(t,e){const n=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return xn.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:t.publicKey,space:e??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(e??n),programId:this._programId})}async associated(...t){const e=await this.associatedAddress(...t);return await this.fetch(e)}async associatedAddress(...t){return await Po(this._programId,...t)}async getAccountInfo(t,e){return await this._provider.connection.getAccountInfo(Q(t),e)}async getAccountInfoAndContext(t,e){return await this._provider.connection.getAccountInfoAndContext(Q(t),e)}}const ke=new Map,At="Program log: ",ur="Program data: ",Zo=At.length,$o=ur.length;class Ho{constructor(t,e,n){this._programId=t,this._provider=e,this._eventParser=new lr(t,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(t,e){var n;let o=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(t)||this._eventListeners.set(t,[]),this._eventListeners.set(t,((n=this._eventListeners.get(t))!==null&&n!==void 0?n:[]).concat(o)),this._eventCallbacks.set(o,[t,e]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(i,u)=>{if(!i.err)for(const c of this._eventParser.parseLogs(i.logs)){const w=this._eventListeners.get(c.name);w&&w.forEach(l=>{const d=this._eventCallbacks.get(l);if(d){const[,b]=d;b(c.data,u.slot,i.signature)}})}})),o}async removeEventListener(t){const e=this._eventCallbacks.get(t);if(!e)throw new Error(`Event listener ${t} doesn't exist!`);const[n]=e;let o=this._eventListeners.get(n);if(!o)throw new Error(`Event listeners don't exist for ${n}!`);if(this._eventCallbacks.delete(t),o=o.filter(i=>i!==t),this._eventListeners.set(n,o),o.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size===0){if(this._eventListeners.size!==0)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class lr{constructor(t,e){this.coder=e,this.programId=t}*parseLogs(t,e=!1){const n=new Xo(t),o=new Wo;let i=n.next();for(;i!==null;){let[u,c,w]=this.handleLog(o,i,e);u&&(yield u),c&&o.push(c),w&&o.pop(),i=n.next()}}handleLog(t,e,n){return t.stack.length>0&&t.program()===this.programId.toString()?this.handleProgramLog(e,n):[null,...this.handleSystemLog(e)]}handleProgramLog(t,e){if(t.startsWith(At)||t.startsWith(ur)){const n=t.startsWith(At)?t.slice(Zo):t.slice($o),o=this.coder.events.decode(n);if(e&&o===null)throw new Error(`Unable to decode event ${n}`);return[o,null,!1]}else return[null,...this.handleSystemLog(t)]}handleSystemLog(t){const e=t.split(":")[0];return e.match(/^Program (.*) success/g)!==null?[null,!0]:e.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:e.includes("invoke")?["cpi",!1]:[null,!1]}}class Wo{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(t){this.stack.push(t)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class Xo{constructor(t){this.logs=t}next(){if(this.logs.length===0)return null;let t=this.logs[0];return this.logs=this.logs.slice(1),t}}class Yo{static build(t,e,n,o,i,u,c){return async(...l)=>{var d;const b=e(...l),[,y]=et(t,[...l]);let p;if(o.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{p=await o.simulate(b,y.signers,(d=y.options)===null||d===void 0?void 0:d.commitment)}catch(_){throw Jn(_,n)}if(p===void 0)throw new Error("Unable to simulate transaction");const m=p.logs;if(!m)throw new Error("Simulated logs not found");const x=[];if(c.events){let _=new lr(u,i);for(const A of _.parseLogs(m))x.push(A)}return{events:x,raw:m}}}}function dt(r){return new dr(Be(8),t=>Lt.fromBuffer(t),t=>t.toBuffer(),r)}function ze(r){return new dr(Be(32),t=>new W(t),t=>t.toBuffer(),r)}function ht(r,t){return new Jo(r,t)}class dr extends Ye{constructor(t,e,n,o){super(t.span,o),this.layout=t,this.decoder=e,this.encoder=n}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,n){return this.layout.encode(this.encoder(t),e,n)}getSpan(t,e){return this.layout.getSpan(t,e)}}class Jo extends Ye{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=ae()}encode(t,e,n=0){return t==null?this.layout.span+this.discriminator.encode(0,e,n):(this.discriminator.encode(1,e,n),this.layout.encode(t,e,n+4)+4)}decode(t,e=0){const n=this.discriminator.decode(t,e);if(n===0)return null;if(n===1)return this.layout.decode(t,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,e=0){return this.layout.getSpan(t,e+4)+4}}class Lt extends Ln{toBuffer(){const t=super.toArray().reverse(),e=Buffer.from(t);if(e.length===8)return e;if(e.length>=8)throw new Error("u64 too large");const n=Buffer.alloc(8);return e.copy(n),n}static fromBuffer(t){if(t.length!==8)throw new Error(`Invalid buffer length: ${t.length}`);return new Lt([...t].reverse().map(e=>`00${e.toString(16)}`.slice(-2)).join(""),16)}}const Qo=H([ze("mint"),ze("owner"),dt("amount"),ht(ze(),"delegate"),(r=>{const t=cr(To("discriminator"),null,r);return t.addVariant(0,H([]),"uninitialized"),t.addVariant(1,H([]),"initialized"),t.addVariant(2,H([]),"frozen"),t})("state"),ht(dt(),"isNative"),dt("delegatedAmount"),ht(ze(),"closeAuthority")]);function es(r){return Qo.decode(r)}class Ce{constructor(t,e,n,o,i,u,c,w){this._accounts=e,this._provider=n,this._programId=o,this._idlIx=i,this._idlTypes=c,this._customResolver=w,this._args=t,this._accountStore=new ts(n,u,this._programId)}args(t){this._args=t}async resolve(){for(await this.resolveConst(this._idlIx.accounts),this._resolveEventCpi(this._idlIx.accounts);await this.resolvePdas(this._idlIx.accounts)+await this.resolveRelations(this._idlIx.accounts)+await this.resolveCustom()>0;);}async resolveCustom(){if(this._customResolver){const{accounts:t,resolved:e}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=t,e}return 0}resolveOptionalsHelper(t,e){const n={};for(const o of e){const i=o.name,u=t[i];u!==void 0&&(hr(u)?Uo(o)?n[i]=this.resolveOptionalsHelper(u,o.accounts):n[i]=fr(u):u!==null?n[i]=Q(u):o.isOptional&&(n[i]=this._programId))}return n}resolveOptionals(t){Object.assign(this._accounts,this.resolveOptionalsHelper(t,this._idlIx.accounts))}get(t){const e=t.reduce((n,o)=>n&&n[o],this._accounts);if(e&&e.toBase58)return e}set(t,e){let n=this._accounts;t.forEach((o,i)=>{i==t.length-1&&(n[o]=e),n[o]=n[o]||{},n=n[o]})}async resolveConst(t,e=[]){for(let n=0;n<t.length;n+=1){const o=t[n],i=o.accounts;i&&await this.resolveConst(i,[...e,K(o.name)]);const u=o,c=K(o.name);if(u.isSigner&&!this.get([...e,c])){if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this.set([...e,c],this._provider.wallet.publicKey)}Reflect.has(Ce.CONST_ACCOUNTS,c)&&!this.get([...e,c])&&this.set([...e,c],Ce.CONST_ACCOUNTS[c])}}_resolveEventCpi(t,e=[]){for(const n in t){const o=t[n],i=o.accounts;i&&this._resolveEventCpi(i,[...e,K(o.name)]);const u=+n+1;if(u===t.length)return;const c=K(t[n].name),w=K(t[u].name);if(c==="eventAuthority"&&w==="program"){const l=[...e,c],d=[...e,w];this.get(l)||this.set(l,W.findProgramAddressSync([Buffer.from("__event_authority")],this._programId)[0]),this.get(d)||this.set(d,this._programId);return}}}async resolvePdas(t,e=[]){let n=0;for(let o=0;o<t.length;o+=1){const i=t[o],u=i.accounts;u&&(n+=await this.resolvePdas(u,[...e,K(i.name)]));const c=i,w=K(i.name);c.pda&&c.pda.seeds.length>0&&!this.get([...e,w])&&await this.autoPopulatePda(c,e)&&(n+=1)}return n}async resolveRelations(t,e=[]){let n=0;for(let o=0;o<t.length;o+=1){const i=t[o],u=i.accounts;u&&(n+=await this.resolveRelations(u,[...e,K(i.name)]));const c=i.relations||[],w=K(i.name),l=[...e,w],d=this.get(l);if(d){const b=c.filter(y=>!this.get([...e,K(y)]));if(n+=b.length,b.length>0){const y=await this._accountStore.fetchAccount({publicKey:d});await Promise.all(b.map(async p=>{const m=K(p);return this.set([...e,m],y[m]),y[m]}))}}}return n}async autoPopulatePda(t,e=[]){if(!t.pda||!t.pda.seeds)throw new Error("Must have seeds");const n=await Promise.all(t.pda.seeds.map(u=>this.toBuffer(u,e)));if(n.some(u=>typeof u>"u"))return;const o=await this.parseProgramId(t,e);if(!o)return;const[i]=await W.findProgramAddress(n,o);this.set([...e,K(t.name)],i)}async parseProgramId(t,e=[]){var n;if(!(!((n=t.pda)===null||n===void 0)&&n.programId))return this._programId;switch(t.pda.programId.kind){case"const":return new W(this.toBufferConst(t.pda.programId.value));case"arg":return this.argValue(t.pda.programId);case"account":return await this.accountValue(t.pda.programId,e);default:throw new Error(`Unexpected program seed kind: ${t.pda.programId.kind}`)}}async toBuffer(t,e=[]){switch(t.kind){case"const":return this.toBufferConst(t);case"arg":return await this.toBufferArg(t);case"account":return await this.toBufferAccount(t,e);default:throw new Error(`Unexpected seed kind: ${t.kind}`)}}getType(t,e=[]){if(e.length>0&&t.defined){const n=this._idlTypes.find(u=>u.name===t.defined);if(!n)throw new Error(`Cannot find type ${t.defined}`);const i=n.type.fields.find(u=>u.name===e[0]);return this.getType(i.type,e.slice(1))}return t}toBufferConst(t){return this.toBufferValue(this.getType(t.type,(t.path||"").split(".").slice(1)),t.value)}async toBufferArg(t){const e=this.argValue(t);if(!(typeof e>"u"))return this.toBufferValue(this.getType(t.type,(t.path||"").split(".").slice(1)),e)}argValue(t){const e=t.path.split("."),n=K(e[0]),o=this._idlIx.args.findIndex(i=>i.name===n);if(o===-1)throw new Error(`Unable to find argument for seed: ${n}`);return e.slice(1).reduce((i,u)=>(i||{})[u],this._args[o])}async toBufferAccount(t,e=[]){const n=await this.accountValue(t,e);if(n)return this.toBufferValue(t.type,n)}async accountValue(t,e=[]){const n=t.path.split("."),o=n[0],i=this.get([...e,K(o)]);if(i===null)throw new Error("fieldPubkey is null");if(n.length===1)return i;const u=await this._accountStore.fetchAccount({publicKey:i,name:t.account});return this.parseAccountValue(u,n.slice(1))}parseAccountValue(t,e){let n;for(;e.length>0;)n=t[K(e[0])],e=e.slice(1);return n}toBufferValue(t,e){switch(t){case"u8":return Buffer.from([e]);case"u16":let n=Buffer.alloc(2);return n.writeUInt16LE(e),n;case"u32":let o=Buffer.alloc(4);return o.writeUInt32LE(e),o;case"u64":let i=Buffer.alloc(8);return i.writeBigUInt64LE(BigInt(e)),i;case"string":return Buffer.from(zi(e));case"publicKey":return e.toBuffer();default:if(t.array)return Buffer.from(e);throw new Error(`Unexpected seed type: ${t}`)}}}Ce.CONST_ACCOUNTS={associatedTokenProgram:Bo,rent:vr,systemProgram:xn.programId,tokenProgram:Do,clock:mr};class ts{constructor(t,e,n){this._provider=t,this._programId=n,this._cache=new Map,this._idls={},this._idls[n.toBase58()]=e}async ensureIdl(t){if(!this._idls[t.toBase58()]){const e=await Re.fetchIdl(t,this._provider);if(e){const n=new Re(e,t,this._provider);this._idls[t.toBase58()]=n.account}}return this._idls[t.toBase58()]}async fetchAccount({publicKey:t,name:e,programId:n=this._programId}){const o=t.toString();if(!this._cache.has(o))if(e==="TokenAccount"){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${o}`);const u=es(i.data);this._cache.set(o,u)}else if(e){const i=await this.ensureIdl(n);if(i){const u=i[K(e)];if(u){const c=await u.fetch(t);this._cache.set(o,c)}}}else{const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${o}`);const u=i.data,c=await this.ensureIdl(i.owner);if(c){const w=Object.values(c)[0];if(!w)throw new Error("No accounts for this program");const l=w.coder.accounts.decodeAny(u);this._cache.set(o,l)}}return this._cache.get(o)}}class ns{static build(t,e,n,o,i,u,c,w,l,d,b){return(...y)=>new rs(y,o,i,u,c,w,t,e,n,l,d,b)}}function hr(r){return typeof r=="object"&&r!==null&&!("_bn"in r)}function fr(r,t){const e={};for(const n in r){const o=r[n];if(o===null)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");e[n]=hr(o)?fr(o):Q(o)}return e}class rs{constructor(t,e,n,o,i,u,c,w,l,d,b,y){this._ixFn=e,this._txFn=n,this._rpcFn=o,this._simulateFn=i,this._viewFn=u,this._programId=w,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._args=t,this._accountsResolver=new Ce(t,this._accounts,c,w,l,d,b,y)}args(t){this._args=t,this._accountsResolver.args(t)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(t){return this._autoResolveAccounts=!0,this._accountsResolver.resolveOptionals(t),this}accountsStrict(t){return this._autoResolveAccounts=!1,this._accountsResolver.resolveOptionals(t),this}signers(t){return this._signers=this._signers.concat(t),this}remainingAccounts(t){return this._remainingAccounts=this._remainingAccounts.concat(t),this}preInstructions(t){return this._preInstructions=this._preInstructions.concat(t),this}postInstructions(t){return this._postInstructions=this._postInstructions.concat(t),this}async rpc(t){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async rpcAndKeys(t){return{pubkeys:await this.pubkeys(),signature:await this.rpc(t)}}async view(t){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async simulate(t){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:await this._signers}}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class is{static build(t,e,n,o){const i=e.accounts.find(w=>w.isMut),u=!!e.returns;return i||!u?void 0:async(...w)=>{var l,d;let b=await n(...w);const y=`Program return: ${t} `;let p=b.raw.find(A=>A.startsWith(y));if(!p)throw new Error("View expected return log");let m=Zn(p.slice(y.length)),x=e.returns;if(!x)throw new Error("View expected return type");return X.fieldLayout({type:x},Array.from([...(l=o.accounts)!==null&&l!==void 0?l:[],...(d=o.types)!==null&&d!==void 0?d:[]])).decode(m)}}}class os{static build(t,e,n,o,i){const u={},c={},w={},l={},d={},b={},y=qi(t),p=t.accounts?Go.build(t,e,n,o):{};return t.instructions.forEach(m=>{const x=He.build(m,(q,P)=>e.instruction.encode(q,P),n),_=zo.build(m,x),A=qo.build(m,_,y,o),O=Yo.build(m,_,y,o,e,n,t),S=is.build(n,m,O,t),k=ns.build(o,n,m,x,_,A,O,S,p,t.types||[],i&&i(m)),U=K(m.name);c[U]=x,w[U]=_,u[U]=A,l[U]=O,d[U]=k,S&&(b[U]=S)}),[u,c,w,p,l,d,b]}}class Re{get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}constructor(t,e,n,o,i){e=Q(e),n||(n=mt()),this._idl=t,this._provider=n,this._programId=e,this._coder=o??new tr(t),this._events=new Ho(this._programId,n,this._coder);const[u,c,w,l,d,b,y]=os.build(t,this._coder,e,n,i??(()=>{}));this.rpc=u,this.instruction=c,this.transaction=w,this.account=l,this.simulate=d,this.methods=b,this.views=y}static async at(t,e){const n=Q(t),o=await Re.fetchIdl(n,e);if(!o)throw new Error(`IDL not found for program: ${t.toString()}`);return new Re(o,n,e)}static async fetchIdl(t,e){e=e??mt();const n=Q(t),o=await No(n),i=await e.connection.getAccountInfo(o);if(!i)return null;let u=jo(i.data.slice(8));const c=Ui(u.data);return JSON.parse(Fi(c))}addEventListener(t,e){return this._events.addEventListener(t,e)}async removeEventListener(t){return await this._events.removeEventListener(t)}}new W("11111111111111111111111111111111");export{so as A,Re as P};
