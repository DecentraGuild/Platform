var f=function(e,r,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?e!==r||!n:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(e):n?n.value:r.get(e)},w=function(e,r,t,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?e!==r||!o:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,t):o?o.value=t:r.set(e,t),t},s;let a;const l=new Set;function p(e){d=void 0,l.add(e)}function h(e){d=void 0,l.delete(e)}const i={};function g(){if(a||(a=Object.freeze({register:u,get:y,on:E}),typeof window>"u"))return a;const e=Object.freeze({register:u});try{window.addEventListener("wallet-standard:register-wallet",({detail:r})=>r(e))}catch(r){console.error(`wallet-standard:register-wallet event listener could not be added
`,r)}try{window.dispatchEvent(new b(e))}catch(r){console.error(`wallet-standard:app-ready event could not be dispatched
`,r)}return a}function u(...e){return e=e.filter(r=>!l.has(r)),e.length?(e.forEach(r=>p(r)),i.register?.forEach(r=>c(()=>r(...e))),function(){e.forEach(t=>h(t)),i.unregister?.forEach(t=>c(()=>t(...e)))}):()=>{}}let d;function y(){return d||(d=[...l]),d}function E(e,r){return i[e]?.push(r)||(i[e]=[r]),function(){i[e]=i[e]?.filter(n=>r!==n)}}function c(e){try{e()}catch(r){console.error(r)}}class b extends Event{get detail(){return f(this,s,"f")}get type(){return"wallet-standard:app-ready"}constructor(r){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),s.set(this,void 0),w(this,s,r,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}s=new WeakMap;function v(){if(a||(a=g(),typeof window>"u"))return a;const e=window.navigator.wallets||[];if(!Array.isArray(e))return console.error("window.navigator.wallets is not an array"),a;const{register:r}=a,t=(...n)=>n.forEach(o=>c(()=>o({register:r})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),a}return t(...e),a}export{v as DEPRECATED_getWallets,g as getWallets};
