function c(r){return Array.isArray(r)?r.map(t=>({trait_type:String(t.trait_type??t.traitType??""),value:t.value??""})).filter(t=>t.trait_type!==""||t.value!==""):[]}function f(r,t){if(!t?.trim())return r;const e=t.trim().toLowerCase();if(e.length===0)return r;const n=e.replace(/^#/,"");return r.filter(a=>{const i=(a.name??a.metadata?.name??"").toLowerCase(),s=(a.mint??"").toLowerCase();return!!(i.includes(e)||s.includes(e)||s.startsWith(e)||(i.match(/#?\d+/g)??[]).some(u=>u.replace("#","")===n||u===e))})}function l(r){const t={};for(const n of r){const a=c(n.metadata?.traits??[]);for(const{trait_type:i,value:s}of a)i&&(t[i]||(t[i]=new Set),t[i].add(String(s)))}const e={};for(const[n,a]of Object.entries(t))e[n]=Array.from(a).sort();return e}function m(r,t){const e=Object.entries(t??{}).filter(([,n])=>n!=null&&n!=="");return e.length===0?r:r.filter(n=>{const a=c(n.metadata?.traits??[]),i=Object.fromEntries(a.map(s=>[s.trait_type,String(s.value)]));for(const[s,o]of e)if(i[s]!==o)return!1;return!0})}export{m as a,f,l as g,c as n};
