import{_ as $,o as t,c as l,r as g,g as r,a as m,e as C,t as k,j as v,M as V,w as u,l as n,F as S,m as D,b as p,V as F,f as G,W as P,C as z,X as Q,Y as X,d as T,h as O,i as b,A as Y,B as J,H as K,L as Z}from"./DhkfeLsH.js";import{_ as R}from"./T1n2mv5F.js";import{I as w}from"./AfR23o-p.js";import{B as q}from"./DZ77Mkvz.js";import{M as ee}from"./CawqM3FG.js";import"./DAaVrNXw.js";import{u as te}from"./DN_3Odmu.js";import{I as ne,a as ae,g as se}from"./OJWcqhwD.js";const oe={},le={class:"app-shell"},ie={key:0,class:"app-shell__header"},ce={class:"app-shell__body"},re={key:0,class:"app-shell__nav"},de={class:"app-shell__main"};function ue(e,a){return t(),l("div",le,[e.$slots.header?(t(),l("header",ie,[g(e.$slots,"header",{},void 0)])):r("",!0),m("div",ce,[e.$slots.nav?(t(),l("nav",re,[g(e.$slots,"nav",{},void 0)])):r("",!0),m("main",de,[g(e.$slots,"default",{},void 0)])])])}const _e=$(oe,[["render",ue],["__scopeId","data-v-4aea8461"]]),me={class:"app-header"},ve={class:"app-header__left"},he=["src","alt"],fe={class:"app-header__name"},pe={key:0,class:"app-header__nav"},ge={key:0,class:"app-header__actions"},ke=C({__name:"AppHeader",props:{logo:{},name:{}},setup(e){return(a,i)=>(t(),l("div",me,[m("div",ve,[g(a.$slots,"logo",{},()=>[e.logo?(t(),l("img",{key:0,src:e.logo,alt:e.name,class:"app-header__logo"},null,8,he)):r("",!0)]),m("span",fe,k(e.name||"dGuild"),1),a.$slots.nav?(t(),l("div",pe,[g(a.$slots,"nav",{},void 0)])):r("",!0)]),a.$slots.actions?(t(),l("div",ge,[g(a.$slots,"actions",{},void 0)])):r("",!0)]))}}),$e=$(ke,[["__scopeId","data-v-342dbb40"]]),ye={},be={class:"app-nav"};function we(e,a){return t(),l("nav",be,[g(e.$slots,"default",{},void 0)])}const Ce=$(ye,[["render",we],["__scopeId","data-v-2cbcbc4a"]]),Te={class:"nav-link__label"},Se=["href"],Ae={class:"nav-link__label"},Me=C({__name:"NavLink",props:{to:{},href:{},icon:{},isActive:{type:Boolean}},setup(e){return(a,i)=>{const d=R;return e.to?(t(),v(d,{key:0,to:e.to,class:V(["nav-link",{"nav-link--active":e.isActive}]),"active-class":"nav-link--active"},{default:u(()=>[e.icon?(t(),v(n(w),{key:0,icon:e.icon,class:"nav-link__icon"},null,8,["icon"])):r("",!0),m("span",Te,[g(a.$slots,"default",{},void 0,!0)])]),_:3},8,["to","class"])):e.href?(t(),l("a",{key:1,href:e.href,class:V(["nav-link",{"nav-link--active":e.isActive}])},[e.icon?(t(),v(n(w),{key:0,icon:e.icon,class:"nav-link__icon"},null,8,["icon"])):r("",!0),m("span",Ae,[g(a.$slots,"default",{},void 0)])],10,Se)):r("",!0)}}}),j=$(Me,[["__scopeId","data-v-26d12fc9"]]),Ie={class:"connect-wallet-modal"},Ne={key:0,class:"connect-wallet-modal__description"},Be={class:"connect-wallet-modal__list"},Le=["disabled","onClick"],We={class:"connect-wallet-modal__name"},Ee={key:1,class:"connect-wallet-modal__empty"},Ve={key:2,class:"connect-wallet-modal__error"},De=C({__name:"ConnectWalletModal",props:{open:{type:Boolean},title:{default:"Connect wallet"},description:{default:""},connectors:{},loading:{type:Boolean,default:!1},error:{default:null}},emits:["close","select"],setup(e){return(a,i)=>(t(),v(ee,{"model-value":e.open,title:e.title,"onUpdate:modelValue":i[0]||(i[0]=d=>a.$emit("close"))},{default:u(()=>[m("div",Ie,[e.description?(t(),l("p",Ne,k(e.description),1)):r("",!0),m("ul",Be,[(t(!0),l(S,null,D(e.connectors,d=>(t(),l("li",{key:d.id,class:"connect-wallet-modal__item"},[m("button",{type:"button",class:"connect-wallet-modal__connector",disabled:!d.ready||e.loading,onClick:c=>a.$emit("select",d.id)},[m("span",We,k(d.name),1),e.loading?(t(),v(n(w),{key:0,icon:"mdi:loading",class:"connect-wallet-modal__spinner"})):r("",!0)],8,Le)]))),128))]),e.connectors.length===0&&!e.loading?(t(),l("p",Ee," No wallets detected. Install a Solana wallet (e.g. Phantom, Backpack) to continue. ")):r("",!0),e.error?(t(),l("p",Ve,k(e.error),1)):r("",!0)])]),_:1},8,["model-value","title"]))}}),Oe=$(De,[["__scopeId","data-v-fa7ebe93"]]),Ue={class:"transaction-toast__icon"},xe={class:"transaction-toast__message"},He=["href"],Pe=C({__name:"TransactionToast",props:{status:{},message:{},signature:{},explorerUrl:{},dismissible:{type:Boolean}},emits:["dismiss"],setup(e){return(a,i)=>(t(),l("div",{class:V(["transaction-toast",`transaction-toast--${e.status}`])},[m("span",Ue,[e.status==="pending"?(t(),v(n(w),{key:0,icon:"svg-spinners:ring-resize",class:"transaction-toast__spinner"})):e.status==="success"?(t(),v(n(w),{key:1,icon:"mdi:check-circle"})):(t(),v(n(w),{key:2,icon:"mdi:alert-circle"}))]),m("span",xe,k(e.message),1),e.signature?(t(),l("a",{key:0,href:e.explorerUrl,target:"_blank",rel:"noopener",class:"transaction-toast__link"}," View ",8,He)):r("",!0),e.dismissible?(t(),l("button",{key:1,type:"button",class:"transaction-toast__dismiss","aria-label":"Dismiss",onClick:i[0]||(i[0]=d=>a.$emit("dismiss"))},[p(n(w),{icon:"mdi:close"})])):r("",!0)],2))}}),qe=$(Pe,[["__scopeId","data-v-d4747440"]]),je={class:"auth-widget"},Fe={class:"auth-widget__address"},Ge=C({__name:"AuthWidget",setup(e){const a=F(),{wallet:i,loading:d,error:c,connectorState:A,fetchMe:L,refreshConnectorState:M,connectAndSignIn:U,signOut:W}=a,y=O(!1),I=O(!1);G(P,h=>{h&&(y.value=!0,P.value=!1)});const x=b(()=>{const h=i.value;return!h||h.length<10?h??"":`${h.slice(0,4)}...${h.slice(-4)}`});let N=null;z(async()=>{await L(),M(),N=Q(()=>{M()}),I.value=!0}),X(()=>{N?.()});async function B(h){await U(h)&&(y.value=!1)}async function H(){await W()}return(h,s)=>(t(),l("div",je,[I.value&&n(i)?(t(),l(S,{key:0},[m("span",Fe,k(x.value),1),p(n(q),{variant:"secondary",onClick:H},{default:u(()=>[...s[2]||(s[2]=[T(" Sign out ",-1)])]),_:1})],64)):(t(),l(S,{key:1},[p(n(q),{variant:"secondary",onClick:s[0]||(s[0]=o=>y.value=!0)},{default:u(()=>[...s[3]||(s[3]=[T(" Connect wallet ",-1)])]),_:1}),I.value?(t(),v(n(Oe),{key:0,open:y.value,title:"Connect wallet",description:"Choose a wallet to sign in.",connectors:n(A).connectors,loading:n(d),error:n(c),onClose:s[1]||(s[1]=o=>y.value=!1),onSelect:B},null,8,["open","connectors","loading","error"])):r("",!0)],64))]))}}),ze=$(Ge,[["__scopeId","data-v-faa08658"]]),Re={class:"transaction-toast-container"},Qe=C({__name:"TransactionToastContainer",setup(e){const a=te();return(i,d)=>(t(),l("div",Re,[(t(!0),l(S,null,D(n(a).items,c=>(t(),v(n(qe),{key:c.id,status:c.status,message:c.message,signature:c.signature,"explorer-url":c.signature?n(a).getExplorerUrl(c.signature):void 0,dismissible:c.status!=="pending",onDismiss:A=>n(a).remove(c.id)},null,8,["status","message","signature","explorer-url","dismissible","onDismiss"]))),128))]))}}),Xe=Object.assign($(Qe,[["__scopeId","data-v-e8225604"]]),{__name:"TransactionToastContainer"}),Ye={key:0,class:"tenant-error"},Je={key:0,class:"layout-subnav"},Ke=C({__name:"default",setup(e){const a=Y(),i=J(),d=K(),c=b(()=>i.tenant),A=O(""),L=O("dGuild"),M=b(()=>(d.branding.name??c.value?.name)||"dGuild"),U=b(()=>a.path==="/market"||a.path.startsWith("/market/"));function W(){A.value=d.branding.logo??"",L.value=U.value?`Marketplace [${M.value}]`:M.value}z(W),G(()=>[d.branding.logo,d.branding.name,c.value?.name,a.path],W);const y=F(),I=b(()=>{const s=y.wallet.value,o=c.value?.admins??[];return!!(s&&o.includes(s))}),x=b(()=>{const s=c.value?.modules??{};return Object.entries(s).filter(([o,_])=>_.active&&ne.has(o)).filter(([o])=>o!=="admin"||I.value).map(([o])=>{const _=ae[o];return{id:o,path:_?.path??"#",label:_?.label??o,icon:_?.icon??"mdi:circle"}})}),N=b(()=>se(a.path,c.value)??[]);function B(s){const o=i.slug;return o?{path:s,query:{tenant:o}}:s}function H(s,o){const _=i.slug,E={tab:o};return _&&(E.tenant=_),{path:s,query:E}}function h(s){if(s.path){const _=a.path;return _===s.path||s.path!=="/"&&_.startsWith(s.path+"/")}const o=a.query.tab;return s.id==="browse"&&(o===void 0||o==="browse")?a.path==="/market"||a.path.startsWith("/market/"):o===s.id}return(s,o)=>{const _=Z,E=R;return t(),v(n(_e),null,{header:u(()=>[p(n($e),{logo:n(A),name:n(L)},{nav:u(()=>[n(N).length?(t(),l("nav",Je,[(t(!0),l(S,null,D(n(N),f=>(t(),v(E,{key:f.id,to:f.path?B(f.path):H(n(a).path,f.id),class:V(["layout-subnav__tab",{"layout-subnav__tab--active":h(f)}])},{default:u(()=>[T(k(f.label),1)]),_:2},1032,["to","class"]))),128))])):r("",!0)]),actions:u(()=>[p(n(ze))]),_:1},8,["logo","name"])]),nav:u(()=>[p(n(Ce),null,{default:u(()=>[p(n(j),{to:B("/"),icon:"mdi:home"},{default:u(()=>[...o[2]||(o[2]=[T("Home",-1)])]),_:1},8,["to"]),(t(!0),l(S,null,D(n(x),f=>(t(),v(n(j),{key:f.id,to:B(f.path),icon:f.icon},{default:u(()=>[T(k(f.label),1)]),_:2},1032,["to","icon"]))),128))]),_:1})]),default:u(()=>[p(_,null,{fallback:u(()=>[...o[1]||(o[1]=[])]),default:u(()=>[n(i).error?(t(),l("div",Ye,[T(k(n(i).error)+" ",1),o[0]||(o[0]=m("span",{class:"tenant-error__hint"},"Ensure the API is running and the tenant slug exists.",-1))])):r("",!0)]),_:1}),g(s.$slots,"default",{},void 0,!0),p(_,null,{default:u(()=>[p(Xe)]),_:1})]),_:3})}}}),it=$(Ke,[["__scopeId","data-v-1f9635cb"]]);export{it as default};
