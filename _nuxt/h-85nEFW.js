import{_ as k,o as t,c as i,O as f,g as d,a as g,e as w,t as T,i as h,S as O,w as l,k as n,b as p,a0 as F,f as G,a1 as q,z as R,K,L as Q,F as L,d as b,r as x,h as y,l as H,C as J,D as X,H as Y,R as Z}from"./Cuem3LDA.js";import{_ as j}from"./D1xz6KwH.js";import{I as C}from"./Cov751Ou.js";import{B as P}from"./Bl7VwagC.js";import{C as ee}from"./CSnhJXAl.js";/* empty css        */import{u as te}from"./vsL_u0tx.js";import{I as ne,a as se,g as ae}from"./DZ5XcXCl.js";import"./DG6ESaol.js";import"./C-xuITp_.js";const oe={},ie={class:"app-shell"},re={key:0,class:"app-shell__header"},le={class:"app-shell__body"},ce={key:0,class:"app-shell__nav"},ue={class:"app-shell__main"};function de(e,s){return t(),i("div",ie,[e.$slots.header?(t(),i("header",re,[f(e.$slots,"header",{},void 0)])):d("",!0),g("div",le,[e.$slots.nav?(t(),i("nav",ce,[f(e.$slots,"nav",{},void 0)])):d("",!0),g("main",ue,[f(e.$slots,"default",{},void 0)])])])}const _e=k(oe,[["render",de],["__scopeId","data-v-4aea8461"]]),ve={class:"app-header"},he={class:"app-header__left"},me=["src","alt"],pe={class:"app-header__name"},fe={key:0,class:"app-header__nav"},ge={key:0,class:"app-header__actions"},ke=w({__name:"AppHeader",props:{logo:{},name:{}},setup(e){return(s,c)=>(t(),i("div",ve,[g("div",he,[f(s.$slots,"logo",{},()=>[e.logo?(t(),i("img",{key:0,src:e.logo,alt:e.name,class:"app-header__logo"},null,8,me)):d("",!0)]),g("span",pe,T(e.name||"dGuild"),1),s.$slots.nav?(t(),i("div",fe,[f(s.$slots,"nav",{},void 0)])):d("",!0)]),s.$slots.actions?(t(),i("div",ge,[f(s.$slots,"actions",{},void 0)])):d("",!0)]))}}),$e=k(ke,[["__scopeId","data-v-342dbb40"]]),ye={},be={class:"app-nav"};function Ce(e,s){return t(),i("nav",be,[f(e.$slots,"default",{},void 0)])}const Te=k(ye,[["render",Ce],["__scopeId","data-v-2cbcbc4a"]]),we={class:"nav-link__label"},Se=["href"],Ae={class:"nav-link__label"},Ie=w({__name:"NavLink",props:{to:{},href:{},icon:{},isActive:{type:Boolean}},setup(e){return(s,c)=>{const m=j;return e.to?(t(),h(m,{key:0,to:e.to,class:O(["nav-link",{"nav-link--active":e.isActive}]),"active-class":"nav-link--active"},{default:l(()=>[e.icon?(t(),h(n(C),{key:0,icon:e.icon,class:"nav-link__icon"},null,8,["icon"])):d("",!0),g("span",we,[f(s.$slots,"default",{},void 0,!0)])]),_:3},8,["to","class"])):e.href?(t(),i("a",{key:1,href:e.href,class:O(["nav-link",{"nav-link--active":e.isActive}])},[e.icon?(t(),h(n(C),{key:0,icon:e.icon,class:"nav-link__icon"},null,8,["icon"])):d("",!0),g("span",Ae,[f(s.$slots,"default",{},void 0)])],10,Se)):d("",!0)}}}),z=k(Ie,[["__scopeId","data-v-26d12fc9"]]),Ne={class:"transaction-toast__icon"},Me={class:"transaction-toast__message"},Le=["href"],Be=w({__name:"TransactionToast",props:{status:{},message:{},signature:{},explorerUrl:{},dismissible:{type:Boolean}},emits:["dismiss"],setup(e){return(s,c)=>(t(),i("div",{class:O(["transaction-toast",`transaction-toast--${e.status}`])},[g("span",Ne,[e.status==="pending"?(t(),h(n(C),{key:0,icon:"svg-spinners:ring-resize",class:"transaction-toast__spinner"})):e.status==="success"?(t(),h(n(C),{key:1,icon:"mdi:check-circle"})):(t(),h(n(C),{key:2,icon:"mdi:alert-circle"}))]),g("span",Me,T(e.message),1),e.signature?(t(),i("a",{key:0,href:e.explorerUrl,target:"_blank",rel:"noopener",class:"transaction-toast__link"}," View ",8,Le)):d("",!0),e.dismissible?(t(),i("button",{key:1,type:"button",class:"transaction-toast__dismiss","aria-label":"Dismiss",onClick:c[0]||(c[0]=m=>s.$emit("dismiss"))},[p(n(C),{icon:"mdi:close"})])):d("",!0)],2))}}),De=k(Be,[["__scopeId","data-v-d4747440"]]),Ee={class:"auth-widget"},Oe={class:"auth-widget__address"},xe=w({__name:"AuthWidget",setup(e){const s=F(),{wallet:c,loading:m,error:r,connectorState:S,fetchMe:B,refreshConnectorState:A,connectAndSignIn:W,signOut:D}=s,$=x(!1),I=x(!1);G(q,_=>{_&&($.value=!0,q.value=!1)});const U=y(()=>{const _=c.value;return!_||_.length<10?_??"":`${_.slice(0,4)}...${_.slice(-4)}`});let N=null;R(async()=>{await B(),A(),N=K(()=>{A()}),I.value=!0}),Q(()=>{N?.()});async function M(_){await W(_)&&($.value=!1)}async function V(){await D()}return(_,a)=>(t(),i("div",Ee,[I.value&&n(c)?(t(),i(L,{key:0},[g("span",Oe,T(U.value),1),p(n(P),{variant:"secondary",onClick:V},{default:l(()=>[...a[2]||(a[2]=[b(" Sign out ",-1)])]),_:1})],64)):(t(),i(L,{key:1},[p(n(P),{variant:"secondary",onClick:a[0]||(a[0]=o=>$.value=!0)},{default:l(()=>[...a[3]||(a[3]=[b(" Connect wallet ",-1)])]),_:1}),I.value?(t(),h(n(ee),{key:0,open:$.value,title:"Connect wallet",description:"Choose a wallet to sign in.",connectors:n(S).connectors,loading:n(m),error:n(r),onClose:a[1]||(a[1]=o=>$.value=!1),onSelect:M},null,8,["open","connectors","loading","error"])):d("",!0)],64))]))}}),We=k(xe,[["__scopeId","data-v-f55a4563"]]),Ue={class:"transaction-toast-container"},Ve=w({__name:"TransactionToastContainer",setup(e){const s=te();return(c,m)=>(t(),i("div",Ue,[(t(!0),i(L,null,H(n(s).items,r=>(t(),h(n(De),{key:r.id,status:r.status,message:r.message,signature:r.signature,"explorer-url":r.signature?n(s).getExplorerUrl(r.signature):void 0,dismissible:r.status!=="pending",onDismiss:S=>n(s).remove(r.id)},null,8,["status","message","signature","explorer-url","dismissible","onDismiss"]))),128))]))}}),He=Object.assign(k(Ve,[["__scopeId","data-v-e8225604"]]),{__name:"TransactionToastContainer"}),qe={key:0,class:"tenant-error"},Pe={key:0,class:"layout-subnav"},ze=w({__name:"default",setup(e){const s=J(),c=X(),m=Y(),r=y(()=>c.tenant),S=x(""),B=x("dGuild"),A=y(()=>(m.branding.name??r.value?.name)||"dGuild"),W=y(()=>s.path==="/market"||s.path.startsWith("/market/"));function D(){S.value=m.branding.logo??"",B.value=W.value?`Marketplace [${A.value}]`:A.value}R(D),G(()=>[m.branding.logo,m.branding.name,r.value?.name,s.path],D);const $=F(),I=y(()=>{const a=$.wallet.value,o=r.value?.admins??[];return!!(a&&o.includes(a))}),U=y(()=>{const a=r.value?.modules??{};return Object.entries(a).filter(([o,u])=>u.active&&ne.has(o)).filter(([o])=>o!=="admin"||I.value).map(([o])=>{const u=se[o];return{id:o,path:u?.path??"#",label:u?.label??o,icon:u?.icon??"mdi:circle"}})}),N=y(()=>ae(s.path,r.value)??[]);function M(a){const o=c.slug;return o?{path:a,query:{tenant:o}}:a}function V(a,o){const u=c.slug,E={tab:o};return u&&(E.tenant=u),{path:a,query:E}}function _(a){if(a.path){const u=s.path;return u===a.path||a.path!=="/"&&u.startsWith(a.path+"/")}const o=s.query.tab;return a.id==="browse"&&(o===void 0||o==="browse")?s.path==="/market"||s.path.startsWith("/market/"):o===a.id}return(a,o)=>{const u=Z,E=j;return t(),h(n(_e),null,{header:l(()=>[p(n($e),{logo:n(S),name:n(B)},{nav:l(()=>[n(N).length?(t(),i("nav",Pe,[(t(!0),i(L,null,H(n(N),v=>(t(),h(E,{key:v.id,to:v.path?M(v.path):V(n(s).path,v.id),class:O(["layout-subnav__tab",{"layout-subnav__tab--active":_(v)}])},{default:l(()=>[b(T(v.label),1)]),_:2},1032,["to","class"]))),128))])):d("",!0)]),actions:l(()=>[p(n(We))]),_:1},8,["logo","name"])]),nav:l(()=>[p(n(Te),null,{default:l(()=>[p(n(z),{to:M("/"),icon:"mdi:home"},{default:l(()=>[...o[2]||(o[2]=[b("Home",-1)])]),_:1},8,["to"]),(t(!0),i(L,null,H(n(U),v=>(t(),h(n(z),{key:v.id,to:M(v.path),icon:v.icon},{default:l(()=>[b(T(v.label),1)]),_:2},1032,["to","icon"]))),128))]),_:1})]),default:l(()=>[p(u,null,{fallback:l(()=>[...o[1]||(o[1]=[])]),default:l(()=>[n(c).error?(t(),i("div",qe,[b(T(n(c).error)+" ",1),o[0]||(o[0]=g("span",{class:"tenant-error__hint"},"Ensure the API is running and the tenant slug exists.",-1))])):d("",!0)]),_:1}),f(a.$slots,"default",{},void 0,!0),p(u,null,{default:l(()=>[p(He)]),_:1})]),_:3})}}}),et=k(ze,[["__scopeId","data-v-1f9635cb"]]);export{et as default};
