# API environment variables (copy to .env or set in Railway)
# Never commit .env or real secrets.

# Required for production (auth fails without SESSION_SECRET)
SESSION_SECRET=  # Generate: openssl rand -base64 32 (min 32 chars)

# CORS: explicit origins (platform + localhost for dev). Tenant subdomains (e.g. https://skull.dguild.org) are allowed dynamically; no need to list each tenant.
CORS_ORIGIN=https://dguild.org,http://localhost:3000,http://localhost:3002
# Optional: tenant base domain for CORS (default .dguild.org). Must match packages/core resolver.
# CORS_TENANT_DOMAIN=.dguild.org

# Required for DB and admin save
DATABASE_URL=  # Postgres connection string (Railway provides via Add Reference)

# Optional
PORT=3001
# Rate limit: max requests per window (default 200), window (default "1 minute")
# RATE_LIMIT_MAX=200
# RATE_LIMIT_WINDOW=1 minute
# Stricter per-route limits (auth and tenant creation)
# RATE_LIMIT_AUTH_MAX=10
# RATE_LIMIT_TENANT_CREATE_MAX=5
# RATE_LIMIT_DISCORD_VERIFY_MAX=20
SOLANA_RPC_URL=  # Or HELIUS_RPC for mint metadata refresh (default: public mainnet)
NODE_ENV=production
TENANT_CONFIG_PATH=  # Auto-resolved from repo layout when building from root

# Discord verification module
# Bot: token from Discord Developer Portal; used by apps/discord-bot
DISCORD_BOT_TOKEN=
# API secret for bot server-to-server auth (bot sends x-bot-secret or Authorization Bearer)
DISCORD_BOT_API_SECRET=
# Discord application (client) ID for OAuth invite link in Admin
DISCORD_CLIENT_ID=
# Optional: Discord OAuth client secret if using full OAuth flow
# DISCORD_CLIENT_SECRET=
# Holder sync: cron or internal caller sends x-sync-secret (defaults to DISCORD_BOT_API_SECRET if not set)
# DISCORD_SYNC_SECRET=
# Optional: run holder sync on API boot and every N minutes (e.g. 15). Logs appear in API console.
# DISCORD_SYNC_INTERVAL_MINUTES=
# Optional: max configured mints per tenant (billing cap); no enforcement if unset
# DISCORD_MAX_MINTS_PER_TENANT=
